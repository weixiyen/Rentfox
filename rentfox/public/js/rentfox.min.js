(function(){var W=this,ab,F=W.jQuery,S=W.$,T=W.jQuery=W.$=function(b,a){return new T.fn.init(b,a)},M=/^[^<]*(<(.|\s)+>)[^>]*$|^#([\w-]+)$/,ac=/^.[^:#\[\.,]*$/;T.fn=T.prototype={init:function(f,b){f=f||document;if(f.nodeType){this[0]=f;this.length=1;this.context=f;return this}if(typeof f==="string"){var c=M.exec(f);if(c&&(c[1]||!b)){if(c[1]){f=T.clean([c[1]],b)}else{var a=document.getElementById(c[3]);if(a&&a.id!=c[3]){return T().find(f)}var e=T(a||[]);e.context=document;e.selector=f;return e}}else{return T(b).find(f)}}else{if(T.isFunction(f)){return T(document).ready(f)}}if(f.selector&&f.context){this.selector=f.selector;this.context=f.context}return this.setArray(T.isArray(f)?f:T.makeArray(f))},selector:"",jquery:"1.3.2",size:function(){return this.length},get:function(a){return a===ab?Array.prototype.slice.call(this):this[a]},pushStack:function(c,a,e){var b=T(c);b.prevObject=this;b.context=this.context;if(a==="find"){b.selector=this.selector+(this.selector?" ":"")+e}else{if(a){b.selector=this.selector+"."+a+"("+e+")"}}return b},setArray:function(a){this.length=0;Array.prototype.push.apply(this,a);return this},each:function(a,b){return T.each(this,a,b)},index:function(a){return T.inArray(a&&a.jquery?a[0]:a,this)},attr:function(c,a,b){var e=c;if(typeof c==="string"){if(a===ab){return this[0]&&T[b||"attr"](this[0],c)}else{e={};e[c]=a}}return this.each(function(f){for(c in e){T.attr(b?this.style:this,c,T.prop(this,e[c],b,f,c))}})},css:function(b,a){if((b=="width"||b=="height")&&parseFloat(a)<0){a=ab}return this.attr(b,a,"curCSS")},text:function(a){if(typeof a!=="object"&&a!=null){return this.empty().append((this[0]&&this[0].ownerDocument||document).createTextNode(a))}var b="";T.each(a||this,function(){T.each(this.childNodes,function(){if(this.nodeType!=8){b+=this.nodeType!=1?this.nodeValue:T.fn.text([this])}})});return b},wrapAll:function(b){if(this[0]){var a=T(b,this[0].ownerDocument).clone();if(this[0].parentNode){a.insertBefore(this[0])}a.map(function(){var c=this;while(c.firstChild){c=c.firstChild}return c}).append(this)}return this},wrapInner:function(a){return this.each(function(){T(this).contents().wrapAll(a)})},wrap:function(a){return this.each(function(){T(this).wrapAll(a)})},append:function(){return this.domManip(arguments,true,function(a){if(this.nodeType==1){this.appendChild(a)}})},prepend:function(){return this.domManip(arguments,true,function(a){if(this.nodeType==1){this.insertBefore(a,this.firstChild)}})},before:function(){return this.domManip(arguments,false,function(a){this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,false,function(a){this.parentNode.insertBefore(a,this.nextSibling)})},end:function(){return this.prevObject||T([])},push:[].push,sort:[].sort,splice:[].splice,find:function(b){if(this.length===1){var a=this.pushStack([],"find",b);a.length=0;T.find(b,this[0],a);return a}else{return this.pushStack(T.unique(T.map(this,function(c){return T.find(b,c)})),"find",b)}},clone:function(b){var e=this.map(function(){if(!T.support.noCloneEvent&&!T.isXMLDoc(this)){var g=this.outerHTML;if(!g){var f=this.ownerDocument.createElement("div");f.appendChild(this.cloneNode(true));g=f.innerHTML}return T.clean([g.replace(/ jQuery\d+="(?:\d+|null)"/g,"").replace(/^\s*/,"")])[0]}else{return this.cloneNode(true)}});if(b===true){var a=this.find("*").andSelf(),c=0;e.find("*").andSelf().each(function(){if(this.nodeName!==a[c].nodeName){return}var h=T.data(a[c],"events");for(var f in h){for(var g in h[f]){T.event.add(this,f,h[f][g],h[f][g].data)}}c++})}return e},filter:function(a){return this.pushStack(T.isFunction(a)&&T.grep(this,function(b,c){return a.call(b,c)})||T.multiFilter(a,T.grep(this,function(b){return b.nodeType===1})),"filter",a)},closest:function(c){var a=T.expr.match.POS.test(c)?T(c):null,b=0;return this.map(function(){var e=this;while(e&&e.ownerDocument){if(a?a.index(e)>-1:T(e).is(c)){T.data(e,"closest",b);return e}e=e.parentNode;b++}})},not:function(b){if(typeof b==="string"){if(ac.test(b)){return this.pushStack(T.multiFilter(b,this,true),"not",b)}else{b=T.multiFilter(b,this)}}var a=b.length&&b[b.length-1]!==ab&&!b.nodeType;return this.filter(function(){return a?T.inArray(this,b)<0:this!=b})},add:function(a){return this.pushStack(T.unique(T.merge(this.get(),typeof a==="string"?T(a):T.makeArray(a))))},is:function(a){return !!a&&T.multiFilter(a,this).length>0},hasClass:function(a){return !!a&&this.is("."+a)},val:function(c){if(c===ab){var j=this[0];if(j){if(T.nodeName(j,"option")){return(j.attributes.value||{}).specified?j.value:j.text}if(T.nodeName(j,"select")){var f=j.selectedIndex,b=[],a=j.options,g=j.type=="select-one";if(f<0){return null}for(var i=g?f:0,e=g?f+1:a.length;i<e;i++){var h=a[i];if(h.selected){c=T(h).val();if(g){return c}b.push(c)}}return b}return(j.value||"").replace(/\r/g,"")}return ab}if(typeof c==="number"){c+=""}return this.each(function(){if(this.nodeType!=1){return}if(T.isArray(c)&&/radio|checkbox/.test(this.type)){this.checked=(T.inArray(this.value,c)>=0||T.inArray(this.name,c)>=0)}else{if(T.nodeName(this,"select")){var k=T.makeArray(c);T("option",this).each(function(){this.selected=(T.inArray(this.value,k)>=0||T.inArray(this.text,k)>=0)});if(!k.length){this.selectedIndex=-1}}else{this.value=c}}})},html:function(a){return a===ab?(this[0]?this[0].innerHTML.replace(/ jQuery\d+="(?:\d+|null)"/g,""):null):this.empty().append(a)},replaceWith:function(a){return this.after(a).remove()},eq:function(a){return this.slice(a,+a+1)},slice:function(){return this.pushStack(Array.prototype.slice.apply(this,arguments),"slice",Array.prototype.slice.call(arguments).join(","))},map:function(a){return this.pushStack(T.map(this,function(b,c){return a.call(b,c,b)}))},andSelf:function(){return this.add(this.prevObject)},domManip:function(e,a,b){if(this[0]){var f=(this[0].ownerDocument||this[0]).createDocumentFragment(),i=T.clean(e,(this[0].ownerDocument||this[0]),f),g=f.firstChild;if(g){for(var h=0,j=this.length;h<j;h++){b.call(c(this[h],g),this.length>1||h>0?f.cloneNode(true):f)}}if(i){T.each(i,E)}}return this;function c(l,k){return a&&T.nodeName(l,"table")&&T.nodeName(k,"tr")?(l.getElementsByTagName("tbody")[0]||l.appendChild(l.ownerDocument.createElement("tbody"))):l}}};T.fn.init.prototype=T.fn;function E(b,a){if(a.src){T.ajax({url:a.src,async:false,dataType:"script"})}else{T.globalEval(a.text||a.textContent||a.innerHTML||"")}if(a.parentNode){a.parentNode.removeChild(a)}}function ad(){return +new Date}T.extend=T.fn.extend=function(){var c=arguments[0]||{},f=1,e=arguments.length,i=false,g;if(typeof c==="boolean"){i=c;c=arguments[1]||{};f=2}if(typeof c!=="object"&&!T.isFunction(c)){c={}}if(e==f){c=this;--f}for(;f<e;f++){if((g=arguments[f])!=null){for(var h in g){var b=c[h],a=g[h];if(c===a){continue}if(i&&a&&typeof a==="object"&&!a.nodeType){c[h]=T.extend(i,b||(a.length!=null?[]:{}),a)}else{if(a!==ab){c[h]=a}}}}}return c};var ag=/z-?index|font-?weight|opacity|zoom|line-?height/i,Q=document.defaultView||{},L=Object.prototype.toString;T.extend({noConflict:function(a){W.$=S;if(a){W.jQuery=F}return T},isFunction:function(a){return L.call(a)==="[object Function]"},isArray:function(a){return L.call(a)==="[object Array]"},isXMLDoc:function(a){return a.nodeType===9&&a.documentElement.nodeName!=="HTML"||!!a.ownerDocument&&T.isXMLDoc(a.ownerDocument)},globalEval:function(a){if(a&&/\S/.test(a)){var b=document.getElementsByTagName("head")[0]||document.documentElement,c=document.createElement("script");c.type="text/javascript";if(T.support.scriptEval){c.appendChild(document.createTextNode(a))}else{c.text=a}b.insertBefore(c,b.firstChild);b.removeChild(c)}},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()==b.toUpperCase()},each:function(f,a,g){var h,e=0,c=f.length;if(g){if(c===ab){for(h in f){if(a.apply(f[h],g)===false){break}}}else{for(;e<c;){if(a.apply(f[e++],g)===false){break}}}}else{if(c===ab){for(h in f){if(a.call(f[h],h,f[h])===false){break}}}else{for(var b=f[0];e<c&&a.call(b,e,b)!==false;b=f[++e]){}}}return f},prop:function(b,a,c,e,f){if(T.isFunction(a)){a=a.call(b,e)}return typeof a==="number"&&c=="curCSS"&&!ag.test(f)?a+"px":a},className:{add:function(b,a){T.each((a||"").split(/\s+/),function(e,c){if(b.nodeType==1&&!T.className.has(b.className,c)){b.className+=(b.className?" ":"")+c}})},remove:function(b,a){if(b.nodeType==1){b.className=a!==ab?T.grep(b.className.split(/\s+/),function(c){return !T.className.has(a,c)}).join(" "):""}},has:function(a,b){return a&&T.inArray(b,(a.className||a).toString().split(/\s+/))>-1}},swap:function(b,c,a){var f={};for(var e in c){f[e]=b.style[e];b.style[e]=c[e]}a.call(b);for(var e in c){b.style[e]=f[e]}},css:function(f,h,c,i){if(h=="width"||h=="height"){var a,g={position:"absolute",visibility:"hidden",display:"block"},b=h=="width"?["Left","Right"]:["Top","Bottom"];function e(){a=h=="width"?f.offsetWidth:f.offsetHeight;if(i==="border"){return}T.each(b,function(){if(!i){a-=parseFloat(T.curCSS(f,"padding"+this,true))||0}if(i==="margin"){a+=parseFloat(T.curCSS(f,"margin"+this,true))||0}else{a-=parseFloat(T.curCSS(f,"border"+this+"Width",true))||0}})}if(f.offsetWidth!==0){e()}else{T.swap(f,g,e)}return Math.max(0,Math.round(a))}return T.curCSS(f,h,c)},curCSS:function(f,i,h){var b,j=f.style;if(i=="opacity"&&!T.support.opacity){b=T.attr(j,"opacity");return b==""?"1":b}if(i.match(/float/i)){i=H}if(!h&&j&&j[i]){b=j[i]}else{if(Q.getComputedStyle){if(i.match(/float/i)){i="float"}i=i.replace(/([A-Z])/g,"-$1").toLowerCase();var a=Q.getComputedStyle(f,null);if(a){b=a.getPropertyValue(i)}if(i=="opacity"&&b==""){b="1"}}else{if(f.currentStyle){var e=i.replace(/\-(\w)/g,function(l,k){return k.toUpperCase()});b=f.currentStyle[i]||f.currentStyle[e];if(!/^\d+(px)?$/i.test(b)&&/^\d/.test(b)){var g=j.left,c=f.runtimeStyle.left;f.runtimeStyle.left=f.currentStyle.left;j.left=b||0;b=j.pixelLeft+"px";j.left=g;f.runtimeStyle.left=c}}}}return b},clean:function(h,b,e){b=b||document;if(typeof b.createElement==="undefined"){b=b.ownerDocument||b[0]&&b[0].ownerDocument||document}if(!e&&h.length===1&&typeof h[0]==="string"){var f=/^<(\w+)\s*\/?>$/.exec(h[0]);if(f){return[b.createElement(f[1])]}}var g=[],i=[],a=b.createElement("div");T.each(h,function(n,j){if(typeof j==="number"){j+=""}if(!j){return}if(typeof j==="string"){j=j.replace(/(<(\w+)[^>]*?)\/>/g,function(s,r,u){return u.match(/^(abbr|br|col|img|input|link|meta|param|hr|area|embed)$/i)?s:r+"></"+u+">"});var o=j.replace(/^\s+/,"").substring(0,10).toLowerCase();var l=!o.indexOf("<opt")&&[1,"<select multiple='multiple'>","</select>"]||!o.indexOf("<leg")&&[1,"<fieldset>","</fieldset>"]||o.match(/^<(thead|tbody|tfoot|colg|cap)/)&&[1,"<table>","</table>"]||!o.indexOf("<tr")&&[2,"<table><tbody>","</tbody></table>"]||(!o.indexOf("<td")||!o.indexOf("<th"))&&[3,"<table><tbody><tr>","</tr></tbody></table>"]||!o.indexOf("<col")&&[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"]||!T.support.htmlSerialize&&[1,"div<div>","</div>"]||[0,"",""];a.innerHTML=l[1]+j+l[2];while(l[0]--){a=a.lastChild}if(!T.support.tbody){var k=/<tbody/i.test(j),p=!o.indexOf("<table")&&!k?a.firstChild&&a.firstChild.childNodes:l[1]=="<table>"&&!k?a.childNodes:[];for(var q=p.length-1;q>=0;--q){if(T.nodeName(p[q],"tbody")&&!p[q].childNodes.length){p[q].parentNode.removeChild(p[q])}}}if(!T.support.leadingWhitespace&&/^\s/.test(j)){a.insertBefore(b.createTextNode(j.match(/^\s*/)[0]),a.firstChild)}j=T.makeArray(a.childNodes)}if(j.nodeType){g.push(j)}else{g=T.merge(g,j)}});if(e){for(var c=0;g[c];c++){if(T.nodeName(g[c],"script")&&(!g[c].type||g[c].type.toLowerCase()==="text/javascript")){i.push(g[c].parentNode?g[c].parentNode.removeChild(g[c]):g[c])}else{if(g[c].nodeType===1){g.splice.apply(g,[c+1,0].concat(T.makeArray(g[c].getElementsByTagName("script"))))}e.appendChild(g[c])}}return i}return g},attr:function(c,g,b){if(!c||c.nodeType==3||c.nodeType==8){return ab}var f=!T.isXMLDoc(c),a=b!==ab;g=f&&T.props[g]||g;if(c.tagName){var h=/href|src|style/.test(g);if(g=="selected"&&c.parentNode){c.parentNode.selectedIndex}if(g in c&&f&&!h){if(a){if(g=="type"&&T.nodeName(c,"input")&&c.parentNode){throw"type property can't be changed"}c[g]=b}if(T.nodeName(c,"form")&&c.getAttributeNode(g)){return c.getAttributeNode(g).nodeValue}if(g=="tabIndex"){var e=c.getAttributeNode("tabIndex");return e&&e.specified?e.value:c.nodeName.match(/(button|input|object|select|textarea)/i)?0:c.nodeName.match(/^(a|area)$/i)&&c.href?0:ab}return c[g]}if(!T.support.style&&f&&g=="style"){return T.attr(c.style,"cssText",b)}if(a){c.setAttribute(g,""+b)}var i=!T.support.hrefNormalized&&f&&h?c.getAttribute(g,2):c.getAttribute(g);return i===null?ab:i}if(!T.support.opacity&&g=="opacity"){if(a){c.zoom=1;c.filter=(c.filter||"").replace(/alpha\([^)]*\)/,"")+(parseInt(b)+""=="NaN"?"":"alpha(opacity="+b*100+")")}return c.filter&&c.filter.indexOf("opacity=")>=0?(parseFloat(c.filter.match(/opacity=([^)]*)/)[1])/100)+"":""}g=g.replace(/-([a-z])/ig,function(k,j){return j.toUpperCase()});if(a){c[g]=b}return c[g]},trim:function(a){return(a||"").replace(/^\s+|\s+$/g,"")},makeArray:function(a){var c=[];if(a!=null){var b=a.length;if(b==null||typeof a==="string"||T.isFunction(a)||a.setInterval){c[0]=a}else{while(b){c[--b]=a[b]}}}return c},inArray:function(b,a){for(var e=0,c=a.length;e<c;e++){if(a[e]===b){return e}}return -1},merge:function(b,f){var e=0,c,a=b.length;if(!T.support.getAll){while((c=f[e++])!=null){if(c.nodeType!=8){b[a++]=c}}}else{while((c=f[e++])!=null){b[a++]=c}}return b},unique:function(a){var g=[],h={};try{for(var f=0,e=a.length;f<e;f++){var b=T.data(a[f]);if(!h[b]){h[b]=true;g.push(a[f])}}}catch(c){g=a}return g},grep:function(f,a,g){var e=[];for(var c=0,b=f.length;c<b;c++){if(!g!=!a(f[c],c)){e.push(f[c])}}return e},map:function(g,a){var f=[];for(var e=0,c=g.length;e<c;e++){var b=a(g[e],e);if(b!=null){f[f.length]=b}}return f.concat.apply([],f)}});var O=navigator.userAgent.toLowerCase();T.browser={version:(O.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[0,"0"])[1],safari:/webkit/.test(O),opera:/opera/.test(O),msie:/msie/.test(O)&&!/opera/.test(O),mozilla:/mozilla/.test(O)&&!/(compatible|webkit)/.test(O)};T.each({parent:function(a){return a.parentNode},parents:function(a){return T.dir(a,"parentNode")},next:function(a){return T.nth(a,2,"nextSibling")},prev:function(a){return T.nth(a,2,"previousSibling")},nextAll:function(a){return T.dir(a,"nextSibling")},prevAll:function(a){return T.dir(a,"previousSibling")},siblings:function(a){return T.sibling(a.parentNode.firstChild,a)},children:function(a){return T.sibling(a.firstChild)},contents:function(a){return T.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:T.makeArray(a.childNodes)}},function(b,a){T.fn[b]=function(e){var c=T.map(this,a);if(e&&typeof e=="string"){c=T.multiFilter(e,c)}return this.pushStack(T.unique(c),b,e)}});T.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(b,a){T.fn[b]=function(i){var f=[],c=T(i);for(var e=0,h=c.length;e<h;e++){var g=(e>0?this.clone(true):this).get();T.fn[a].apply(T(c[e]),g);f=f.concat(g)}return this.pushStack(f,b,i)}});T.each({removeAttr:function(a){T.attr(this,a,"");if(this.nodeType==1){this.removeAttribute(a)}},addClass:function(a){T.className.add(this,a)},removeClass:function(a){T.className.remove(this,a)},toggleClass:function(a,b){if(typeof b!=="boolean"){b=!T.className.has(this,a)}T.className[b?"add":"remove"](this,a)},remove:function(a){if(!a||T.filter(a,[this]).length){T("*",this).add([this]).each(function(){T.event.remove(this);T.removeData(this)});if(this.parentNode){this.parentNode.removeChild(this)}}},empty:function(){T(this).children().remove();while(this.firstChild){this.removeChild(this.firstChild)}}},function(b,a){T.fn[b]=function(){return this.each(a,arguments)}});function Y(b,a){return b[0]&&parseInt(T.curCSS(b[0],a,true),10)||0}var aa="jQuery"+ad(),I=0,R={};T.extend({cache:{},data:function(c,e,b){c=c==W?R:c;var a=c[aa];if(!a){a=c[aa]=++I}if(e&&!T.cache[a]){T.cache[a]={}}if(b!==ab){T.cache[a][e]=b}return e?T.cache[a][e]:a},removeData:function(c,e){c=c==W?R:c;var a=c[aa];if(e){if(T.cache[a]){delete T.cache[a][e];e="";for(e in T.cache[a]){break}if(!e){T.removeData(c)}}}else{try{delete c[aa]}catch(b){if(c.removeAttribute){c.removeAttribute(aa)}}delete T.cache[a]}},queue:function(c,e,a){if(c){e=(e||"fx")+"queue";var b=T.data(c,e);if(!b||T.isArray(a)){b=T.data(c,e,T.makeArray(a))}else{if(a){b.push(a)}}}return b},dequeue:function(a,b){var e=T.queue(a,b),c=e.shift();if(!b||b==="fx"){c=e[0]}if(c!==ab){c.call(a)}}});T.fn.extend({data:function(e,b){var a=e.split(".");a[1]=a[1]?"."+a[1]:"";if(b===ab){var c=this.triggerHandler("getData"+a[1]+"!",[a[0]]);if(c===ab&&this.length){c=T.data(this[0],e)}return c===ab&&a[1]?this.data(a[0]):c}else{return this.trigger("setData"+a[1]+"!",[a[0],b]).each(function(){T.data(this,e,b)})}},removeData:function(a){return this.each(function(){T.removeData(this,a)})},queue:function(b,a){if(typeof b!=="string"){a=b;b="fx"}if(a===ab){return T.queue(this[0],b)}return this.each(function(){var c=T.queue(this,b,a);if(b=="fx"&&c.length==1){c[0].call(this)}})},dequeue:function(a){return this.each(function(){T.dequeue(this,a)})}});(function(){var b=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^[\]]*\]|['"][^'"]*['"]|[^[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?/g,i=0,n=Object.prototype.toString;var p=function(u,z,am,al){am=am||[];z=z||document;if(z.nodeType!==1&&z.nodeType!==9){return[]}if(!u||typeof u!=="string"){return am}var s=[],w,ai,B,A,ak,x,v=true;b.lastIndex=0;while((w=b.exec(u))!==null){s.push(w[1]);if(w[2]){x=RegExp.rightContext;break}}if(s.length>1&&h.exec(u)){if(s.length===2&&l.relative[s[0]]){ai=k(s[0]+s[1],z)}else{ai=l.relative[s[0]]?[z]:p(s.shift(),z);while(s.length){u=s.shift();if(l.relative[u]){u+=s.shift()}ai=k(u,ai)}}}else{var aj=al?{expr:s.pop(),set:q(al)}:p.find(s.pop(),s.length===1&&z.parentNode?z.parentNode:z,c(z));ai=p.filter(aj.expr,aj.set);if(s.length>0){B=q(ai)}else{v=false}while(s.length){var C=s.pop(),D=C;if(!l.relative[C]){C=""}else{D=s.pop()}if(D==null){D=z}l.relative[C](B,D,c(z))}}if(!B){B=ai}if(!B){throw"Syntax error, unrecognized expression: "+(C||u)}if(n.call(B)==="[object Array]"){if(!v){am.push.apply(am,B)}else{if(z.nodeType===1){for(var r=0;B[r]!=null;r++){if(B[r]&&(B[r]===true||B[r].nodeType===1&&j(z,B[r]))){am.push(ai[r])}}}else{for(var r=0;B[r]!=null;r++){if(B[r]&&B[r].nodeType===1){am.push(ai[r])}}}}}else{q(B,am)}if(x){p(x,z,am,al);if(o){hasDuplicate=false;am.sort(o);if(hasDuplicate){for(var r=1;r<am.length;r++){if(am[r]===am[r-1]){am.splice(r--,1)}}}}}return am};p.matches=function(s,r){return p(s,null,null,r)};p.find=function(r,A,B){var s,v;if(!r){return[]}for(var w=0,x=l.order.length;w<x;w++){var u=l.order[w],v;if((v=l.match[u].exec(r))){var z=RegExp.leftContext;if(z.substr(z.length-1)!=="\\"){v[1]=(v[1]||"").replace(/\\/g,"");s=l.find[u](v,A,B);if(s!=null){r=r.replace(l.match[u],"");break}}}}if(!s){s=A.getElementsByTagName("*")}return{set:s,expr:r}};p.filter=function(ak,al,D,w){var x=ak,B=[],r=al,u,A,s=al&&al[0]&&c(al[0]);while(ak&&al.length){for(var am in l.filter){if((u=l.match[am].exec(ak))!=null){var z=l.filter[am],C,ai;A=false;if(r==B){B=[]}if(l.preFilter[am]){u=l.preFilter[am](u,r,D,B,w,s);if(!u){A=C=true}else{if(u===true){continue}}}if(u){for(var v=0;(ai=r[v])!=null;v++){if(ai){C=z(ai,u,v,r);var aj=w^!!C;if(D&&C!=null){if(aj){A=true}else{r[v]=false}}else{if(aj){B.push(ai);A=true}}}}}if(C!==ab){if(!D){r=B}ak=ak.replace(l.match[am],"");if(!A){return[]}break}}}if(ak==x){if(A==null){throw"Syntax error, unrecognized expression: "+ak}else{break}}x=ak}return r};var l=p.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF_-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF_-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF_-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF_-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*_-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF_-]|\\.)+)(?:\((['"]*)((?:\([^\)]+\)|[^\2\(\)]*)+)\2\))?/},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(r){return r.getAttribute("href")}},relative:{"+":function(r,A,s){var v=typeof A==="string",B=v&&!/\W/.test(A),u=v&&!B;if(B&&!s){A=A.toUpperCase()}for(var w=0,x=r.length,z;w<x;w++){if((z=r[w])){while((z=z.previousSibling)&&z.nodeType!==1){}r[w]=u||z&&z.nodeName===A?z||false:z===A}}if(u){p.filter(A,r,true)}},">":function(x,u,w){var A=typeof u==="string";if(A&&!/\W/.test(u)){u=w?u:u.toUpperCase();for(var s=0,v=x.length;s<v;s++){var z=x[s];if(z){var r=z.parentNode;x[s]=r.nodeName===u?r:false}}}else{for(var s=0,v=x.length;s<v;s++){var z=x[s];if(z){x[s]=A?z.parentNode:z.parentNode===u}}if(A){p.filter(u,x,true)}}},"":function(r,u,w){var s=i++,v=a;if(!u.match(/\W/)){var x=u=w?u:u.toUpperCase();v=e}v("parentNode",u,s,r,x,w)},"~":function(r,u,w){var s=i++,v=a;if(typeof u==="string"&&!u.match(/\W/)){var x=u=w?u:u.toUpperCase();v=e}v("previousSibling",u,s,r,x,w)}},find:{ID:function(u,s,r){if(typeof s.getElementById!=="undefined"&&!r){var v=s.getElementById(u[1]);return v?[v]:[]}},NAME:function(s,x,w){if(typeof x.getElementsByName!=="undefined"){var u=[],z=x.getElementsByName(s[1]);for(var r=0,v=z.length;r<v;r++){if(z[r].getAttribute("name")===s[1]){u.push(z[r])}}return u.length===0?null:u}},TAG:function(s,r){return r.getElementsByTagName(s[1])}},preFilter:{CLASS:function(r,u,s,v,x,w){r=" "+r[1].replace(/\\/g,"")+" ";if(w){return r}for(var A=0,z;(z=u[A])!=null;A++){if(z){if(x^(z.className&&(" "+z.className+" ").indexOf(r)>=0)){if(!s){v.push(z)}}else{if(s){u[A]=false}}}}return false},ID:function(r){return r[1].replace(/\\/g,"")},TAG:function(s,u){for(var r=0;u[r]===false;r++){}return u[r]&&c(u[r])?s[1]:s[1].toUpperCase()},CHILD:function(s){if(s[1]=="nth"){var r=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(s[2]=="even"&&"2n"||s[2]=="odd"&&"2n+1"||!/\D/.test(s[2])&&"0n+"+s[2]||s[2]);s[2]=(r[1]+(r[2]||1))-0;s[3]=r[3]-0}s[0]=i++;return s},ATTR:function(z,u,s,v,x,w){var r=z[1].replace(/\\/g,"");if(!w&&l.attrMap[r]){z[1]=l.attrMap[r]}if(z[2]==="~="){z[4]=" "+z[4]+" "}return z},PSEUDO:function(x,u,s,v,w){if(x[1]==="not"){if(x[3].match(b).length>1||/^\w/.test(x[3])){x[3]=p(x[3],null,null,u)}else{var r=p.filter(x[3],u,s,true^w);if(!s){v.push.apply(v,r)}return false}}else{if(l.match.POS.test(x[0])||l.match.CHILD.test(x[0])){return true}}return x},POS:function(r){r.unshift(true);return r}},filters:{enabled:function(r){return r.disabled===false&&r.type!=="hidden"},disabled:function(r){return r.disabled===true},checked:function(r){return r.checked===true},selected:function(r){r.parentNode.selectedIndex;return r.selected===true},parent:function(r){return !!r.firstChild},empty:function(r){return !r.firstChild},has:function(r,s,u){return !!p(u[3],r).length},header:function(r){return/h\d/i.test(r.nodeName)},text:function(r){return"text"===r.type},radio:function(r){return"radio"===r.type},checkbox:function(r){return"checkbox"===r.type},file:function(r){return"file"===r.type},password:function(r){return"password"===r.type},submit:function(r){return"submit"===r.type},image:function(r){return"image"===r.type},reset:function(r){return"reset"===r.type},button:function(r){return"button"===r.type||r.nodeName.toUpperCase()==="BUTTON"},input:function(r){return/input|select|textarea|button/i.test(r.nodeName)}},setFilters:{first:function(r,s){return s===0},last:function(s,u,v,r){return u===r.length-1},even:function(r,s){return s%2===0},odd:function(r,s){return s%2===1},lt:function(r,s,u){return s<u[3]-0},gt:function(r,s,u){return s>u[3]-0},nth:function(r,s,u){return u[3]-0==s},eq:function(r,s,u){return u[3]-0==s}},filter:{PSEUDO:function(x,s,r,w){var u=s[1],A=l.filters[u];if(A){return A(x,r,s,w)}else{if(u==="contains"){return(x.textContent||x.innerText||"").indexOf(s[3])>=0}else{if(u==="not"){var z=s[3];for(var r=0,v=z.length;r<v;r++){if(z[r]===x){return false}}return true}}}},CHILD:function(A,w){var s=w[1],z=A;switch(s){case"only":case"first":while(z=z.previousSibling){if(z.nodeType===1){return false}}if(s=="first"){return true}z=A;case"last":while(z=z.nextSibling){if(z.nodeType===1){return false}}return true;case"nth":var x=w[2],B=w[3];if(x==1&&B==0){return true}var u=w[0],C=A.parentNode;if(C&&(C.sizcache!==u||!A.nodeIndex)){var v=0;for(z=C.firstChild;z;z=z.nextSibling){if(z.nodeType===1){z.nodeIndex=++v}}C.sizcache=u}var r=A.nodeIndex-B;if(x==0){return r==0}else{return(r%x==0&&r/x>=0)}}},ID:function(r,s){return r.nodeType===1&&r.getAttribute("id")===s},TAG:function(r,s){return(s==="*"&&r.nodeType===1)||r.nodeName===s},CLASS:function(r,s){return(" "+(r.className||r.getAttribute("class"))+" ").indexOf(s)>-1},ATTR:function(x,r){var s=r[1],v=l.attrHandle[s]?l.attrHandle[s](x):x[s]!=null?x[s]:x.getAttribute(s),w=v+"",z=r[2],u=r[4];return v==null?z==="!=":z==="="?w===u:z==="*="?w.indexOf(u)>=0:z==="~="?(" "+w+" ").indexOf(u)>=0:!u?w&&v!==false:z==="!="?w!=u:z==="^="?w.indexOf(u)===0:z==="$="?w.substr(w.length-u.length)===u:z==="|="?w===u||w.substr(0,u.length+1)===u+"-":false},POS:function(x,u,s,w){var v=u[2],r=l.setFilters[v];if(r){return r(x,s,u,w)}}}};var h=l.match.POS;for(var f in l.match){l.match[f]=RegExp(l.match[f].source+/(?![^\[]*\])(?![^\(]*\))/.source)}var q=function(r,s){r=Array.prototype.slice.call(r);if(s){s.push.apply(s,r);return s}return r};try{Array.prototype.slice.call(document.documentElement.childNodes)}catch(g){q=function(w,r){var u=r||[];if(n.call(w)==="[object Array]"){Array.prototype.push.apply(u,w)}else{if(typeof w.length==="number"){for(var s=0,v=w.length;s<v;s++){u.push(w[s])}}else{for(var s=0;w[s];s++){u.push(w[s])}}}return u}}var o;if(document.documentElement.compareDocumentPosition){o=function(s,u){var r=s.compareDocumentPosition(u)&4?-1:s===u?0:1;if(r===0){hasDuplicate=true}return r}}else{if("sourceIndex" in document.documentElement){o=function(s,u){var r=s.sourceIndex-u.sourceIndex;if(r===0){hasDuplicate=true}return r}}else{if(document.createRange){o=function(r,u){var s=r.ownerDocument.createRange(),v=u.ownerDocument.createRange();s.selectNode(r);s.collapse(true);v.selectNode(u);v.collapse(true);var w=s.compareBoundaryPoints(Range.START_TO_END,v);if(w===0){hasDuplicate=true}return w}}}}(function(){var s=document.createElement("form"),r="script"+(new Date).getTime();s.innerHTML="<input name='"+r+"'/>";var u=document.documentElement;u.insertBefore(s,u.firstChild);if(!!document.getElementById(r)){l.find.ID=function(z,x,w){if(typeof x.getElementById!=="undefined"&&!w){var v=x.getElementById(z[1]);return v?v.id===z[1]||typeof v.getAttributeNode!=="undefined"&&v.getAttributeNode("id").nodeValue===z[1]?[v]:ab:[]}};l.filter.ID=function(w,v){var x=typeof w.getAttributeNode!=="undefined"&&w.getAttributeNode("id");return w.nodeType===1&&x&&x.nodeValue===v}}u.removeChild(s)})();(function(){var r=document.createElement("div");r.appendChild(document.createComment(""));if(r.getElementsByTagName("*").length>0){l.find.TAG=function(v,w){var x=w.getElementsByTagName(v[1]);if(v[1]==="*"){var s=[];for(var u=0;x[u];u++){if(x[u].nodeType===1){s.push(x[u])}}x=s}return x}}r.innerHTML="<a href='#'></a>";if(r.firstChild&&typeof r.firstChild.getAttribute!=="undefined"&&r.firstChild.getAttribute("href")!=="#"){l.attrHandle.href=function(s){return s.getAttribute("href",2)}}})();if(document.querySelectorAll){(function(){var s=p,r=document.createElement("div");r.innerHTML="<p class='TEST'></p>";if(r.querySelectorAll&&r.querySelectorAll(".TEST").length===0){return}p=function(x,z,v,u){z=z||document;if(!u&&z.nodeType===9&&!c(z)){try{return q(z.querySelectorAll(x),v)}catch(w){}}return s(x,z,v,u)};p.find=s.find;p.filter=s.filter;p.selectors=s.selectors;p.matches=s.matches})()}if(document.getElementsByClassName&&document.documentElement.getElementsByClassName){(function(){var r=document.createElement("div");r.innerHTML="<div class='test e'></div><div class='test'></div>";if(r.getElementsByClassName("e").length===0){return}r.lastChild.className="e";if(r.getElementsByClassName("e").length===1){return}l.order.splice(1,0,"CLASS");l.find.CLASS=function(v,u,s){if(typeof u.getElementsByClassName!=="undefined"&&!s){return u.getElementsByClassName(v[1])}}})()}function e(z,s,u,B,r,C){var D=z=="previousSibling"&&!C;for(var w=0,x=B.length;w<x;w++){var A=B[w];if(A){if(D&&A.nodeType===1){A.sizcache=u;A.sizset=w}A=A[z];var v=false;while(A){if(A.sizcache===u){v=B[A.sizset];break}if(A.nodeType===1&&!C){A.sizcache=u;A.sizset=w}if(A.nodeName===s){v=A;break}A=A[z]}B[w]=v}}}function a(z,s,u,B,r,C){var D=z=="previousSibling"&&!C;for(var w=0,x=B.length;w<x;w++){var A=B[w];if(A){if(D&&A.nodeType===1){A.sizcache=u;A.sizset=w}A=A[z];var v=false;while(A){if(A.sizcache===u){v=B[A.sizset];break}if(A.nodeType===1){if(!C){A.sizcache=u;A.sizset=w}if(typeof s!=="string"){if(A===s){v=true;break}}else{if(p.filter(s,[A]).length>0){v=A;break}}}A=A[z]}B[w]=v}}}var j=document.compareDocumentPosition?function(r,s){return r.compareDocumentPosition(s)&16}:function(r,s){return r!==s&&(r.contains?r.contains(s):true)};var c=function(r){return r.nodeType===9&&r.documentElement.nodeName!=="HTML"||!!r.ownerDocument&&c(r.ownerDocument)};var k=function(v,x){var r=[],A="",z,s=x.nodeType?[x]:x;while((z=l.match.PSEUDO.exec(v))){A+=z[0];v=v.replace(l.match.PSEUDO,"")}v=l.relative[v]?v+"*":v;for(var w=0,u=s.length;w<u;w++){p(v,s[w],r)}return p.filter(A,r)};T.find=p;T.filter=p.filter;T.expr=p.selectors;T.expr[":"]=T.expr.filters;p.selectors.filters.hidden=function(r){return r.offsetWidth===0||r.offsetHeight===0};p.selectors.filters.visible=function(r){return r.offsetWidth>0||r.offsetHeight>0};p.selectors.filters.animated=function(r){return T.grep(T.timers,function(s){return r===s.elem}).length};T.multiFilter=function(r,u,s){if(s){r=":not("+r+")"}return p.matches(r,u)};T.dir=function(s,u){var v=[],r=s[u];while(r&&r!=document){if(r.nodeType==1){v.push(r)}r=r[u]}return v};T.nth=function(w,v,s,r){v=v||1;var u=0;for(;w;w=w[s]){if(w.nodeType==1&&++u==v){break}}return w};T.sibling=function(r,s){var u=[];for(;r;r=r.nextSibling){if(r.nodeType==1&&r!=s){u.push(r)}}return u};return;W.Sizzle=p})();T.event={add:function(c,g,e,a){if(c.nodeType==3||c.nodeType==8){return}if(c.setInterval&&c!=W){c=W}if(!e.guid){e.guid=this.guid++}if(a!==ab){var f=e;e=this.proxy(f);e.data=a}var h=T.data(c,"events")||T.data(c,"events",{}),b=T.data(c,"handle")||T.data(c,"handle",function(){return typeof T!=="undefined"&&!T.event.triggered?T.event.handle.apply(arguments.callee.elem,arguments):ab});b.elem=c;T.each(g.split(/\s+/),function(l,k){var j=k.split(".");k=j.shift();e.type=j.slice().sort().join(".");var i=h[k];if(T.event.specialAll[k]){T.event.specialAll[k].setup.call(c,a,j)}if(!i){i=h[k]={};if(!T.event.special[k]||T.event.special[k].setup.call(c,a,j)===false){if(c.addEventListener){c.addEventListener(k,b,false)}else{if(c.attachEvent){c.attachEvent("on"+k,b)}}}}i[e.guid]=e;T.event.global[k]=true});c=null},guid:1,global:{},remove:function(b,f,c){if(b.nodeType==3||b.nodeType==8){return}var g=T.data(b,"events"),h,i;if(g){if(f===ab||(typeof f==="string"&&f.charAt(0)==".")){for(var e in g){this.remove(b,e+(f||""))}}else{if(f.type){c=f.handler;f=f.type}T.each(f.split(/\s+/),function(o,l){var j=l.split(".");l=j.shift();var n=RegExp("(^|\\.)"+j.slice().sort().join(".*\\.")+"(\\.|$)");if(g[l]){if(c){delete g[l][c.guid]}else{for(var k in g[l]){if(n.test(g[l][k].type)){delete g[l][k]}}}if(T.event.specialAll[l]){T.event.specialAll[l].teardown.call(b,j)}for(h in g[l]){break}if(!h){if(!T.event.special[l]||T.event.special[l].teardown.call(b,j)===false){if(b.removeEventListener){b.removeEventListener(l,T.data(b,"handle"),false)}else{if(b.detachEvent){b.detachEvent("on"+l,T.data(b,"handle"))}}}h=null;delete g[l]}}})}for(h in g){break}if(!h){var a=T.data(b,"handle");if(a){a.elem=null}T.removeData(b,"events");T.removeData(b,"handle")}}},trigger:function(e,b,f,i){var g=e.type||e;if(!i){e=typeof e==="object"?e[aa]?e:T.extend(T.Event(g),e):T.Event(g);if(g.indexOf("!")>=0){e.type=g=g.slice(0,-1);e.exclusive=true}if(!f){e.stopPropagation();if(this.global[g]){T.each(T.cache,function(){if(this.events&&this.events[g]){T.event.trigger(e,b,this.handle.elem)}})}}if(!f||f.nodeType==3||f.nodeType==8){return ab}e.result=ab;e.target=f;b=T.makeArray(b);b.unshift(e)}e.currentTarget=f;var c=T.data(f,"handle");if(c){c.apply(f,b)}if((!f[g]||(T.nodeName(f,"a")&&g=="click"))&&f["on"+g]&&f["on"+g].apply(f,b)===false){e.result=false}if(!i&&f[g]&&!e.isDefaultPrevented()&&!(T.nodeName(f,"a")&&g=="click")){this.triggered=true;try{f[g]()}catch(a){}}this.triggered=false;if(!e.isPropagationStopped()){var h=f.parentNode||f.ownerDocument;if(h){T.event.trigger(e,b,h,true)}}},handle:function(b){var c,i;b=arguments[0]=T.event.fix(b||W.event);b.currentTarget=this;var a=b.type.split(".");b.type=a.shift();c=!a.length&&!b.exclusive;var e=RegExp("(^|\\.)"+a.slice().sort().join(".*\\.")+"(\\.|$)");i=(T.data(this,"events")||{})[b.type];for(var g in i){var f=i[g];if(c||e.test(f.type)){b.handler=f;b.data=f.data;var h=f.apply(this,arguments);if(h!==ab){b.result=h;if(h===false){b.preventDefault();b.stopPropagation()}}if(b.isImmediatePropagationStopped()){break}}}},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode metaKey newValue originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),fix:function(c){if(c[aa]){return c}var f=c;c=T.Event(f);for(var e=this.props.length,a;e;){a=this.props[--e];c[a]=f[a]}if(!c.target){c.target=c.srcElement||document}if(c.target.nodeType==3){c.target=c.target.parentNode}if(!c.relatedTarget&&c.fromElement){c.relatedTarget=c.fromElement==c.target?c.toElement:c.fromElement}if(c.pageX==null&&c.clientX!=null){var b=document.documentElement,g=document.body;c.pageX=c.clientX+(b&&b.scrollLeft||g&&g.scrollLeft||0)-(b.clientLeft||0);c.pageY=c.clientY+(b&&b.scrollTop||g&&g.scrollTop||0)-(b.clientTop||0)}if(!c.which&&((c.charCode||c.charCode===0)?c.charCode:c.keyCode)){c.which=c.charCode||c.keyCode}if(!c.metaKey&&c.ctrlKey){c.metaKey=c.ctrlKey}if(!c.which&&c.button){c.which=(c.button&1?1:(c.button&2?3:(c.button&4?2:0)))}return c},proxy:function(a,b){b=b||function(){return a.apply(this,arguments)};b.guid=a.guid=a.guid||b.guid||this.guid++;return b},special:{ready:{setup:P,teardown:function(){}}},specialAll:{live:{setup:function(b,a){T.event.add(this,a[0],af)},teardown:function(a){if(a.length){var c=0,b=RegExp("(^|\\.)"+a[0]+"(\\.|$)");T.each((T.data(this,"events").live||{}),function(){if(b.test(this.type)){c++}});if(c<1){T.event.remove(this,a[0],af)}}}}}};T.Event=function(a){if(!this.preventDefault){return new T.Event(a)}if(a&&a.type){this.originalEvent=a;this.type=a.type}else{this.type=a}this.timeStamp=ad();this[aa]=true};function X(){return false}function J(){return true}T.Event.prototype={preventDefault:function(){this.isDefaultPrevented=J;var a=this.originalEvent;if(!a){return}if(a.preventDefault){a.preventDefault()}a.returnValue=false},stopPropagation:function(){this.isPropagationStopped=J;var a=this.originalEvent;if(!a){return}if(a.stopPropagation){a.stopPropagation()}a.cancelBubble=true},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=J;this.stopPropagation()},isDefaultPrevented:X,isPropagationStopped:X,isImmediatePropagationStopped:X};var ah=function(b){var c=b.relatedTarget;while(c&&c!=this){try{c=c.parentNode}catch(a){c=this}}if(c!=this){b.type=b.data;T.event.handle.apply(this,arguments)}};T.each({mouseover:"mouseenter",mouseout:"mouseleave"},function(a,b){T.event.special[b]={setup:function(){T.event.add(this,a,ah,b)},teardown:function(){T.event.remove(this,a,ah)}}});T.fn.extend({bind:function(b,a,c){return b=="unload"?this.one(b,a,c):this.each(function(){T.event.add(this,b,c||a,c&&a)})},one:function(b,a,c){var e=T.event.proxy(c||a,function(f){T(this).unbind(f,e);return(c||a).apply(this,arguments)});return this.each(function(){T.event.add(this,b,e,c&&a)})},unbind:function(a,b){return this.each(function(){T.event.remove(this,a,b)})},trigger:function(b,a){return this.each(function(){T.event.trigger(b,a,this)})},triggerHandler:function(c,a){if(this[0]){var b=T.Event(c);b.preventDefault();b.stopPropagation();T.event.trigger(b,a,this[0]);return b.result}},toggle:function(a){var c=arguments,b=1;while(b<c.length){T.event.proxy(a,c[b++])}return this.click(T.event.proxy(a,function(e){this.lastToggle=(this.lastToggle||0)%b;e.preventDefault();return c[this.lastToggle++].apply(this,arguments)||false}))},hover:function(b,a){return this.mouseenter(b).mouseleave(a)},ready:function(a){P();if(T.isReady){a.call(document,T)}else{T.readyList.push(a)}return this},live:function(a,b){var c=T.event.proxy(b);c.guid+=this.selector+a;T(document).bind(Z(a,this.selector),this.selector,c);return this},die:function(a,b){T(document).unbind(Z(a,this.selector),b?{guid:b.guid+this.selector+a}:null);return this}});function af(a){var e=RegExp("(^|\\.)"+a.type+"(\\.|$)"),b=true,c=[];T.each(T.data(this,"events").live||[],function(h,g){if(e.test(g.type)){var f=T(a.target).closest(g.data)[0];if(f){c.push({elem:f,fn:g})}}});c.sort(function(f,g){return T.data(f.elem,"closest")-T.data(g.elem,"closest")});T.each(c,function(){if(this.fn.call(this.elem,a,this.fn.data)===false){return(b=false)}});return b}function Z(a,b){return["live",a,b.replace(/\./g,"`").replace(/ /g,"|")].join(".")}T.extend({isReady:false,readyList:[],ready:function(){if(!T.isReady){T.isReady=true;if(T.readyList){T.each(T.readyList,function(){this.call(document,T)});T.readyList=null}T(document).triggerHandler("ready")}}});var G=false;function P(){if(G){return}G=true;if(document.addEventListener){document.addEventListener("DOMContentLoaded",function(){document.removeEventListener("DOMContentLoaded",arguments.callee,false);T.ready()},false)}else{if(document.attachEvent){document.attachEvent("onreadystatechange",function(){if(document.readyState==="complete"){document.detachEvent("onreadystatechange",arguments.callee);T.ready()}});if(document.documentElement.doScroll&&W==W.top){(function(){if(T.isReady){return}try{document.documentElement.doScroll("left")}catch(a){setTimeout(arguments.callee,0);return}T.ready()})()}}}T.event.add(W,"load",T.ready)}T.each(("blur,focus,load,resize,scroll,unload,click,dblclick,mousedown,mouseup,mousemove,mouseover,mouseout,mouseenter,mouseleave,change,select,submit,keydown,keypress,keyup,error").split(","),function(a,b){T.fn[b]=function(c){return c?this.bind(b,c):this.trigger(b)}});T(W).bind("unload",function(){for(var a in T.cache){if(a!=1&&T.cache[a].handle){T.event.remove(T.cache[a].handle.elem)}}});(function(){T.support={};var g=document.documentElement,f=document.createElement("script"),a=document.createElement("div"),b="script"+(new Date).getTime();a.style.display="none";a.innerHTML='   <link/><table></table><a href="/a" style="color:red;float:left;opacity:.5;">a</a><select><option>text</option></select><object><param/></object>';var e=a.getElementsByTagName("*"),h=a.getElementsByTagName("a")[0];if(!e||!e.length||!h){return}T.support={leadingWhitespace:a.firstChild.nodeType==3,tbody:!a.getElementsByTagName("tbody").length,objectAll:!!a.getElementsByTagName("object")[0].getElementsByTagName("*").length,htmlSerialize:!!a.getElementsByTagName("link").length,style:/red/.test(h.getAttribute("style")),hrefNormalized:h.getAttribute("href")==="/a",opacity:h.style.opacity==="0.5",cssFloat:!!h.style.cssFloat,scriptEval:false,noCloneEvent:true,boxModel:null};f.type="text/javascript";try{f.appendChild(document.createTextNode("window."+b+"=1;"))}catch(c){}g.insertBefore(f,g.firstChild);if(W[b]){T.support.scriptEval=true;delete W[b]}g.removeChild(f);if(a.attachEvent&&a.fireEvent){a.attachEvent("onclick",function(){T.support.noCloneEvent=false;a.detachEvent("onclick",arguments.callee)});a.cloneNode(true).fireEvent("onclick")}T(function(){var i=document.createElement("div");i.style.width=i.style.paddingLeft="1px";document.body.appendChild(i);T.boxModel=T.support.boxModel=i.offsetWidth===2;document.body.removeChild(i).style.display="none"})})();var H=T.support.cssFloat?"cssFloat":"styleFloat";T.props={"for":"htmlFor","class":"className","float":H,cssFloat:H,styleFloat:H,readonly:"readOnly",maxlength:"maxLength",cellspacing:"cellSpacing",rowspan:"rowSpan",tabindex:"tabIndex"};T.fn.extend({_load:T.fn.load,load:function(f,b,a){if(typeof f!=="string"){return this._load(f)}var c=f.indexOf(" ");if(c>=0){var h=f.slice(c,f.length);f=f.slice(0,c)}var e="GET";if(b){if(T.isFunction(b)){a=b;b=null}else{if(typeof b==="object"){b=T.param(b);e="POST"}}}var g=this;T.ajax({url:f,type:e,dataType:"html",data:b,complete:function(j,i){if(i=="success"||i=="notmodified"){g.html(h?T("<div/>").append(j.responseText.replace(/<script(.|\s)*?\/script>/g,"")).find(h):j.responseText)}if(a){g.each(a,[j.responseText,i,j])}}});return this},serialize:function(){return T.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?T.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||/select|textarea/i.test(this.nodeName)||/text|hidden|password|search/i.test(this.type))}).map(function(c,b){var a=T(this).val();return a==null?null:T.isArray(a)?T.map(a,function(e,f){return{name:b.name,value:e}}):{name:b.name,value:a}}).get()}});T.each("ajaxStart,ajaxStop,ajaxComplete,ajaxError,ajaxSuccess,ajaxSend".split(","),function(b,a){T.fn[a]=function(c){return this.bind(a,c)}});var N=ad();T.extend({get:function(e,b,a,c){if(T.isFunction(b)){a=b;b=null}return T.ajax({type:"GET",url:e,data:b,success:a,dataType:c})},getScript:function(b,a){return T.get(b,null,a,"script")},getJSON:function(c,b,a){return T.get(c,b,a,"json")},post:function(e,b,a,c){if(T.isFunction(b)){a=b;b={}}return T.ajax({type:"POST",url:e,data:b,success:a,dataType:c})},ajaxSetup:function(a){T.extend(T.ajaxSettings,a)},ajaxSettings:{url:location.href,global:true,type:"GET",contentType:"application/x-www-form-urlencoded",processData:true,async:true,xhr:function(){return W.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest()},accepts:{xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"}},lastModified:{},ajax:function(l){l=T.extend(true,l,T.extend(true,{},T.ajaxSettings,l));var a,u=/=\?(&|$)/g,g,b,s=l.type.toUpperCase();if(l.data&&l.processData&&typeof l.data!=="string"){l.data=T.param(l.data)}if(l.dataType=="jsonp"){if(s=="GET"){if(!l.url.match(u)){l.url+=(l.url.match(/\?/)?"&":"?")+(l.jsonp||"callback")+"=?"}}else{if(!l.data||!l.data.match(u)){l.data=(l.data?l.data+"&":"")+(l.jsonp||"callback")+"=?"}}l.dataType="json"}if(l.dataType=="json"&&(l.data&&l.data.match(u)||l.url.match(u))){a="jsonp"+N++;if(l.data){l.data=(l.data+"").replace(u,"="+a+"$1")}l.url=l.url.replace(u,"="+a+"$1");l.dataType="script";W[a]=function(x){b=x;q();n();W[a]=ab;try{delete W[a]}catch(w){}if(r){r.removeChild(e)}}}if(l.dataType=="script"&&l.cache==null){l.cache=false}if(l.cache===false&&s=="GET"){var v=ad();var c=l.url.replace(/(\?|&)_=.*?(&|$)/,"$1_="+v+"$2");l.url=c+((c==l.url)?(l.url.match(/\?/)?"&":"?")+"_="+v:"")}if(l.data&&s=="GET"){l.url+=(l.url.match(/\?/)?"&":"?")+l.data;l.data=null}if(l.global&&!T.active++){T.event.trigger("ajaxStart")}var h=/^(\w+:)?\/\/([^\/?#]+)/.exec(l.url);if(l.dataType=="script"&&s=="GET"&&h&&(h[1]&&h[1]!=location.protocol||h[2]!=location.host)){var r=document.getElementsByTagName("head")[0];var e=document.createElement("script");e.src=l.url;if(l.scriptCharset){e.charset=l.scriptCharset}if(!a){var j=false;e.onload=e.onreadystatechange=function(){if(!j&&(!this.readyState||this.readyState=="loaded"||this.readyState=="complete")){j=true;q();n();e.onload=e.onreadystatechange=null;r.removeChild(e)}}}r.appendChild(e);return ab}var o=false;var p=l.xhr();if(l.username){p.open(s,l.url,l.async,l.username,l.password)}else{p.open(s,l.url,l.async)}try{if(l.data){p.setRequestHeader("Content-Type",l.contentType)}if(l.ifModified){p.setRequestHeader("If-Modified-Since",T.lastModified[l.url]||"Thu, 01 Jan 1970 00:00:00 GMT")}p.setRequestHeader("X-Requested-With","XMLHttpRequest");p.setRequestHeader("Accept",l.dataType&&l.accepts[l.dataType]?l.accepts[l.dataType]+", */*":l.accepts._default)}catch(f){}if(l.beforeSend&&l.beforeSend(p,l)===false){if(l.global&&!--T.active){T.event.trigger("ajaxStop")}p.abort();return false}if(l.global){T.event.trigger("ajaxSend",[p,l])}var k=function(z){if(p.readyState==0){if(i){clearInterval(i);i=null;if(l.global&&!--T.active){T.event.trigger("ajaxStop")}}}else{if(!o&&p&&(p.readyState==4||z=="timeout")){o=true;if(i){clearInterval(i);i=null}g=z=="timeout"?"timeout":!T.httpSuccess(p)?"error":l.ifModified&&T.httpNotModified(p,l.url)?"notmodified":"success";if(g=="success"){try{b=T.httpData(p,l.dataType,l)}catch(w){g="parsererror"}}if(g=="success"){var x;try{x=p.getResponseHeader("Last-Modified")}catch(w){}if(l.ifModified&&x){T.lastModified[l.url]=x}if(!a){q()}}else{T.handleError(l,p,g)}n();if(z){p.abort()}if(l.async){p=null}}}};if(l.async){var i=setInterval(k,13);if(l.timeout>0){setTimeout(function(){if(p&&!o){k("timeout")}},l.timeout)}}try{p.send(l.data)}catch(f){T.handleError(l,p,null,f)}if(!l.async){k()}function q(){if(l.success){l.success(b,g)}if(l.global){T.event.trigger("ajaxSuccess",[p,l])}}function n(){if(l.complete){l.complete(p,g)}if(l.global){T.event.trigger("ajaxComplete",[p,l])}if(l.global&&!--T.active){T.event.trigger("ajaxStop")}}return p},handleError:function(c,a,e,b){if(c.error){c.error(a,e,b)}if(c.global){T.event.trigger("ajaxError",[a,c,b])}},active:0,httpSuccess:function(a){try{return !a.status&&location.protocol=="file:"||(a.status>=200&&a.status<300)||a.status==304||a.status==1223}catch(b){}return false},httpNotModified:function(b,e){try{var a=b.getResponseHeader("Last-Modified");return b.status==304||a==T.lastModified[e]}catch(c){}return false},httpData:function(a,c,e){var f=a.getResponseHeader("content-type"),g=c=="xml"||!c&&f&&f.indexOf("xml")>=0,b=g?a.responseXML:a.responseText;if(g&&b.documentElement.tagName=="parsererror"){throw"parsererror"}if(e&&e.dataFilter){b=e.dataFilter(b,c)}if(typeof b==="string"){if(c=="script"){T.globalEval(b)}if(c=="json"){b=W["eval"]("("+b+")")}}return b},param:function(e){var b=[];function a(g,f){b[b.length]=encodeURIComponent(g)+"="+encodeURIComponent(f)}if(T.isArray(e)||e.jquery){T.each(e,function(){a(this.name,this.value)})}else{for(var c in e){if(T.isArray(e[c])){T.each(e[c],function(){a(c,this)})}else{a(c,T.isFunction(e[c])?e[c]():e[c])}}}return b.join("&").replace(/%20/g,"+")}});var V={},U,ae=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]];function K(b,c){var a={};T.each(ae.concat.apply([],ae.slice(0,c)),function(){a[this]=b});return a}T.fn.extend({show:function(c,a){if(c){return this.animate(K("show",3),c,a)}else{for(var f=0,h=this.length;f<h;f++){var i=T.data(this[f],"olddisplay");this[f].style.display=i||"";if(T.css(this[f],"display")==="none"){var g=this[f].tagName,b;if(V[g]){b=V[g]}else{var e=T("<"+g+" />").appendTo("body");b=e.css("display");if(b==="none"){b="block"}e.remove();V[g]=b}T.data(this[f],"olddisplay",b)}}for(var f=0,h=this.length;f<h;f++){this[f].style.display=T.data(this[f],"olddisplay")||""}return this}},hide:function(b,a){if(b){return this.animate(K("hide",3),b,a)}else{for(var c=0,e=this.length;c<e;c++){var f=T.data(this[c],"olddisplay");if(!f&&f!=="none"){T.data(this[c],"olddisplay",T.css(this[c],"display"))}}for(var c=0,e=this.length;c<e;c++){this[c].style.display="none"}return this}},_toggle:T.fn.toggle,toggle:function(a,b){var c=typeof a==="boolean";return T.isFunction(a)&&T.isFunction(b)?this._toggle.apply(this,arguments):a==null||c?this.each(function(){var e=c?a:T(this).is(":hidden");T(this)[e?"show":"hide"]()}):this.animate(K("toggle",3),a,b)},fadeTo:function(c,a,b){return this.animate({opacity:a},c,b)},animate:function(a,e,b,c){var f=T.speed(e,b,c);return this[f.queue===false?"each":"queue"](function(){var h=T.extend({},f),j,g=this.nodeType==1&&T(this).is(":hidden"),i=this;for(j in a){if(a[j]=="hide"&&g||a[j]=="show"&&!g){return h.complete.call(this)}if((j=="height"||j=="width")&&this.style){h.display=T.css(this,"display");h.overflow=this.style.overflow}}if(h.overflow!=null){this.style.overflow="hidden"}h.curAnim=T.extend({},a);T.each(a,function(q,l){var n=new T.fx(i,h,q);if(/toggle|show|hide/.test(l)){n[l=="toggle"?g?"show":"hide":l](a)}else{var o=l.toString().match(/^([+-]=)?([\d+-.]+)(.*)$/),k=n.cur(true)||0;if(o){var r=parseFloat(o[2]),p=o[3]||"px";if(p!="px"){i.style[q]=(r||1)+p;k=((r||1)/n.cur(true))*k;i.style[q]=k+p}if(o[1]){r=((o[1]=="-="?-1:1)*r)+k}n.custom(k,r,p)}else{n.custom(k,l,"")}}});return true})},stop:function(b,c){var a=T.timers;if(b){this.queue([])}this.each(function(){for(var e=a.length-1;e>=0;e--){if(a[e].elem==this){if(c){a[e](true)}a.splice(e,1)}}});if(!c){this.dequeue()}return this}});T.each({slideDown:K("show",1),slideUp:K("hide",1),slideToggle:K("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"}},function(b,a){T.fn[b]=function(e,c){return this.animate(a,e,c)}});T.extend({speed:function(b,a,c){var e=typeof b==="object"?b:{complete:c||!c&&a||T.isFunction(b)&&b,duration:b,easing:c&&a||a&&!T.isFunction(a)&&a};e.duration=T.fx.off?0:typeof e.duration==="number"?e.duration:T.fx.speeds[e.duration]||T.fx.speeds._default;e.old=e.complete;e.complete=function(){if(e.queue!==false){T(this).dequeue()}if(T.isFunction(e.old)){e.old.call(this)}};return e},easing:{linear:function(b,a,e,c){return e+c*b},swing:function(b,a,e,c){return((-Math.cos(b*Math.PI)/2)+0.5)*c+e}},timers:[],fx:function(b,c,a){this.options=c;this.elem=b;this.prop=a;if(!c.orig){c.orig={}}}});T.fx.prototype={update:function(){if(this.options.step){this.options.step.call(this.elem,this.now,this)}(T.fx.step[this.prop]||T.fx.step._default)(this);if((this.prop=="height"||this.prop=="width")&&this.elem.style){this.elem.style.display="block"}},cur:function(a){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null)){return this.elem[this.prop]}var b=parseFloat(T.css(this.elem,this.prop,a));return b&&b>-10000?b:parseFloat(T.curCSS(this.elem,this.prop))||0},custom:function(a,b,c){this.startTime=ad();this.start=a;this.end=b;this.unit=c||this.unit||"px";this.now=this.start;this.pos=this.state=0;var f=this;function e(g){return f.step(g)}e.elem=this.elem;if(e()&&T.timers.push(e)&&!U){U=setInterval(function(){var g=T.timers;for(var h=0;h<g.length;h++){if(!g[h]()){g.splice(h--,1)}}if(!g.length){clearInterval(U);U=ab}},13)}},show:function(){this.options.orig[this.prop]=T.attr(this.elem.style,this.prop);this.options.show=true;this.custom(this.prop=="width"||this.prop=="height"?1:0,this.cur());T(this.elem).show()},hide:function(){this.options.orig[this.prop]=T.attr(this.elem.style,this.prop);this.options.hide=true;this.custom(this.cur(),0)},step:function(c){var e=ad();if(c||e>=this.options.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();this.options.curAnim[this.prop]=true;var g=true;for(var f in this.options.curAnim){if(this.options.curAnim[f]!==true){g=false}}if(g){if(this.options.display!=null){this.elem.style.overflow=this.options.overflow;this.elem.style.display=this.options.display;if(T.css(this.elem,"display")=="none"){this.elem.style.display="block"}}if(this.options.hide){T(this.elem).hide()}if(this.options.hide||this.options.show){for(var b in this.options.curAnim){T.attr(this.elem.style,b,this.options.orig[b])}}this.options.complete.call(this.elem)}return false}else{var a=e-this.startTime;this.state=a/this.options.duration;this.pos=T.easing[this.options.easing||(T.easing.swing?"swing":"linear")](this.state,a,0,1,this.options.duration);this.now=this.start+((this.end-this.start)*this.pos);this.update()}return true}};T.extend(T.fx,{speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){T.attr(a.elem.style,"opacity",a.now)},_default:function(a){if(a.elem.style&&a.elem.style[a.prop]!=null){a.elem.style[a.prop]=a.now+a.unit}else{a.elem[a.prop]=a.now}}}});if(document.documentElement.getBoundingClientRect){T.fn.offset=function(){if(!this[0]){return{top:0,left:0}}if(this[0]===this[0].ownerDocument.body){return T.offset.bodyOffset(this[0])}var g=this[0].getBoundingClientRect(),c=this[0].ownerDocument,h=c.body,i=c.documentElement,a=i.clientTop||h.clientTop||0,b=i.clientLeft||h.clientLeft||0,e=g.top+(self.pageYOffset||T.boxModel&&i.scrollTop||h.scrollTop)-a,f=g.left+(self.pageXOffset||T.boxModel&&i.scrollLeft||h.scrollLeft)-b;return{top:e,left:f}}}else{T.fn.offset=function(){if(!this[0]){return{top:0,left:0}}if(this[0]===this[0].ownerDocument.body){return T.offset.bodyOffset(this[0])}T.offset.initialized||T.offset.initialize();var g=this[0],j=g.offsetParent,k=g,a=g.ownerDocument,c,i=a.documentElement,f=a.body,e=a.defaultView,l=e.getComputedStyle(g,null),b=g.offsetTop,h=g.offsetLeft;while((g=g.parentNode)&&g!==f&&g!==i){c=e.getComputedStyle(g,null);b-=g.scrollTop,h-=g.scrollLeft;if(g===j){b+=g.offsetTop,h+=g.offsetLeft;if(T.offset.doesNotAddBorder&&!(T.offset.doesAddBorderForTableAndCells&&/^t(able|d|h)$/i.test(g.tagName))){b+=parseInt(c.borderTopWidth,10)||0,h+=parseInt(c.borderLeftWidth,10)||0}k=j,j=g.offsetParent}if(T.offset.subtractsBorderForOverflowNotVisible&&c.overflow!=="visible"){b+=parseInt(c.borderTopWidth,10)||0,h+=parseInt(c.borderLeftWidth,10)||0}l=c}if(l.position==="relative"||l.position==="static"){b+=f.offsetTop,h+=f.offsetLeft}if(l.position==="fixed"){b+=Math.max(i.scrollTop,f.scrollTop),h+=Math.max(i.scrollLeft,f.scrollLeft)}return{top:b,left:h}}}T.offset={initialize:function(){if(this.initialized){return}var c=document.body,j=document.createElement("div"),h,i,a,g,b,k,f=c.style.marginTop,e='<div style="position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;"><div></div></div><table style="position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;" cellpadding="0" cellspacing="0"><tr><td></td></tr></table>';b={position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"};for(k in b){j.style[k]=b[k]}j.innerHTML=e;c.insertBefore(j,c.firstChild);h=j.firstChild,i=h.firstChild,g=h.nextSibling.firstChild.firstChild;this.doesNotAddBorder=(i.offsetTop!==5);this.doesAddBorderForTableAndCells=(g.offsetTop===5);h.style.overflow="hidden",h.style.position="relative";this.subtractsBorderForOverflowNotVisible=(i.offsetTop===-5);c.style.marginTop="1px";this.doesNotIncludeMarginInBodyOffset=(c.offsetTop===0);c.style.marginTop=f;c.removeChild(j);this.initialized=true},bodyOffset:function(c){T.offset.initialized||T.offset.initialize();var a=c.offsetTop,b=c.offsetLeft;if(T.offset.doesNotIncludeMarginInBodyOffset){a+=parseInt(T.curCSS(c,"marginTop",true),10)||0,b+=parseInt(T.curCSS(c,"marginLeft",true),10)||0}return{top:a,left:b}}};T.fn.extend({position:function(){var b=0,c=0,f;if(this[0]){var e=this.offsetParent(),a=this.offset(),g=/^body|html$/i.test(e[0].tagName)?{top:0,left:0}:e.offset();a.top-=Y(this,"marginTop");a.left-=Y(this,"marginLeft");g.top+=Y(e,"borderTopWidth");g.left+=Y(e,"borderLeftWidth");f={top:a.top-g.top,left:a.left-g.left}}return f},offsetParent:function(){var a=this[0].offsetParent||document.body;while(a&&(!/^body|html$/i.test(a.tagName)&&T.css(a,"position")=="static")){a=a.offsetParent}return T(a)}});T.each(["Left","Top"],function(b,c){var a="scroll"+c;T.fn[a]=function(e){if(!this[0]){return null}return e!==ab?this.each(function(){this==W||this==document?W.scrollTo(!b?e:T(W).scrollLeft(),b?e:T(W).scrollTop()):this[a]=e}):this[0]==W||this[0]==document?self[b?"pageYOffset":"pageXOffset"]||T.boxModel&&document.documentElement[a]||document.body[a]:this[0][a]}});T.each(["Height","Width"],function(b,e){var g=b?"Left":"Top",c=b?"Right":"Bottom",f=e.toLowerCase();T.fn["inner"+e]=function(){return this[0]?T.css(this[0],f,false,"padding"):null};T.fn["outer"+e]=function(h){return this[0]?T.css(this[0],f,false,h?"margin":"border"):null};var a=e.toLowerCase();T.fn[a]=function(h){return this[0]==W?document.compatMode=="CSS1Compat"&&document.documentElement["client"+e]||document.body["client"+e]:this[0]==document?Math.max(document.documentElement["client"+e],document.body["scroll"+e],document.documentElement["scroll"+e],document.body["offset"+e],document.documentElement["offset"+e]):h===ab?(this.length?T.css(this[0],a):null):this.css(a,typeof h==="string"?h:h+"px")}})})();jQuery.ui||(function(q){var j=q.fn.remove,p=q.browser.mozilla&&(parseFloat(q.browser.version)<1.9);q.ui={version:"1.7.2",plugin:{add:function(c,b,f){var a=q.ui[c].prototype;for(var e in f){a.plugins[e]=a.plugins[e]||[];a.plugins[e].push([b,f[e]])}},call:function(e,b,c){var f=e.plugins[b];if(!f||!e.element[0].parentNode){return}for(var a=0;a<f.length;a++){if(e.options[f[a][0]]){f[a][1].apply(e.element,c)}}}},contains:function(a,b){return document.compareDocumentPosition?a.compareDocumentPosition(b)&16:a!==b&&a.contains(b)},hasScroll:function(a,c){if(q(a).css("overflow")=="hidden"){return false}var e=(c&&c=="left")?"scrollLeft":"scrollTop",b=false;if(a[e]>0){return true}a[e]=1;b=(a[e]>0);a[e]=0;return b},isOverAxis:function(b,c,a){return(b>c)&&(b<(c+a))},isOver:function(f,c,g,a,e,b){return q.ui.isOverAxis(f,g,e)&&q.ui.isOverAxis(c,a,b)},keyCode:{BACKSPACE:8,CAPS_LOCK:20,COMMA:188,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38}};if(p){var n=q.attr,o=q.fn.removeAttr,k="http://www.w3.org/2005/07/aaa",s=/^aria-/,r=/^wairole:/;q.attr=function(c,e,b){var a=b!==undefined;return(e=="role"?(a?n.call(this,c,e,"wairole:"+b):(n.apply(this,arguments)||"").replace(r,"")):(s.test(e)?(a?c.setAttributeNS(k,e.replace(s,"aaa:"),b):n.call(this,c,e.replace(s,"aaa:"))):n.apply(this,arguments)))};q.fn.removeAttr=function(a){return(s.test(a)?this.each(function(){this.removeAttributeNS(k,a.replace(s,""))}):o.call(this,a))}}q.fn.extend({remove:function(){q("*",this).add(this).each(function(){q(this).triggerHandler("remove")});return j.apply(this,arguments)},enableSelection:function(){return this.attr("unselectable","off").css("MozUserSelect","").unbind("selectstart.ui")},disableSelection:function(){return this.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return false})},scrollParent:function(){var a;if((q.browser.msie&&(/(static|relative)/).test(this.css("position")))||(/absolute/).test(this.css("position"))){a=this.parents().filter(function(){return(/(relative|absolute|fixed)/).test(q.curCSS(this,"position",1))&&(/(auto|scroll)/).test(q.curCSS(this,"overflow",1)+q.curCSS(this,"overflow-y",1)+q.curCSS(this,"overflow-x",1))}).eq(0)}else{a=this.parents().filter(function(){return(/(auto|scroll)/).test(q.curCSS(this,"overflow",1)+q.curCSS(this,"overflow-y",1)+q.curCSS(this,"overflow-x",1))}).eq(0)}return(/fixed/).test(this.css("position"))||!a.length?q(document):a}});q.extend(q.expr[":"],{data:function(a,b,c){return !!q.data(a,c[3])},focusable:function(b){var a=b.nodeName.toLowerCase(),c=q.attr(b,"tabindex");return(/input|select|textarea|button|object/.test(a)?!b.disabled:"a"==a||"area"==a?b.href||!isNaN(c):!isNaN(c))&&!q(b)["area"==a?"parents":"closest"](":hidden").length},tabbable:function(a){var b=q.attr(a,"tabindex");return(isNaN(b)||b>=0)&&q(a).is(":focusable")}});function l(a,g,f,b){function c(h){var i=q[a][g][h]||[];return(typeof i=="string"?i.split(/,?\s+/):i)}var e=c("getter");if(b.length==1&&typeof b[0]=="string"){e=e.concat(c("getterSetter"))}return(q.inArray(f,e)!=-1)}q.widget=function(b,c){var a=b.split(".")[0];b=b.split(".")[1];q.fn[b]=function(f){var h=(typeof f=="string"),g=Array.prototype.slice.call(arguments,1);if(h&&f.substring(0,1)=="_"){return this}if(h&&l(a,b,f,g)){var e=q.data(this[0],b);return(e?e[f].apply(e,g):undefined)}return this.each(function(){var i=q.data(this,b);(!i&&!h&&q.data(this,b,new q[a][b](this,f))._init());(i&&h&&q.isFunction(i[f])&&i[f].apply(i,g))})};q[a]=q[a]||{};q[a][b]=function(f,g){var e=this;this.namespace=a;this.widgetName=b;this.widgetEventPrefix=q[a][b].eventPrefix||b;this.widgetBaseClass=a+"-"+b;this.options=q.extend({},q.widget.defaults,q[a][b].defaults,q.metadata&&q.metadata.get(f)[b],g);this.element=q(f).bind("setData."+b,function(i,u,h){if(i.target==f){return e._setData(u,h)}}).bind("getData."+b,function(h,i){if(h.target==f){return e._getData(i)}}).bind("remove",function(){return e.destroy()})};q[a][b].prototype=q.extend({},q.widget.prototype,c);q[a][b].getterSetter="option"};q.widget.prototype={_init:function(){},destroy:function(){this.element.removeData(this.widgetName).removeClass(this.widgetBaseClass+"-disabled "+this.namespace+"-state-disabled").removeAttr("aria-disabled")},option:function(b,a){var c=b,e=this;if(typeof b=="string"){if(a===undefined){return this._getData(b)}c={};c[b]=a}q.each(c,function(g,f){e._setData(g,f)})},_getData:function(a){return this.options[a]},_setData:function(b,a){this.options[b]=a;if(b=="disabled"){this.element[a?"addClass":"removeClass"](this.widgetBaseClass+"-disabled "+this.namespace+"-state-disabled").attr("aria-disabled",a)}},enable:function(){this._setData("disabled",false)},disable:function(){this._setData("disabled",true)},_trigger:function(b,a,h){var f=this.options[b],e=(b==this.widgetEventPrefix?b:this.widgetEventPrefix+b);a=q.Event(a);a.type=e;if(a.originalEvent){for(var c=q.event.props.length,g;c;){g=q.event.props[--c];a[g]=a.originalEvent[g]}}this.element.trigger(a,h);return !(q.isFunction(f)&&f.call(this.element[0],a,h)===false||a.isDefaultPrevented())}};q.widget.defaults={disabled:false};q.ui.mouse={_mouseInit:function(){var a=this;this.element.bind("mousedown."+this.widgetName,function(b){return a._mouseDown(b)}).bind("click."+this.widgetName,function(b){if(a._preventClickEvent){a._preventClickEvent=false;b.stopImmediatePropagation();return false}});if(q.browser.msie){this._mouseUnselectable=this.element.attr("unselectable");this.element.attr("unselectable","on")}this.started=false},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);(q.browser.msie&&this.element.attr("unselectable",this._mouseUnselectable))},_mouseDown:function(b){b.originalEvent=b.originalEvent||{};if(b.originalEvent.mouseHandled){return}(this._mouseStarted&&this._mouseUp(b));this._mouseDownEvent=b;var c=this,a=(b.which==1),e=(typeof this.options.cancel=="string"?q(b.target).parents().add(b.target).filter(this.options.cancel).length:false);if(!a||e||!this._mouseCapture(b)){return true}this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet){this._mouseDelayTimer=setTimeout(function(){c.mouseDelayMet=true},this.options.delay)}if(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)){this._mouseStarted=(this._mouseStart(b)!==false);if(!this._mouseStarted){b.preventDefault();return true}}this._mouseMoveDelegate=function(f){return c._mouseMove(f)};this._mouseUpDelegate=function(f){return c._mouseUp(f)};q(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);(q.browser.safari||b.preventDefault());b.originalEvent.mouseHandled=true;return true},_mouseMove:function(a){if(q.browser.msie&&!a.button){return this._mouseUp(a)}if(this._mouseStarted){this._mouseDrag(a);return a.preventDefault()}if(this._mouseDistanceMet(a)&&this._mouseDelayMet(a)){this._mouseStarted=(this._mouseStart(this._mouseDownEvent,a)!==false);(this._mouseStarted?this._mouseDrag(a):this._mouseUp(a))}return !this._mouseStarted},_mouseUp:function(a){q(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;this._preventClickEvent=(a.target==this._mouseDownEvent.target);this._mouseStop(a)}return false},_mouseDistanceMet:function(a){return(Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance)},_mouseDelayMet:function(a){return this.mouseDelayMet},_mouseStart:function(a){},_mouseDrag:function(a){},_mouseStop:function(a){},_mouseCapture:function(a){return true}};q.ui.mouse.defaults={cancel:null,distance:1,delay:0}})(jQuery);(function(b){b.widget("ui.draggable",b.extend({},b.ui.mouse,{_init:function(){if(this.options.helper=="original"&&!(/^(?:r|a|f)/).test(this.element.css("position"))){this.element[0].style.position="relative"}(this.options.addClasses&&this.element.addClass("ui-draggable"));(this.options.disabled&&this.element.addClass("ui-draggable-disabled"));this._mouseInit()},destroy:function(){if(!this.element.data("draggable")){return}this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._mouseDestroy()},_mouseCapture:function(a){var e=this.options;if(this.helper||e.disabled||b(a.target).is(".ui-resizable-handle")){return false}this.handle=this._getHandle(a);if(!this.handle){return false}return true},_mouseStart:function(a){var e=this.options;this.helper=this._createHelper(a);this._cacheHelperProportions();if(b.ui.ddmanager){b.ui.ddmanager.current=this}this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offset=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};b.extend(this.offset,{click:{left:a.pageX-this.offset.left,top:a.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this._generatePosition(a);this.originalPageX=a.pageX;this.originalPageY=a.pageY;if(e.cursorAt){this._adjustOffsetFromHelper(e.cursorAt)}if(e.containment){this._setContainment()}this._trigger("start",a);this._cacheHelperProportions();if(b.ui.ddmanager&&!e.dropBehaviour){b.ui.ddmanager.prepareOffsets(this,a)}this.helper.addClass("ui-draggable-dragging");this._mouseDrag(a,true);return true},_mouseDrag:function(a,e){this.position=this._generatePosition(a);this.positionAbs=this._convertPositionTo("absolute");if(!e){var f=this._uiHash();this._trigger("drag",a,f);this.position=f.position}if(!this.options.axis||this.options.axis!="y"){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||this.options.axis!="x"){this.helper[0].style.top=this.position.top+"px"}if(b.ui.ddmanager){b.ui.ddmanager.drag(this,a)}return false},_mouseStop:function(f){var e=false;if(b.ui.ddmanager&&!this.options.dropBehaviour){e=b.ui.ddmanager.drop(this,f)}if(this.dropped){e=this.dropped;this.dropped=false}if((this.options.revert=="invalid"&&!e)||(this.options.revert=="valid"&&e)||this.options.revert===true||(b.isFunction(this.options.revert)&&this.options.revert.call(this.element,e))){var a=this;b(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){a._trigger("stop",f);a._clear()})}else{this._trigger("stop",f);this._clear()}return false},_getHandle:function(a){var e=!this.options.handle||!b(this.options.handle,this.element).length?true:false;b(this.options.handle,this.element).find("*").andSelf().each(function(){if(this==a.target){e=true}});return e},_createHelper:function(f){var e=this.options;var a=b.isFunction(e.helper)?b(e.helper.apply(this.element[0],[f])):(e.helper=="clone"?this.element.clone():this.element);if(!a.parents("body").length){a.appendTo((e.appendTo=="parent"?this.element[0].parentNode:e.appendTo))}if(a[0]!=this.element[0]&&!(/(fixed|absolute)/).test(a.css("position"))){a.css("position","absolute")}return a},_adjustOffsetFromHelper:function(a){if(a.left!=undefined){this.offset.click.left=a.left+this.margins.left}if(a.right!=undefined){this.offset.click.left=this.helperProportions.width-a.right+this.margins.left}if(a.top!=undefined){this.offset.click.top=a.top+this.margins.top}if(a.bottom!=undefined){this.offset.click.top=this.helperProportions.height-a.bottom+this.margins.top}},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var a=this.offsetParent.offset();if(this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&b.ui.contains(this.scrollParent[0],this.offsetParent[0])){a.left+=this.scrollParent.scrollLeft();a.top+=this.scrollParent.scrollTop()}if((this.offsetParent[0]==document.body)||(this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&b.browser.msie)){a={top:0,left:0}}return{top:a.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:a.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var a=this.element.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else{return{top:0,left:0}}},_cacheMargins:function(){this.margins={left:(parseInt(this.element.css("marginLeft"),10)||0),top:(parseInt(this.element.css("marginTop"),10)||0)}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var f=this.options;if(f.containment=="parent"){f.containment=this.helper[0].parentNode}if(f.containment=="document"||f.containment=="window"){this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,b(f.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(b(f.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]}if(!(/^(document|window|parent)$/).test(f.containment)&&f.containment.constructor!=Array){var h=b(f.containment)[0];if(!h){return}var g=b(f.containment).offset();var a=(b(h).css("overflow")!="hidden");this.containment=[g.left+(parseInt(b(h).css("borderLeftWidth"),10)||0)+(parseInt(b(h).css("paddingLeft"),10)||0)-this.margins.left,g.top+(parseInt(b(h).css("borderTopWidth"),10)||0)+(parseInt(b(h).css("paddingTop"),10)||0)-this.margins.top,g.left+(a?Math.max(h.scrollWidth,h.offsetWidth):h.offsetWidth)-(parseInt(b(h).css("borderLeftWidth"),10)||0)-(parseInt(b(h).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,g.top+(a?Math.max(h.scrollHeight,h.offsetHeight):h.offsetHeight)-(parseInt(b(h).css("borderTopWidth"),10)||0)-(parseInt(b(h).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}else{if(f.containment.constructor==Array){this.containment=f.containment}}},_convertPositionTo:function(k,i){if(!i){i=this.position}var n=k=="absolute"?1:-1;var l=this.options,a=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&b.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,j=(/(html|body)/i).test(a[0].tagName);return{top:(i.top+this.offset.relative.top*n+this.offset.parent.top*n-(b.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():(j?0:a.scrollTop()))*n)),left:(i.left+this.offset.relative.left*n+this.offset.parent.left*n-(b.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():j?0:a.scrollLeft())*n))}},_generatePosition:function(o){var k=this.options,a=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&b.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,j=(/(html|body)/i).test(a[0].tagName);if(this.cssPosition=="relative"&&!(this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0])){this.offset.relative=this._getRelativeOffset()}var p=o.pageX;var q=o.pageY;if(this.originalPosition){if(this.containment){if(o.pageX-this.offset.click.left<this.containment[0]){p=this.containment[0]+this.offset.click.left}if(o.pageY-this.offset.click.top<this.containment[1]){q=this.containment[1]+this.offset.click.top}if(o.pageX-this.offset.click.left>this.containment[2]){p=this.containment[2]+this.offset.click.left}if(o.pageY-this.offset.click.top>this.containment[3]){q=this.containment[3]+this.offset.click.top}}if(k.grid){var l=this.originalPageY+Math.round((q-this.originalPageY)/k.grid[1])*k.grid[1];q=this.containment?(!(l-this.offset.click.top<this.containment[1]||l-this.offset.click.top>this.containment[3])?l:(!(l-this.offset.click.top<this.containment[1])?l-k.grid[1]:l+k.grid[1])):l;var n=this.originalPageX+Math.round((p-this.originalPageX)/k.grid[0])*k.grid[0];p=this.containment?(!(n-this.offset.click.left<this.containment[0]||n-this.offset.click.left>this.containment[2])?n:(!(n-this.offset.click.left<this.containment[0])?n-k.grid[0]:n+k.grid[0])):n}}return{top:(q-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(b.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():(j?0:a.scrollTop())))),left:(p-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(b.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():j?0:a.scrollLeft())))}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");if(this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval){this.helper.remove()}this.helper=null;this.cancelHelperRemoval=false},_trigger:function(a,f,e){e=e||this._uiHash();b.ui.plugin.call(this,a,[f,e]);if(a=="drag"){this.positionAbs=this._convertPositionTo("absolute")}return b.widget.prototype._trigger.call(this,a,f,e)},plugins:{},_uiHash:function(a){return{helper:this.helper,position:this.position,absolutePosition:this.positionAbs,offset:this.positionAbs}}}));b.extend(b.ui.draggable,{version:"1.7.2",eventPrefix:"drag",defaults:{addClasses:true,appendTo:"parent",axis:false,cancel:":input,option",connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,delay:0,distance:1,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false}});b.ui.plugin.add("draggable","connectToSortable",{start:function(j,h){var i=b(this).data("draggable"),g=i.options,a=b.extend({},h,{item:i.element});i.sortables=[];b(g.connectToSortable).each(function(){var c=b.data(this,"sortable");if(c&&!c.options.disabled){i.sortables.push({instance:c,shouldRevert:c.options.revert});c._refreshItems();c._trigger("activate",j,a)}})},stop:function(h,f){var g=b(this).data("draggable"),a=b.extend({},f,{item:g.element});b.each(g.sortables,function(){if(this.instance.isOver){this.instance.isOver=0;g.cancelHelperRemoval=true;this.instance.cancelHelperRemoval=false;if(this.shouldRevert){this.instance.options.revert=true}this.instance._mouseStop(h);this.instance.options.helper=this.instance.options._helper;if(g.options.helper=="original"){this.instance.currentItem.css({top:"auto",left:"auto"})}}else{this.instance.cancelHelperRemoval=false;this.instance._trigger("deactivate",h,a)}})},drag:function(j,g){var h=b(this).data("draggable"),a=this;var i=function(s){var e=this.offset.click.top,f=this.offset.click.left;var v=this.positionAbs.top,q=this.positionAbs.left;var r=s.height,o=s.width;var c=s.top,u=s.left;return b.ui.isOver(v+e,q+f,c,u,r,o)};b.each(h.sortables,function(c){this.instance.positionAbs=h.positionAbs;this.instance.helperProportions=h.helperProportions;this.instance.offset.click=h.offset.click;if(this.instance._intersectsWith(this.instance.containerCache)){if(!this.instance.isOver){this.instance.isOver=1;this.instance.currentItem=b(a).clone().appendTo(this.instance.element).data("sortable-item",true);this.instance.options._helper=this.instance.options.helper;this.instance.options.helper=function(){return g.helper[0]};j.target=this.instance.currentItem[0];this.instance._mouseCapture(j,true);this.instance._mouseStart(j,true,true);this.instance.offset.click.top=h.offset.click.top;this.instance.offset.click.left=h.offset.click.left;this.instance.offset.parent.left-=h.offset.parent.left-this.instance.offset.parent.left;this.instance.offset.parent.top-=h.offset.parent.top-this.instance.offset.parent.top;h._trigger("toSortable",j);h.dropped=this.instance.element;h.currentItem=h.element;this.instance.fromOutside=h}if(this.instance.currentItem){this.instance._mouseDrag(j)}}else{if(this.instance.isOver){this.instance.isOver=0;this.instance.cancelHelperRemoval=true;this.instance.options.revert=false;this.instance._trigger("out",j,this.instance._uiHash(this.instance));this.instance._mouseStop(j,true);this.instance.options.helper=this.instance.options._helper;this.instance.currentItem.remove();if(this.instance.placeholder){this.instance.placeholder.remove()}h._trigger("fromSortable",j);h.dropped=false}}})}});b.ui.plugin.add("draggable","cursor",{start:function(h,g){var a=b("body"),f=b(this).data("draggable").options;if(a.css("cursor")){f._cursor=a.css("cursor")}a.css("cursor",f.cursor)},stop:function(a,f){var e=b(this).data("draggable").options;if(e._cursor){b("body").css("cursor",e._cursor)}}});b.ui.plugin.add("draggable","iframeFix",{start:function(a,f){var e=b(this).data("draggable").options;b(e.iframeFix===true?"iframe":e.iframeFix).each(function(){b('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1000}).css(b(this).offset()).appendTo("body")})},stop:function(a,e){b("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)})}});b.ui.plugin.add("draggable","opacity",{start:function(h,g){var a=b(g.helper),f=b(this).data("draggable").options;if(a.css("opacity")){f._opacity=a.css("opacity")}a.css("opacity",f.opacity)},stop:function(a,f){var e=b(this).data("draggable").options;if(e._opacity){b(f.helper).css("opacity",e._opacity)}}});b.ui.plugin.add("draggable","scroll",{start:function(f,e){var a=b(this).data("draggable");if(a.scrollParent[0]!=document&&a.scrollParent[0].tagName!="HTML"){a.overflowOffset=a.scrollParent.offset()}},drag:function(i,h){var j=b(this).data("draggable"),g=j.options,a=false;if(j.scrollParent[0]!=document&&j.scrollParent[0].tagName!="HTML"){if(!g.axis||g.axis!="x"){if((j.overflowOffset.top+j.scrollParent[0].offsetHeight)-i.pageY<g.scrollSensitivity){j.scrollParent[0].scrollTop=a=j.scrollParent[0].scrollTop+g.scrollSpeed}else{if(i.pageY-j.overflowOffset.top<g.scrollSensitivity){j.scrollParent[0].scrollTop=a=j.scrollParent[0].scrollTop-g.scrollSpeed}}}if(!g.axis||g.axis!="y"){if((j.overflowOffset.left+j.scrollParent[0].offsetWidth)-i.pageX<g.scrollSensitivity){j.scrollParent[0].scrollLeft=a=j.scrollParent[0].scrollLeft+g.scrollSpeed}else{if(i.pageX-j.overflowOffset.left<g.scrollSensitivity){j.scrollParent[0].scrollLeft=a=j.scrollParent[0].scrollLeft-g.scrollSpeed}}}}else{if(!g.axis||g.axis!="x"){if(i.pageY-b(document).scrollTop()<g.scrollSensitivity){a=b(document).scrollTop(b(document).scrollTop()-g.scrollSpeed)}else{if(b(window).height()-(i.pageY-b(document).scrollTop())<g.scrollSensitivity){a=b(document).scrollTop(b(document).scrollTop()+g.scrollSpeed)}}}if(!g.axis||g.axis!="y"){if(i.pageX-b(document).scrollLeft()<g.scrollSensitivity){a=b(document).scrollLeft(b(document).scrollLeft()-g.scrollSpeed)}else{if(b(window).width()-(i.pageX-b(document).scrollLeft())<g.scrollSensitivity){a=b(document).scrollLeft(b(document).scrollLeft()+g.scrollSpeed)}}}}if(a!==false&&b.ui.ddmanager&&!g.dropBehaviour){b.ui.ddmanager.prepareOffsets(j,i)}}});b.ui.plugin.add("draggable","snap",{start:function(h,g){var a=b(this).data("draggable"),f=a.options;a.snapElements=[];b(f.snap.constructor!=String?(f.snap.items||":data(draggable)"):f.snap).each(function(){var c=b(this);var e=c.offset();if(this!=a.element[0]){a.snapElements.push({item:this,width:c.outerWidth(),height:c.outerHeight(),top:e.top,left:e.left})}})},drag:function(B,F){var L=b(this).data("draggable"),D=L.options;var i=D.snapTolerance;var l=F.offset.left,o=l+L.helperProportions.width,M=F.offset.top,N=M+L.helperProportions.height;for(var r=L.snapElements.length-1;r>=0;r--){var C=L.snapElements[r].left,G=C+L.snapElements[r].width,H=L.snapElements[r].top,E=H+L.snapElements[r].height;if(!((C-i<l&&l<G+i&&H-i<M&&M<E+i)||(C-i<l&&l<G+i&&H-i<N&&N<E+i)||(C-i<o&&o<G+i&&H-i<M&&M<E+i)||(C-i<o&&o<G+i&&H-i<N&&N<E+i))){if(L.snapElements[r].snapping){(L.options.snap.release&&L.options.snap.release.call(L.element,B,b.extend(L._uiHash(),{snapItem:L.snapElements[r].item})))}L.snapElements[r].snapping=false;continue}if(D.snapMode!="inner"){var O=Math.abs(H-N)<=i;var a=Math.abs(E-M)<=i;var J=Math.abs(C-o)<=i;var I=Math.abs(G-l)<=i;if(O){F.position.top=L._convertPositionTo("relative",{top:H-L.helperProportions.height,left:0}).top-L.margins.top}if(a){F.position.top=L._convertPositionTo("relative",{top:E,left:0}).top-L.margins.top}if(J){F.position.left=L._convertPositionTo("relative",{top:0,left:C-L.helperProportions.width}).left-L.margins.left}if(I){F.position.left=L._convertPositionTo("relative",{top:0,left:G}).left-L.margins.left}}var K=(O||a||J||I);if(D.snapMode!="outer"){var O=Math.abs(H-M)<=i;var a=Math.abs(E-N)<=i;var J=Math.abs(C-l)<=i;var I=Math.abs(G-o)<=i;if(O){F.position.top=L._convertPositionTo("relative",{top:H,left:0}).top-L.margins.top}if(a){F.position.top=L._convertPositionTo("relative",{top:E-L.helperProportions.height,left:0}).top-L.margins.top}if(J){F.position.left=L._convertPositionTo("relative",{top:0,left:C}).left-L.margins.left}if(I){F.position.left=L._convertPositionTo("relative",{top:0,left:G-L.helperProportions.width}).left-L.margins.left}}if(!L.snapElements[r].snapping&&(O||a||J||I||K)){(L.options.snap.snap&&L.options.snap.snap.call(L.element,B,b.extend(L._uiHash(),{snapItem:L.snapElements[r].item})))}L.snapElements[r].snapping=(O||a||J||I||K)}}});b.ui.plugin.add("draggable","stack",{start:function(a,h){var f=b(this).data("draggable").options;var g=b.makeArray(b(f.stack.group)).sort(function(c,e){return(parseInt(b(c).css("zIndex"),10)||f.stack.min)-(parseInt(b(e).css("zIndex"),10)||f.stack.min)});b(g).each(function(c){this.style.zIndex=f.stack.min+c});this[0].style.zIndex=f.stack.min+g.length}});b.ui.plugin.add("draggable","zIndex",{start:function(h,g){var a=b(g.helper),f=b(this).data("draggable").options;if(a.css("zIndex")){f._zIndex=a.css("zIndex")}a.css("zIndex",f.zIndex)},stop:function(a,f){var e=b(this).data("draggable").options;if(e._zIndex){b(f.helper).css("zIndex",e._zIndex)}}})})(jQuery);(function(b){b.widget("ui.droppable",{_init:function(){var e=this.options,a=e.accept;this.isover=0;this.isout=1;this.options.accept=this.options.accept&&b.isFunction(this.options.accept)?this.options.accept:function(c){return c.is(a)};this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};b.ui.ddmanager.droppables[this.options.scope]=b.ui.ddmanager.droppables[this.options.scope]||[];b.ui.ddmanager.droppables[this.options.scope].push(this);(this.options.addClasses&&this.element.addClass("ui-droppable"))},destroy:function(){var a=b.ui.ddmanager.droppables[this.options.scope];for(var e=0;e<a.length;e++){if(a[e]==this){a.splice(e,1)}}this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable")},_setData:function(a,e){if(a=="accept"){this.options.accept=e&&b.isFunction(e)?e:function(c){return c.is(e)}}else{b.widget.prototype._setData.apply(this,arguments)}},_activate:function(e){var a=b.ui.ddmanager.current;if(this.options.activeClass){this.element.addClass(this.options.activeClass)}(a&&this._trigger("activate",e,this.ui(a)))},_deactivate:function(e){var a=b.ui.ddmanager.current;if(this.options.activeClass){this.element.removeClass(this.options.activeClass)}(a&&this._trigger("deactivate",e,this.ui(a)))},_over:function(e){var a=b.ui.ddmanager.current;if(!a||(a.currentItem||a.element)[0]==this.element[0]){return}if(this.options.accept.call(this.element[0],(a.currentItem||a.element))){if(this.options.hoverClass){this.element.addClass(this.options.hoverClass)}this._trigger("over",e,this.ui(a))}},_out:function(e){var a=b.ui.ddmanager.current;if(!a||(a.currentItem||a.element)[0]==this.element[0]){return}if(this.options.accept.call(this.element[0],(a.currentItem||a.element))){if(this.options.hoverClass){this.element.removeClass(this.options.hoverClass)}this._trigger("out",e,this.ui(a))}},_drop:function(h,g){var a=g||b.ui.ddmanager.current;if(!a||(a.currentItem||a.element)[0]==this.element[0]){return false}var f=false;this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var c=b.data(this,"droppable");if(c.options.greedy&&b.ui.intersect(a,b.extend(c,{offset:c.element.offset()}),c.options.tolerance)){f=true;return false}});if(f){return false}if(this.options.accept.call(this.element[0],(a.currentItem||a.element))){if(this.options.activeClass){this.element.removeClass(this.options.activeClass)}if(this.options.hoverClass){this.element.removeClass(this.options.hoverClass)}this._trigger("drop",h,this.ui(a));return this.element}return false},ui:function(a){return{draggable:(a.currentItem||a.element),helper:a.helper,position:a.position,absolutePosition:a.positionAbs,offset:a.positionAbs}}});b.extend(b.ui.droppable,{version:"1.7.2",eventPrefix:"drop",defaults:{accept:"*",activeClass:false,addClasses:true,greedy:false,hoverClass:false,scope:"default",tolerance:"intersect"}});b.ui.intersect=function(a,w,r){if(!w.offset){return false}var C=(a.positionAbs||a.position.absolute).left,D=C+a.helperProportions.width,s=(a.positionAbs||a.position.absolute).top,u=s+a.helperProportions.height;var A=w.offset.left,E=A+w.proportions.width,l=w.offset.top,v=l+w.proportions.height;switch(r){case"fit":return(A<C&&D<E&&l<s&&u<v);break;case"intersect":return(A<C+(a.helperProportions.width/2)&&D-(a.helperProportions.width/2)<E&&l<s+(a.helperProportions.height/2)&&u-(a.helperProportions.height/2)<v);break;case"pointer":var z=((a.positionAbs||a.position.absolute).left+(a.clickOffset||a.offset.click).left),x=((a.positionAbs||a.position.absolute).top+(a.clickOffset||a.offset.click).top),B=b.ui.isOver(x,z,l,A,w.proportions.height,w.proportions.width);return B;break;case"touch":return((s>=l&&s<=v)||(u>=l&&u<=v)||(s<l&&u>v))&&((C>=A&&C<=E)||(D>=A&&D<=E)||(C<A&&D>E));break;default:return false;break}};b.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(l,j){var a=b.ui.ddmanager.droppables[l.options.scope];var k=j?j.type:null;var i=(l.currentItem||l.element).find(":data(droppable)").andSelf();droppablesLoop:for(var n=0;n<a.length;n++){if(a[n].options.disabled||(l&&!a[n].options.accept.call(a[n].element[0],(l.currentItem||l.element)))){continue}for(var o=0;o<i.length;o++){if(i[o]==a[n].element[0]){a[n].proportions.height=0;continue droppablesLoop}}a[n].visible=a[n].element.css("display")!="none";if(!a[n].visible){continue}a[n].offset=a[n].element.offset();a[n].proportions={width:a[n].element[0].offsetWidth,height:a[n].element[0].offsetHeight};if(k=="mousedown"){a[n]._activate.call(a[n],j)}}},drop:function(a,f){var e=false;b.each(b.ui.ddmanager.droppables[a.options.scope],function(){if(!this.options){return}if(!this.options.disabled&&this.visible&&b.ui.intersect(a,this,this.options.tolerance)){e=this._drop.call(this,f)}if(!this.options.disabled&&this.visible&&this.options.accept.call(this.element[0],(a.currentItem||a.element))){this.isout=1;this.isover=0;this._deactivate.call(this,f)}});return e},drag:function(a,e){if(a.options.refreshPositions){b.ui.ddmanager.prepareOffsets(a,e)}b.each(b.ui.ddmanager.droppables[a.options.scope],function(){if(this.options.disabled||this.greedyChild||!this.visible){return}var i=b.ui.intersect(a,this,this.options.tolerance);var c=!i&&this.isover==1?"isout":(i&&this.isover==0?"isover":null);if(!c){return}var h;if(this.options.greedy){var j=this.element.parents(":data(droppable):eq(0)");if(j.length){h=b.data(j[0],"droppable");h.greedyChild=(c=="isover"?1:0)}}if(h&&c=="isover"){h.isover=0;h.isout=1;h._out.call(h,e)}this[c]=1;this[c=="isout"?"isover":"isout"]=0;this[c=="isover"?"_over":"_out"].call(this,e);if(h&&c=="isout"){h.isout=0;h.isover=1;h._over.call(h,e)}})}}})(jQuery);(function(g){g.widget("ui.resizable",g.extend({},g.ui.mouse,{_init:function(){var n=this,b=this.options;this.element.addClass("ui-resizable");g.extend(this,{_aspectRatio:!!(b.aspectRatio),aspectRatio:b.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:b.helper||b.ghost||b.animate?b.helper||"ui-resizable-helper":null});if(this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)){if(/relative/.test(this.element.css("position"))&&g.browser.opera){this.element.css({position:"relative",top:"auto",left:"auto"})}this.element.wrap(g('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")}));this.element=this.element.parent().data("resizable",this.element.data("resizable"));this.elementIsWrapper=true;this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")});this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0});this.originalResizeStyle=this.originalElement.css("resize");this.originalElement.css("resize","none");this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"}));this.originalElement.css({margin:this.originalElement.css("margin")});this._proportionallyResize()}this.handles=b.handles||(!g(".ui-resizable-handle",this.element).length?"e,s,se":{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"});if(this.handles.constructor==String){if(this.handles=="all"){this.handles="n,e,s,w,se,sw,ne,nw"}var a=this.handles.split(",");this.handles={};for(var l=0;l<a.length;l++){var c=g.trim(a[l]),o="ui-resizable-"+c;var i=g('<div class="ui-resizable-handle '+o+'"></div>');if(/sw|se|ne|nw/.test(c)){i.css({zIndex:++b.zIndex})}if("se"==c){i.addClass("ui-icon ui-icon-gripsmall-diagonal-se")}this.handles[c]=".ui-resizable-"+c;this.element.append(i)}}this._renderAxis=function(k){k=k||this.element;for(var h in this.handles){if(this.handles[h].constructor==String){this.handles[h]=g(this.handles[h],this.element).show()}if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var r=g(this.handles[h],this.element),q=0;q=/sw|ne|nw|se|n|s/.test(h)?r.outerHeight():r.outerWidth();var j=["padding",/ne|nw|n/.test(h)?"Top":/se|sw|s/.test(h)?"Bottom":/^e$/.test(h)?"Right":"Left"].join("");k.css(j,q);this._proportionallyResize()}if(!g(this.handles[h]).length){continue}}};this._renderAxis(this.element);this._handles=g(".ui-resizable-handle",this.element).disableSelection();this._handles.mouseover(function(){if(!n.resizing){if(this.className){var h=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)}n.axis=h&&h[1]?h[1]:"se"}});if(b.autoHide){this._handles.hide();g(this.element).addClass("ui-resizable-autohide").hover(function(){g(this).removeClass("ui-resizable-autohide");n._handles.show()},function(){if(!n.resizing){g(this).addClass("ui-resizable-autohide");n._handles.hide()}})}this._mouseInit()},destroy:function(){this._mouseDestroy();var b=function(c){g(c).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){b(this.element);var a=this.element;a.parent().append(this.originalElement.css({position:a.css("position"),width:a.outerWidth(),height:a.outerHeight(),top:a.css("top"),left:a.css("left")})).end().remove()}this.originalElement.css("resize",this.originalResizeStyle);b(this.originalElement)},_mouseCapture:function(b){var a=false;for(var c in this.handles){if(g(this.handles[c])[0]==b.target){a=true}}return this.options.disabled||!!a},_mouseStart:function(l){var b=this.options,n=this.element.position(),o=this.element;this.resizing=true;this.documentScroll={top:g(document).scrollTop(),left:g(document).scrollLeft()};if(o.is(".ui-draggable")||(/absolute/).test(o.css("position"))){o.css({position:"absolute",top:n.top,left:n.left})}if(g.browser.opera&&(/relative/).test(o.css("position"))){o.css({position:"relative",top:"auto",left:"auto"})}this._renderProxy();var a=e(this.helper.css("left")),k=e(this.helper.css("top"));if(b.containment){a+=g(b.containment).scrollLeft()||0;k+=g(b.containment).scrollTop()||0}this.offset=this.helper.offset();this.position={left:a,top:k};this.size=this._helper?{width:o.outerWidth(),height:o.outerHeight()}:{width:o.width(),height:o.height()};this.originalSize=this._helper?{width:o.outerWidth(),height:o.outerHeight()}:{width:o.width(),height:o.height()};this.originalPosition={left:a,top:k};this.sizeDiff={width:o.outerWidth()-o.width(),height:o.outerHeight()-o.height()};this.originalMousePosition={left:l.pageX,top:l.pageY};this.aspectRatio=(typeof b.aspectRatio=="number")?b.aspectRatio:((this.originalSize.width/this.originalSize.height)||1);var c=g(".ui-resizable-"+this.axis).css("cursor");g("body").css("cursor",c=="auto"?this.axis+"-resize":c);o.addClass("ui-resizable-resizing");this._propagate("start",l);return true},_mouseDrag:function(B){var x=this.helper,z=this.options,r={},b=this,v=this.originalMousePosition,o=this.axis;var a=(B.pageX-v.left)||0,c=(B.pageY-v.top)||0;var w=this._change[o];if(!w){return false}var s=w.apply(this,[B,a,c]),u=g.browser.msie&&g.browser.version<7,A=this.sizeDiff;if(this._aspectRatio||B.shiftKey){s=this._updateRatio(s,B)}s=this._respectSize(s,B);this._propagate("resize",B);x.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"});if(!this._helper&&this._proportionallyResizeElements.length){this._proportionallyResize()}this._updateCache(s);this._trigger("resize",B,this.ui());return false},_mouseStop:function(q){this.resizing=false;var p=this.options,b=this;if(this._helper){var r=this._proportionallyResizeElements,u=r.length&&(/textarea/i).test(r[0].nodeName),s=u&&g.ui.hasScroll(r[0],"left")?0:b.sizeDiff.height,n=u?0:b.sizeDiff.width;var a={width:(b.size.width-n),height:(b.size.height-s)},o=(parseInt(b.element.css("left"),10)+(b.position.left-b.originalPosition.left))||null,c=(parseInt(b.element.css("top"),10)+(b.position.top-b.originalPosition.top))||null;if(!p.animate){this.element.css(g.extend(a,{top:c,left:o}))}b.helper.height(b.size.height);b.helper.width(b.size.width);if(this._helper&&!p.animate){this._proportionallyResize()}}g("body").css("cursor","auto");this.element.removeClass("ui-resizable-resizing");this._propagate("stop",q);if(this._helper){this.helper.remove()}return false},_updateCache:function(b){var a=this.options;this.offset=this.helper.offset();if(f(b.left)){this.position.left=b.left}if(f(b.top)){this.position.top=b.top}if(f(b.height)){this.size.height=b.height}if(f(b.width)){this.size.width=b.width}},_updateRatio:function(c,j){var b=this.options,a=this.position,k=this.size,l=this.axis;if(c.height){c.width=(k.height*this.aspectRatio)}else{if(c.width){c.height=(k.width/this.aspectRatio)}}if(l=="sw"){c.left=a.left+(k.width-c.width);c.top=null}if(l=="nw"){c.top=a.top+(k.height-c.height);c.left=a.left+(k.width-c.width)}return c},_respectSize:function(w,C){var z=this.helper,A=this.options,b=this._aspectRatio||C.shiftKey,c=this.axis,F=f(w.width)&&A.maxWidth&&(A.maxWidth<w.width),v=f(w.height)&&A.maxHeight&&(A.maxHeight<w.height),B=f(w.width)&&A.minWidth&&(A.minWidth>w.width),a=f(w.height)&&A.minHeight&&(A.minHeight>w.height);if(B){w.width=A.minWidth}if(a){w.height=A.minHeight}if(F){w.width=A.maxWidth}if(v){w.height=A.maxHeight}var D=this.originalPosition.left+this.originalSize.width,o=this.position.top+this.size.height;var x=/sw|nw|w/.test(c),E=/nw|ne|n/.test(c);if(B&&x){w.left=D-A.minWidth}if(F&&x){w.left=D-A.maxWidth}if(a&&E){w.top=o-A.minHeight}if(v&&E){w.top=o-A.maxHeight}var u=!w.width&&!w.height;if(u&&!w.left&&w.top){w.top=null}else{if(u&&!w.top&&w.left){w.left=null}}return w},_proportionallyResize:function(){var a=this.options;if(!this._proportionallyResizeElements.length){return}var i=this.helper||this.element;for(var k=0;k<this._proportionallyResizeElements.length;k++){var c=this._proportionallyResizeElements[k];if(!this.borderDif){var l=[c.css("borderTopWidth"),c.css("borderRightWidth"),c.css("borderBottomWidth"),c.css("borderLeftWidth")],b=[c.css("paddingTop"),c.css("paddingRight"),c.css("paddingBottom"),c.css("paddingLeft")];this.borderDif=g.map(l,function(o,h){var j=parseInt(o,10)||0,p=parseInt(b[h],10)||0;return j+p})}if(g.browser.msie&&!(!(g(i).is(":hidden")||g(i).parents(":hidden").length))){continue}c.css({height:(i.height()-this.borderDif[0]-this.borderDif[2])||0,width:(i.width()-this.borderDif[1]-this.borderDif[3])||0})}},_renderProxy:function(){var i=this.element,a=this.options;this.elementOffset=i.offset();if(this._helper){this.helper=this.helper||g('<div style="overflow:hidden;"></div>');var j=g.browser.msie&&g.browser.version<7,c=(j?1:0),b=(j?2:-1);this.helper.addClass(this._helper).css({width:this.element.outerWidth()+b,height:this.element.outerHeight()+b,position:"absolute",left:this.elementOffset.left-c+"px",top:this.elementOffset.top-c+"px",zIndex:++a.zIndex});this.helper.appendTo("body").disableSelection()}else{this.helper=this.element}},_change:{e:function(a,b,c){return{width:this.originalSize.width+b}},w:function(c,k,l){var a=this.options,j=this.originalSize,b=this.originalPosition;return{left:b.left+k,width:j.width-k}},n:function(c,k,l){var a=this.options,j=this.originalSize,b=this.originalPosition;return{top:b.top+l,height:j.height-l}},s:function(a,b,c){return{height:this.originalSize.height+c}},se:function(a,b,c){return g.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[a,b,c]))},sw:function(a,b,c){return g.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[a,b,c]))},ne:function(a,b,c){return g.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[a,b,c]))},nw:function(a,b,c){return g.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[a,b,c]))}},_propagate:function(a,b){g.ui.plugin.call(this,a,[b,this.ui()]);(a!="resize"&&this._trigger(a,b,this.ui()))},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}));g.extend(g.ui.resizable,{version:"1.7.2",eventPrefix:"resize",defaults:{alsoResize:false,animate:false,animateDuration:"slow",animateEasing:"swing",aspectRatio:false,autoHide:false,cancel:":input,option",containment:false,delay:0,distance:1,ghost:false,grid:false,handles:"e,s,se",helper:false,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1000}});g.ui.plugin.add("resizable","alsoResize",{start:function(c,b){var h=g(this).data("resizable"),a=h.options;_store=function(i){g(i).each(function(){g(this).data("resizable-alsoresize",{width:parseInt(g(this).width(),10),height:parseInt(g(this).height(),10),left:parseInt(g(this).css("left"),10),top:parseInt(g(this).css("top"),10)})})};if(typeof(a.alsoResize)=="object"&&!a.alsoResize.parentNode){if(a.alsoResize.length){a.alsoResize=a.alsoResize[0];_store(a.alsoResize)}else{g.each(a.alsoResize,function(k,j){_store(k)})}}else{_store(a.alsoResize)}},resize:function(o,l){var p=g(this).data("resizable"),c=p.options,n=p.originalSize,a=p.originalPosition;var b={height:(p.size.height-n.height)||0,width:(p.size.width-n.width)||0,top:(p.position.top-a.top)||0,left:(p.position.left-a.left)||0},q=function(i,h){g(i).each(function(){var k=g(this),j=g(this).data("resizable-alsoresize"),r={},s=h&&h.length?h:["width","height","top","left"];g.each(s||["width","height","top","left"],function(w,u){var v=(j[u]||0)+(b[u]||0);if(v&&v>=0){r[u]=v||null}});if(/relative/.test(k.css("position"))&&g.browser.opera){p._revertToRelativePosition=true;k.css({position:"absolute",top:"auto",left:"auto"})}k.css(r)})};if(typeof(c.alsoResize)=="object"&&!c.alsoResize.nodeType){g.each(c.alsoResize,function(i,h){q(i,h)})}else{q(c.alsoResize)}},stop:function(b,a){var c=g(this).data("resizable");if(c._revertToRelativePosition&&g.browser.opera){c._revertToRelativePosition=false;el.css({position:"relative"})}g(this).removeData("resizable-alsoresize-start")}});g.ui.plugin.add("resizable","animate",{stop:function(r,b){var a=g(this).data("resizable"),q=a.options;var s=a._proportionallyResizeElements,w=s.length&&(/textarea/i).test(s[0].nodeName),v=w&&g.ui.hasScroll(s[0],"left")?0:a.sizeDiff.height,o=w?0:a.sizeDiff.width;var u={width:(a.size.width-o),height:(a.size.height-v)},p=(parseInt(a.element.css("left"),10)+(a.position.left-a.originalPosition.left))||null,c=(parseInt(a.element.css("top"),10)+(a.position.top-a.originalPosition.top))||null;a.element.animate(g.extend(u,c&&p?{top:c,left:p}:{}),{duration:q.animateDuration,easing:q.animateEasing,step:function(){var h={width:parseInt(a.element.css("width"),10),height:parseInt(a.element.css("height"),10),top:parseInt(a.element.css("top"),10),left:parseInt(a.element.css("left"),10)};if(s&&s.length){g(s[0]).css({width:h.width,height:h.height})}a._updateCache(h);a._propagate("resize",r)}})}});g.ui.plugin.add("resizable","containment",{start:function(B,b){var D=g(this).data("resizable"),w=D.options,u=D.element;var A=w.containment,v=(A instanceof g)?A.get(0):(/parent/.test(A))?u.parent().get(0):A;if(!v){return}D.containerElement=g(v);if(/document/.test(A)||A==document){D.containerOffset={left:0,top:0};D.containerPosition={left:0,top:0};D.parentData={element:g(document),left:0,top:0,width:g(document).width(),height:g(document).height()||document.body.parentNode.scrollHeight}}else{var o=g(v),x=[];g(["Top","Right","Left","Bottom"]).each(function(h,i){x[h]=e(o.css("padding"+i))});D.containerOffset=o.offset();D.containerPosition=o.position();D.containerSize={height:(o.innerHeight()-x[3]),width:(o.innerWidth()-x[1])};var c=D.containerOffset,C=D.containerSize.height,p=D.containerSize.width,z=(g.ui.hasScroll(v,"left")?v.scrollWidth:p),a=(g.ui.hasScroll(v)?v.scrollHeight:C);D.parentData={element:v,left:c.left,top:c.top,width:z,height:a}}},resize:function(C,c){var F=g(this).data("resizable"),A=F.options,D=F.containerSize,o=F.containerOffset,v=F.size,u=F.position,b=F._aspectRatio||C.shiftKey,E={top:0,left:0},B=F.containerElement;if(B[0]!=document&&(/static/).test(B.css("position"))){E=o}if(u.left<(F._helper?o.left:0)){F.size.width=F.size.width+(F._helper?(F.position.left-o.left):(F.position.left-E.left));if(b){F.size.height=F.size.width/A.aspectRatio}F.position.left=A.helper?o.left:0}if(u.top<(F._helper?o.top:0)){F.size.height=F.size.height+(F._helper?(F.position.top-o.top):F.position.top);if(b){F.size.width=F.size.height*A.aspectRatio}F.position.top=F._helper?o.top:0}F.offset.left=F.parentData.left+F.position.left;F.offset.top=F.parentData.top+F.position.top;var w=Math.abs((F._helper?F.offset.left-E.left:(F.offset.left-E.left))+F.sizeDiff.width),a=Math.abs((F._helper?F.offset.top-E.top:(F.offset.top-o.top))+F.sizeDiff.height);var x=F.containerElement.get(0)==F.element.parent().get(0),z=/relative|absolute/.test(F.containerElement.css("position"));if(x&&z){w-=F.parentData.left}if(w+F.size.width>=F.parentData.width){F.size.width=F.parentData.width-w;if(b){F.size.height=F.size.width/F.aspectRatio}}if(a+F.size.height>=F.parentData.height){F.size.height=F.parentData.height-a;if(b){F.size.width=F.size.height*F.aspectRatio}}},stop:function(x,h){var b=g(this).data("resizable"),w=b.options,r=b.position,o=b.containerOffset,z=b.containerPosition,v=b.containerElement;var u=g(b.helper),a=u.offset(),c=u.outerWidth()-b.sizeDiff.width,s=u.outerHeight()-b.sizeDiff.height;if(b._helper&&!w.animate&&(/relative/).test(v.css("position"))){g(this).css({left:a.left-z.left-o.left,width:c,height:s})}if(b._helper&&!w.animate&&(/static/).test(v.css("position"))){g(this).css({left:a.left-z.left-o.left,width:c,height:s})}}});g.ui.plugin.add("resizable","ghost",{start:function(c,b){var j=g(this).data("resizable"),a=j.options,i=j.size;j.ghost=j.originalElement.clone();j.ghost.css({opacity:0.25,display:"block",position:"relative",height:i.height,width:i.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof a.ghost=="string"?a.ghost:"");j.ghost.appendTo(j.helper)},resize:function(c,b){var h=g(this).data("resizable"),a=h.options;if(h.ghost){h.ghost.css({position:"relative",height:h.size.height,width:h.size.width})}},stop:function(c,b){var h=g(this).data("resizable"),a=h.options;if(h.ghost&&h.helper){h.helper.get(0).removeChild(h.ghost.get(0))}}});g.ui.plugin.add("resizable","grid",{resize:function(w,c){var a=g(this).data("resizable"),s=a.options,p=a.size,r=a.originalSize,q=a.originalPosition,b=a.axis,o=s._aspectRatio||w.shiftKey;s.grid=typeof s.grid=="number"?[s.grid,s.grid]:s.grid;var u=Math.round((p.width-r.width)/(s.grid[0]||1))*(s.grid[0]||1),v=Math.round((p.height-r.height)/(s.grid[1]||1))*(s.grid[1]||1);if(/^(se|s|e)$/.test(b)){a.size.width=r.width+u;a.size.height=r.height+v}else{if(/^(ne)$/.test(b)){a.size.width=r.width+u;a.size.height=r.height+v;a.position.top=q.top-v}else{if(/^(sw)$/.test(b)){a.size.width=r.width+u;a.size.height=r.height+v;a.position.left=q.left-u}else{a.size.width=r.width+u;a.size.height=r.height+v;a.position.top=q.top-v;a.position.left=q.left-u}}}}});var e=function(a){return parseInt(a,10)||0};var f=function(a){return !isNaN(parseInt(a,10))}})(jQuery);(function(b){b.widget("ui.selectable",b.extend({},b.ui.mouse,{_init:function(){var a=this;this.element.addClass("ui-selectable");this.dragged=false;var e;this.refresh=function(){e=b(a.options.filter,a.element[0]);e.each(function(){var f=b(this);var c=f.offset();b.data(this,"selectable-item",{element:this,$element:f,left:c.left,top:c.top,right:c.left+f.outerWidth(),bottom:c.top+f.outerHeight(),startselected:false,selected:f.hasClass("ui-selected"),selecting:f.hasClass("ui-selecting"),unselecting:f.hasClass("ui-unselecting")})})};this.refresh();this.selectees=e.addClass("ui-selectee");this._mouseInit();this.helper=b(document.createElement("div")).css({border:"1px dotted black"}).addClass("ui-selectable-helper")},destroy:function(){this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable");this._mouseDestroy()},_mouseStart:function(e){var a=this;this.opos=[e.pageX,e.pageY];if(this.options.disabled){return}var f=this.options;this.selectees=b(f.filter,this.element[0]);this._trigger("start",e);b(f.appendTo).append(this.helper);this.helper.css({"z-index":100,position:"absolute",left:e.clientX,top:e.clientY,width:0,height:0});if(f.autoRefresh){this.refresh()}this.selectees.filter(".ui-selected").each(function(){var c=b.data(this,"selectable-item");c.startselected=true;if(!e.metaKey){c.$element.removeClass("ui-selected");c.selected=false;c.$element.addClass("ui-unselecting");c.unselecting=true;a._trigger("unselecting",e,{unselecting:c.element})}});b(e.target).parents().andSelf().each(function(){var c=b.data(this,"selectable-item");if(c){c.$element.removeClass("ui-unselecting").addClass("ui-selecting");c.unselecting=false;c.selecting=true;c.selected=true;a._trigger("selecting",e,{selecting:c.element});return false}})},_mouseDrag:function(j){var q=this;this.dragged=true;if(this.options.disabled){return}var o=this.options;var p=this.opos[0],k=this.opos[1],a=j.pageX,l=j.pageY;if(p>a){var n=a;a=p;p=n}if(k>l){var n=l;l=k;k=n}this.helper.css({left:p,top:k,width:a-p,height:l-k});this.selectees.each(function(){var e=b.data(this,"selectable-item");if(!e||e.element==q.element[0]){return}var c=false;if(o.tolerance=="touch"){c=(!(e.left>a||e.right<p||e.top>l||e.bottom<k))}else{if(o.tolerance=="fit"){c=(e.left>p&&e.right<a&&e.top>k&&e.bottom<l)}}if(c){if(e.selected){e.$element.removeClass("ui-selected");e.selected=false}if(e.unselecting){e.$element.removeClass("ui-unselecting");e.unselecting=false}if(!e.selecting){e.$element.addClass("ui-selecting");e.selecting=true;q._trigger("selecting",j,{selecting:e.element})}}else{if(e.selecting){if(j.metaKey&&e.startselected){e.$element.removeClass("ui-selecting");e.selecting=false;e.$element.addClass("ui-selected");e.selected=true}else{e.$element.removeClass("ui-selecting");e.selecting=false;if(e.startselected){e.$element.addClass("ui-unselecting");e.unselecting=true}q._trigger("unselecting",j,{unselecting:e.element})}}if(e.selected){if(!j.metaKey&&!e.startselected){e.$element.removeClass("ui-selected");e.selected=false;e.$element.addClass("ui-unselecting");e.unselecting=true;q._trigger("unselecting",j,{unselecting:e.element})}}}});return false},_mouseStop:function(e){var a=this;this.dragged=false;var f=this.options;b(".ui-unselecting",this.element[0]).each(function(){var c=b.data(this,"selectable-item");c.$element.removeClass("ui-unselecting");c.unselecting=false;c.startselected=false;a._trigger("unselected",e,{unselected:c.element})});b(".ui-selecting",this.element[0]).each(function(){var c=b.data(this,"selectable-item");c.$element.removeClass("ui-selecting").addClass("ui-selected");c.selecting=false;c.selected=true;c.startselected=true;a._trigger("selected",e,{selected:c.element})});this._trigger("stop",e);this.helper.remove();return false}}));b.extend(b.ui.selectable,{version:"1.7.2",defaults:{appendTo:"body",autoRefresh:true,cancel:":input,option",delay:0,distance:0,filter:"*",tolerance:"touch"}})})(jQuery);(function(b){b.widget("ui.sortable",b.extend({},b.ui.mouse,{_init:function(){var a=this.options;this.containerCache={};this.element.addClass("ui-sortable");this.refresh();this.floating=this.items.length?(/left|right/).test(this.items[0].item.css("float")):false;this.offset=this.element.offset();this._mouseInit()},destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").removeData("sortable").unbind(".sortable");this._mouseDestroy();for(var a=this.items.length-1;a>=0;a--){this.items[a].item.removeData("sortable-item")}},_mouseCapture:function(j,i){if(this.reverting){return false}if(this.options.disabled||this.options.type=="static"){return false}this._refreshItems(j);var k=null,l=this,a=b(j.target).parents().each(function(){if(b.data(this,"sortable-item")==l){k=b(this);return false}});if(b.data(j.target,"sortable-item")==l){k=b(j.target)}if(!k){return false}if(this.options.handle&&!i){var h=false;b(this.options.handle,k).find("*").andSelf().each(function(){if(this==j.target){h=true}});if(!h){return false}}this.currentItem=k;this._removeCurrentsFromItems();return true},_mouseStart:function(j,i,a){var h=this.options,l=this;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(j);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");b.extend(this.offset,{click:{left:j.pageX-this.offset.left,top:j.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this._generatePosition(j);this.originalPageX=j.pageX;this.originalPageY=j.pageY;if(h.cursorAt){this._adjustOffsetFromHelper(h.cursorAt)}this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};if(this.helper[0]!=this.currentItem[0]){this.currentItem.hide()}this._createPlaceholder();if(h.containment){this._setContainment()}if(h.cursor){if(b("body").css("cursor")){this._storedCursor=b("body").css("cursor")}b("body").css("cursor",h.cursor)}if(h.opacity){if(this.helper.css("opacity")){this._storedOpacity=this.helper.css("opacity")}this.helper.css("opacity",h.opacity)}if(h.zIndex){if(this.helper.css("zIndex")){this._storedZIndex=this.helper.css("zIndex")}this.helper.css("zIndex",h.zIndex)}if(this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"){this.overflowOffset=this.scrollParent.offset()}this._trigger("start",j,this._uiHash());if(!this._preserveHelperProportions){this._cacheHelperProportions()}if(!a){for(var k=this.containers.length-1;k>=0;k--){this.containers[k]._trigger("activate",j,l._uiHash(this))}}if(b.ui.ddmanager){b.ui.ddmanager.current=this}if(b.ui.ddmanager&&!h.dropBehaviour){b.ui.ddmanager.prepareOffsets(this,j)}this.dragging=true;this.helper.addClass("ui-sortable-helper");this._mouseDrag(j);return true},_mouseDrag:function(k){this.position=this._generatePosition(k);this.positionAbs=this._convertPositionTo("absolute");if(!this.lastPositionAbs){this.lastPositionAbs=this.positionAbs}if(this.options.scroll){var j=this.options,a=false;if(this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"){if((this.overflowOffset.top+this.scrollParent[0].offsetHeight)-k.pageY<j.scrollSensitivity){this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop+j.scrollSpeed}else{if(k.pageY-this.overflowOffset.top<j.scrollSensitivity){this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop-j.scrollSpeed}}if((this.overflowOffset.left+this.scrollParent[0].offsetWidth)-k.pageX<j.scrollSensitivity){this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft+j.scrollSpeed}else{if(k.pageX-this.overflowOffset.left<j.scrollSensitivity){this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft-j.scrollSpeed}}}else{if(k.pageY-b(document).scrollTop()<j.scrollSensitivity){a=b(document).scrollTop(b(document).scrollTop()-j.scrollSpeed)}else{if(b(window).height()-(k.pageY-b(document).scrollTop())<j.scrollSensitivity){a=b(document).scrollTop(b(document).scrollTop()+j.scrollSpeed)}}if(k.pageX-b(document).scrollLeft()<j.scrollSensitivity){a=b(document).scrollLeft(b(document).scrollLeft()-j.scrollSpeed)}else{if(b(window).width()-(k.pageX-b(document).scrollLeft())<j.scrollSensitivity){a=b(document).scrollLeft(b(document).scrollLeft()+j.scrollSpeed)}}}if(a!==false&&b.ui.ddmanager&&!j.dropBehaviour){b.ui.ddmanager.prepareOffsets(this,k)}}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y"){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||this.options.axis!="x"){this.helper[0].style.top=this.position.top+"px"}for(var n=this.items.length-1;n>=0;n--){var l=this.items[n],o=l.item[0],i=this._intersectsWithPointer(l);if(!i){continue}if(o!=this.currentItem[0]&&this.placeholder[i==1?"next":"prev"]()[0]!=o&&!b.ui.contains(this.placeholder[0],o)&&(this.options.type=="semi-dynamic"?!b.ui.contains(this.element[0],o):true)){this.direction=i==1?"down":"up";if(this.options.tolerance=="pointer"||this._intersectsWithSides(l)){this._rearrange(k,l)}else{break}this._trigger("change",k,this._uiHash());break}}this._contactContainers(k);if(b.ui.ddmanager){b.ui.ddmanager.drag(this,k)}this._trigger("sort",k,this._uiHash());this.lastPositionAbs=this.positionAbs;return false},_mouseStop:function(h,g){if(!h){return}if(b.ui.ddmanager&&!this.options.dropBehaviour){b.ui.ddmanager.drop(this,h)}if(this.options.revert){var a=this;var f=a.placeholder.offset();a.reverting=true;b(this.helper).animate({left:f.left-this.offset.parent.left-a.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:f.top-this.offset.parent.top-a.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){a._clear(h)})}else{this._clear(h,g)}return false},cancel:function(){var a=this;if(this.dragging){this._mouseUp();if(this.options.helper=="original"){this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else{this.currentItem.show()}for(var e=this.containers.length-1;e>=0;e--){this.containers[e]._trigger("deactivate",null,a._uiHash(this));if(this.containers[e].containerCache.over){this.containers[e]._trigger("out",null,a._uiHash(this));this.containers[e].containerCache.over=0}}}if(this.placeholder[0].parentNode){this.placeholder[0].parentNode.removeChild(this.placeholder[0])}if(this.options.helper!="original"&&this.helper&&this.helper[0].parentNode){this.helper.remove()}b.extend(this,{helper:null,dragging:false,reverting:false,_noFinalSort:null});if(this.domPosition.prev){b(this.domPosition.prev).after(this.currentItem)}else{b(this.domPosition.parent).prepend(this.currentItem)}return true},serialize:function(e){var a=this._getItemsAsjQuery(e&&e.connected);var f=[];e=e||{};b(a).each(function(){var c=(b(e.item||this).attr(e.attribute||"id")||"").match(e.expression||(/(.+)[-=_](.+)/));if(c){f.push((e.key||c[1]+"[]")+"="+(e.key&&e.expression?c[1]:c[2]))}});return f.join("&")},toArray:function(e){var a=this._getItemsAsjQuery(e&&e.connected);var f=[];e=e||{};a.each(function(){f.push(b(e.item||this).attr(e.attribute||"id")||"")});return f},_intersectsWith:function(p){var x=this.positionAbs.left,z=x+this.helperProportions.width,q=this.positionAbs.top,r=q+this.helperProportions.height;var w=p.left,A=w+p.width,l=p.top,s=l+p.height;var a=this.offset.click.top,u=this.offset.click.left;var v=(q+a)>l&&(q+a)<s&&(x+u)>w&&(x+u)<A;if(this.options.tolerance=="pointer"||this.options.forcePointerForContainers||(this.options.tolerance!="pointer"&&this.helperProportions[this.floating?"width":"height"]>p[this.floating?"width":"height"])){return v}else{return(w<x+(this.helperProportions.width/2)&&z-(this.helperProportions.width/2)<A&&l<q+(this.helperProportions.height/2)&&r-(this.helperProportions.height/2)<s)}},_intersectsWithPointer:function(k){var j=b.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,k.top,k.height),l=b.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,k.left,k.width),h=j&&l,a=this._getDragVerticalDirection(),i=this._getDragHorizontalDirection();if(!h){return false}return this.floating?(((i&&i=="right")||a=="down")?2:1):(a&&(a=="down"?2:1))},_intersectsWithSides:function(h){var j=b.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,h.top+(h.height/2),h.height),i=b.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,h.left+(h.width/2),h.width),a=this._getDragVerticalDirection(),g=this._getDragHorizontalDirection();if(this.floating&&g){return((g=="right"&&i)||(g=="left"&&!i))}else{return a&&((a=="down"&&j)||(a=="up"&&!j))}},_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return a!=0&&(a>0?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return a!=0&&(a>0?"right":"left")},refresh:function(a){this._refreshItems(a);this.refreshPositions()},_connectWith:function(){var a=this.options;return a.connectWith.constructor==String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(s){var a=this;var n=[];var p=[];var j=this._connectWith();if(j&&s){for(var q=j.length-1;q>=0;q--){var i=b(j[q]);for(var r=i.length-1;r>=0;r--){var o=b.data(i[r],"sortable");if(o&&o!=this&&!o.options.disabled){p.push([b.isFunction(o.options.items)?o.options.items.call(o.element):b(o.options.items,o.element).not(".ui-sortable-helper"),o])}}}}p.push([b.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):b(this.options.items,this.element).not(".ui-sortable-helper"),this]);for(var q=p.length-1;q>=0;q--){p[q][0].each(function(){n.push(this)})}return b(n)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data(sortable-item)");for(var f=0;f<this.items.length;f++){for(var a=0;a<e.length;a++){if(e[a]==this.items[f].item[0]){this.items.splice(f,1)}}}},_refreshItems:function(B){this.items=[];this.containers=[this];var u=this.items;var a=this;var w=[[b.isFunction(this.options.items)?this.options.items.call(this.element[0],B,{item:this.currentItem}):b(this.options.items,this.element),this]];var r=this._connectWith();if(r){for(var x=r.length-1;x>=0;x--){var q=b(r[x]);for(var z=q.length-1;z>=0;z--){var v=b.data(q[z],"sortable");if(v&&v!=this&&!v.options.disabled){w.push([b.isFunction(v.options.items)?v.options.items.call(v.element[0],B,{item:this.currentItem}):b(v.options.items,v.element),v]);this.containers.push(v)}}}}for(var x=w.length-1;x>=0;x--){var s=w[x][1];var A=w[x][0];for(var z=0,j=A.length;z<j;z++){var i=b(A[z]);i.data("sortable-item",s);u.push({item:i,instance:s,width:0,height:0,left:0,top:0})}}},refreshPositions:function(a){if(this.offsetParent&&this.helper){this.offset.parent=this._getParentOffset()}for(var i=this.items.length-1;i>=0;i--){var h=this.items[i];if(h.instance!=this.currentContainer&&this.currentContainer&&h.item[0]!=this.currentItem[0]){continue}var j=this.options.toleranceElement?b(this.options.toleranceElement,h.item):h.item;if(!a){h.width=j.outerWidth();h.height=j.outerHeight()}var g=j.offset();h.left=g.left;h.top=g.top}if(this.options.custom&&this.options.custom.refreshContainers){this.options.custom.refreshContainers.call(this)}else{for(var i=this.containers.length-1;i>=0;i--){var g=this.containers[i].element.offset();this.containers[i].containerCache.left=g.left;this.containers[i].containerCache.top=g.top;this.containers[i].containerCache.width=this.containers[i].element.outerWidth();this.containers[i].containerCache.height=this.containers[i].element.outerHeight()}}},_createPlaceholder:function(g){var a=g||this,f=a.options;if(!f.placeholder||f.placeholder.constructor==String){var h=f.placeholder;f.placeholder={element:function(){var c=b(document.createElement(a.currentItem[0].nodeName)).addClass(h||a.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];if(!h){c.style.visibility="hidden"}return c},update:function(e,c){if(h&&!f.forcePlaceholderSize){return}if(!c.height()){c.height(a.currentItem.innerHeight()-parseInt(a.currentItem.css("paddingTop")||0,10)-parseInt(a.currentItem.css("paddingBottom")||0,10))}if(!c.width()){c.width(a.currentItem.innerWidth()-parseInt(a.currentItem.css("paddingLeft")||0,10)-parseInt(a.currentItem.css("paddingRight")||0,10))}}}}a.placeholder=b(f.placeholder.element.call(a.element,a.currentItem));a.currentItem.after(a.placeholder);f.placeholder.update(a,a.placeholder)},_contactContainers:function(n){for(var o=this.containers.length-1;o>=0;o--){if(this._intersectsWith(this.containers[o].containerCache)){if(!this.containers[o].containerCache.over){if(this.currentContainer!=this.containers[o]){var i=10000;var j=null;var l=this.positionAbs[this.containers[o].floating?"left":"top"];for(var a=this.items.length-1;a>=0;a--){if(!b.ui.contains(this.containers[o].element[0],this.items[a].item[0])){continue}var k=this.items[a][this.containers[o].floating?"left":"top"];if(Math.abs(k-l)<i){i=Math.abs(k-l);j=this.items[a]}}if(!j&&!this.options.dropOnEmpty){continue}this.currentContainer=this.containers[o];j?this._rearrange(n,j,null,true):this._rearrange(n,null,this.containers[o].element,true);this._trigger("change",n,this._uiHash());this.containers[o]._trigger("change",n,this._uiHash(this));this.options.placeholder.update(this.currentContainer,this.placeholder)}this.containers[o]._trigger("over",n,this._uiHash(this));this.containers[o].containerCache.over=1}}else{if(this.containers[o].containerCache.over){this.containers[o]._trigger("out",n,this._uiHash(this));this.containers[o].containerCache.over=0}}}},_createHelper:function(f){var e=this.options;var a=b.isFunction(e.helper)?b(e.helper.apply(this.element[0],[f,this.currentItem])):(e.helper=="clone"?this.currentItem.clone():this.currentItem);if(!a.parents("body").length){b(e.appendTo!="parent"?e.appendTo:this.currentItem[0].parentNode)[0].appendChild(a[0])}if(a[0]==this.currentItem[0]){this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}}if(a[0].style.width==""||e.forceHelperSize){a.width(this.currentItem.width())}if(a[0].style.height==""||e.forceHelperSize){a.height(this.currentItem.height())}return a},_adjustOffsetFromHelper:function(a){if(a.left!=undefined){this.offset.click.left=a.left+this.margins.left}if(a.right!=undefined){this.offset.click.left=this.helperProportions.width-a.right+this.margins.left}if(a.top!=undefined){this.offset.click.top=a.top+this.margins.top}if(a.bottom!=undefined){this.offset.click.top=this.helperProportions.height-a.bottom+this.margins.top}},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var a=this.offsetParent.offset();if(this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&b.ui.contains(this.scrollParent[0],this.offsetParent[0])){a.left+=this.scrollParent.scrollLeft();a.top+=this.scrollParent.scrollTop()}if((this.offsetParent[0]==document.body)||(this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&b.browser.msie)){a={top:0,left:0}}return{top:a.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:a.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else{return{top:0,left:0}}},_cacheMargins:function(){this.margins={left:(parseInt(this.currentItem.css("marginLeft"),10)||0),top:(parseInt(this.currentItem.css("marginTop"),10)||0)}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var f=this.options;if(f.containment=="parent"){f.containment=this.helper[0].parentNode}if(f.containment=="document"||f.containment=="window"){this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,b(f.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(b(f.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]}if(!(/^(document|window|parent)$/).test(f.containment)){var h=b(f.containment)[0];var g=b(f.containment).offset();var a=(b(h).css("overflow")!="hidden");this.containment=[g.left+(parseInt(b(h).css("borderLeftWidth"),10)||0)+(parseInt(b(h).css("paddingLeft"),10)||0)-this.margins.left,g.top+(parseInt(b(h).css("borderTopWidth"),10)||0)+(parseInt(b(h).css("paddingTop"),10)||0)-this.margins.top,g.left+(a?Math.max(h.scrollWidth,h.offsetWidth):h.offsetWidth)-(parseInt(b(h).css("borderLeftWidth"),10)||0)-(parseInt(b(h).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,g.top+(a?Math.max(h.scrollHeight,h.offsetHeight):h.offsetHeight)-(parseInt(b(h).css("borderTopWidth"),10)||0)-(parseInt(b(h).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(k,i){if(!i){i=this.position}var n=k=="absolute"?1:-1;var l=this.options,a=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&b.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,j=(/(html|body)/i).test(a[0].tagName);return{top:(i.top+this.offset.relative.top*n+this.offset.parent.top*n-(b.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():(j?0:a.scrollTop()))*n)),left:(i.left+this.offset.relative.left*n+this.offset.parent.left*n-(b.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():j?0:a.scrollLeft())*n))}},_generatePosition:function(o){var k=this.options,a=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&b.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,j=(/(html|body)/i).test(a[0].tagName);if(this.cssPosition=="relative"&&!(this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0])){this.offset.relative=this._getRelativeOffset()}var p=o.pageX;var q=o.pageY;if(this.originalPosition){if(this.containment){if(o.pageX-this.offset.click.left<this.containment[0]){p=this.containment[0]+this.offset.click.left}if(o.pageY-this.offset.click.top<this.containment[1]){q=this.containment[1]+this.offset.click.top}if(o.pageX-this.offset.click.left>this.containment[2]){p=this.containment[2]+this.offset.click.left}if(o.pageY-this.offset.click.top>this.containment[3]){q=this.containment[3]+this.offset.click.top}}if(k.grid){var l=this.originalPageY+Math.round((q-this.originalPageY)/k.grid[1])*k.grid[1];q=this.containment?(!(l-this.offset.click.top<this.containment[1]||l-this.offset.click.top>this.containment[3])?l:(!(l-this.offset.click.top<this.containment[1])?l-k.grid[1]:l+k.grid[1])):l;var n=this.originalPageX+Math.round((p-this.originalPageX)/k.grid[0])*k.grid[0];p=this.containment?(!(n-this.offset.click.left<this.containment[0]||n-this.offset.click.left>this.containment[2])?n:(!(n-this.offset.click.left<this.containment[0])?n-k.grid[0]:n+k.grid[0])):n}}return{top:(q-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(b.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():(j?0:a.scrollTop())))),left:(p-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(b.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():j?0:a.scrollLeft())))}},_rearrange:function(h,i,l,j){l?l[0].appendChild(this.placeholder[0]):i.item[0].parentNode.insertBefore(this.placeholder[0],(this.direction=="down"?i.item[0]:i.item[0].nextSibling));this.counter=this.counter?++this.counter:1;var k=this,a=this.counter;window.setTimeout(function(){if(a==k.counter){k.refreshPositions(!j)}},0)},_clear:function(i,h){this.reverting=false;var g=[],a=this;if(!this._noFinalSort&&this.currentItem[0].parentNode){this.placeholder.before(this.currentItem)}this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var j in this._storedCSS){if(this._storedCSS[j]=="auto"||this._storedCSS[j]=="static"){this._storedCSS[j]=""}}this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else{this.currentItem.show()}if(this.fromOutside&&!h){g.push(function(c){this._trigger("receive",c,this._uiHash(this.fromOutside))})}if((this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!h){g.push(function(c){this._trigger("update",c,this._uiHash())})}if(!b.ui.contains(this.element[0],this.currentItem[0])){if(!h){g.push(function(c){this._trigger("remove",c,this._uiHash())})}for(var j=this.containers.length-1;j>=0;j--){if(b.ui.contains(this.containers[j].element[0],this.currentItem[0])&&!h){g.push((function(c){return function(e){c._trigger("receive",e,this._uiHash(this))}}).call(this,this.containers[j]));g.push((function(c){return function(e){c._trigger("update",e,this._uiHash(this))}}).call(this,this.containers[j]))}}}for(var j=this.containers.length-1;j>=0;j--){if(!h){g.push((function(c){return function(e){c._trigger("deactivate",e,this._uiHash(this))}}).call(this,this.containers[j]))}if(this.containers[j].containerCache.over){g.push((function(c){return function(e){c._trigger("out",e,this._uiHash(this))}}).call(this,this.containers[j]));this.containers[j].containerCache.over=0}}if(this._storedCursor){b("body").css("cursor",this._storedCursor)}if(this._storedOpacity){this.helper.css("opacity",this._storedOpacity)}if(this._storedZIndex){this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex)}this.dragging=false;if(this.cancelHelperRemoval){if(!h){this._trigger("beforeStop",i,this._uiHash());for(var j=0;j<g.length;j++){g[j].call(this,i)}this._trigger("stop",i,this._uiHash())}return false}if(!h){this._trigger("beforeStop",i,this._uiHash())}this.placeholder[0].parentNode.removeChild(this.placeholder[0]);if(this.helper[0]!=this.currentItem[0]){this.helper.remove()}this.helper=null;if(!h){for(var j=0;j<g.length;j++){g[j].call(this,i)}this._trigger("stop",i,this._uiHash())}this.fromOutside=false;return true},_trigger:function(){if(b.widget.prototype._trigger.apply(this,arguments)===false){this.cancel()}},_uiHash:function(e){var a=e||this;return{helper:a.helper,placeholder:a.placeholder||b([]),position:a.position,absolutePosition:a.positionAbs,offset:a.positionAbs,item:a.currentItem,sender:e?e.element:null}}}));b.extend(b.ui.sortable,{getter:"serialize toArray",version:"1.7.2",eventPrefix:"sort",defaults:{appendTo:"parent",axis:false,cancel:":input,option",connectWith:false,containment:false,cursor:"auto",cursorAt:false,delay:0,distance:1,dropOnEmpty:true,forcePlaceholderSize:false,forceHelperSize:false,grid:false,handle:false,helper:"original",items:"> *",opacity:false,placeholder:false,revert:false,scroll:true,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1000}})})(jQuery);(function(b){b.widget("ui.accordion",{_init:function(){var e=this.options,a=this;this.running=0;if(e.collapsible==b.ui.accordion.defaults.collapsible&&e.alwaysOpen!=b.ui.accordion.defaults.alwaysOpen){e.collapsible=!e.alwaysOpen}if(e.navigation){var f=this.element.find("a").filter(e.navigationFilter);if(f.length){if(f.filter(e.header).length){this.active=f}else{this.active=f.parent().parent().prev();f.addClass("ui-accordion-content-active")}}}this.element.addClass("ui-accordion ui-widget ui-helper-reset");if(this.element[0].nodeName=="UL"){this.element.children("li").addClass("ui-accordion-li-fix")}this.headers=this.element.find(e.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all").bind("mouseenter.accordion",function(){b(this).addClass("ui-state-hover")}).bind("mouseleave.accordion",function(){b(this).removeClass("ui-state-hover")}).bind("focus.accordion",function(){b(this).addClass("ui-state-focus")}).bind("blur.accordion",function(){b(this).removeClass("ui-state-focus")});this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom");this.active=this._findActive(this.active||e.active).toggleClass("ui-state-default").toggleClass("ui-state-active").toggleClass("ui-corner-all").toggleClass("ui-corner-top");this.active.next().addClass("ui-accordion-content-active");b("<span/>").addClass("ui-icon "+e.icons.header).prependTo(this.headers);this.active.find(".ui-icon").toggleClass(e.icons.header).toggleClass(e.icons.headerSelected);if(b.browser.msie){this.element.find("a").css("zoom","1")}this.resize();this.element.attr("role","tablist");this.headers.attr("role","tab").bind("keydown",function(c){return a._keydown(c)}).next().attr("role","tabpanel");this.headers.not(this.active||"").attr("aria-expanded","false").attr("tabIndex","-1").next().hide();if(!this.active.length){this.headers.eq(0).attr("tabIndex","0")}else{this.active.attr("aria-expanded","true").attr("tabIndex","0")}if(!b.browser.safari){this.headers.find("a").attr("tabIndex","-1")}if(e.event){this.headers.bind((e.event)+".accordion",function(c){return a._clickHandler.call(a,c,this)})}},destroy:function(){var e=this.options;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role").unbind(".accordion").removeData("accordion");this.headers.unbind(".accordion").removeClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("tabindex");this.headers.find("a").removeAttr("tabindex");this.headers.children(".ui-icon").remove();var a=this.headers.next().css("display","").removeAttr("role").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active");if(e.autoHeight||e.fillHeight){a.css("height","")}},_setData:function(a,e){if(a=="alwaysOpen"){a="collapsible";e=!e}b.widget.prototype._setData.apply(this,arguments)},_keydown:function(j){var h=this.options,i=b.ui.keyCode;if(h.disabled||j.altKey||j.ctrlKey){return}var k=this.headers.length;var a=this.headers.index(j.target);var l=false;switch(j.keyCode){case i.RIGHT:case i.DOWN:l=this.headers[(a+1)%k];break;case i.LEFT:case i.UP:l=this.headers[(a-1+k)%k];break;case i.SPACE:case i.ENTER:return this._clickHandler({target:j.target},j.target)}if(l){b(j.target).attr("tabIndex","-1");b(l).attr("tabIndex","0");l.focus();return false}return true},resize:function(){var f=this.options,g;if(f.fillSpace){if(b.browser.msie){var a=this.element.parent().css("overflow");this.element.parent().css("overflow","hidden")}g=this.element.parent().height();if(b.browser.msie){this.element.parent().css("overflow",a)}this.headers.each(function(){g-=b(this).outerHeight()});var h=0;this.headers.next().each(function(){h=Math.max(h,b(this).innerHeight()-b(this).height())}).height(Math.max(0,g-h)).css("overflow","auto")}else{if(f.autoHeight){g=0;this.headers.next().each(function(){g=Math.max(g,b(this).outerHeight())}).height(g)}}},activate:function(a){var e=this._findActive(a)[0];this._clickHandler({target:e},e)},_findActive:function(a){return a?typeof a=="number"?this.headers.filter(":eq("+a+")"):this.headers.not(this.headers.not(a)):a===false?b([]):this.headers.filter(":eq(0)")},_clickHandler:function(s,o){var q=this.options;if(q.disabled){return false}if(!s.target&&q.collapsible){this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").find(".ui-icon").removeClass(q.icons.headerSelected).addClass(q.icons.header);this.active.next().addClass("ui-accordion-content-active");var l=this.active.next(),p={options:q,newHeader:b([]),oldHeader:q.active,newContent:b([]),oldContent:l},r=(this.active=b([]));this._toggle(r,l,p);return false}var n=b(s.currentTarget||o);var k=n[0]==this.active[0];if(this.running||(!q.collapsible&&k)){return false}this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").find(".ui-icon").removeClass(q.icons.headerSelected).addClass(q.icons.header);this.active.next().addClass("ui-accordion-content-active");if(!k){n.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").find(".ui-icon").removeClass(q.icons.header).addClass(q.icons.headerSelected);n.next().addClass("ui-accordion-content-active")}var r=n.next(),l=this.active.next(),p={options:q,newHeader:k&&q.collapsible?b([]):n,oldHeader:this.active,newContent:k&&q.collapsible?b([]):r.find("> *"),oldContent:l.find("> *")},a=this.headers.index(this.active[0])>this.headers.index(n[0]);this.active=k?b([]):n;this._toggle(r,l,p,k,a);return false},_toggle:function(z,q,s,p,o){var w=this.options,a=this;this.toShow=z;this.toHide=q;this.data=s;var x=function(){if(!a){return}return a._completed.apply(a,arguments)};this._trigger("changestart",null,this.data);this.running=q.size()===0?z.size():q.size();if(w.animated){var u={};if(w.collapsible&&p){u={toShow:b([]),toHide:q,complete:x,down:o,autoHeight:w.autoHeight||w.fillSpace}}else{u={toShow:z,toHide:q,complete:x,down:o,autoHeight:w.autoHeight||w.fillSpace}}if(!w.proxied){w.proxied=w.animated}if(!w.proxiedDuration){w.proxiedDuration=w.duration}w.animated=b.isFunction(w.proxied)?w.proxied(u):w.proxied;w.duration=b.isFunction(w.proxiedDuration)?w.proxiedDuration(u):w.proxiedDuration;var n=b.ui.accordion.animations,v=w.duration,r=w.animated;if(!n[r]){n[r]=function(c){this.slide(c,{easing:r,duration:v||700})}}n[r](u)}else{if(w.collapsible&&p){z.toggle()}else{q.hide();z.show()}x(true)}q.prev().attr("aria-expanded","false").attr("tabIndex","-1").blur();z.prev().attr("aria-expanded","true").attr("tabIndex","0").focus()},_completed:function(a){var e=this.options;this.running=a?0:--this.running;if(this.running){return}if(e.clearStyle){this.toShow.add(this.toHide).css({height:"",overflow:""})}this._trigger("change",null,this.data)}});b.extend(b.ui.accordion,{version:"1.7.2",defaults:{active:null,alwaysOpen:true,animated:"slide",autoHeight:true,clearStyle:false,collapsible:false,event:"click",fillSpace:false,header:"> li > :first-child,> :not(li):even",icons:{header:"ui-icon-triangle-1-e",headerSelected:"ui-icon-triangle-1-s"},navigation:false,navigationFilter:function(){return this.href.toLowerCase()==location.href.toLowerCase()}},animations:{slide:function(a,l){a=b.extend({easing:"swing",duration:300},a,l);if(!a.toHide.size()){a.toShow.animate({height:"show"},a);return}if(!a.toShow.size()){a.toHide.animate({height:"hide"},a);return}var r=a.toShow.css("overflow"),n,q={},o={},p=["height","paddingTop","paddingBottom"],s;var k=a.toShow;s=k[0].style.width;k.width(parseInt(k.parent().width(),10)-parseInt(k.css("paddingLeft"),10)-parseInt(k.css("paddingRight"),10)-(parseInt(k.css("borderLeftWidth"),10)||0)-(parseInt(k.css("borderRightWidth"),10)||0));b.each(p,function(f,c){o[c]="hide";var e=(""+b.css(a.toShow[0],c)).match(/^([\d+-.]+)(.*)$/);q[c]={value:e[1],unit:e[2]||"px"}});a.toShow.css({height:0,overflow:"hidden"}).show();a.toHide.filter(":hidden").each(a.complete).end().filter(":visible").animate(o,{step:function(e,c){if(c.prop=="height"){n=(c.now-c.start)/(c.end-c.start)}a.toShow[0].style[c.prop]=(n*q[c.prop].value)+q[c.prop].unit},duration:a.duration,easing:a.easing,complete:function(){if(!a.autoHeight){a.toShow.css("height","")}a.toShow.css("width",s);a.toShow.css({overflow:r});a.complete()}})},bounceslide:function(a){this.slide(a,{easing:a.down?"easeOutBounce":"swing",duration:a.down?1000:200})},easeslide:function(a){this.slide(a,{easing:"easeinout",duration:700})}}})})(jQuery);(function(g){var e={dragStart:"start.draggable",drag:"drag.draggable",dragStop:"stop.draggable",maxHeight:"maxHeight.resizable",minHeight:"minHeight.resizable",maxWidth:"maxWidth.resizable",minWidth:"minWidth.resizable",resizeStart:"start.resizable",resize:"drag.resizable",resizeStop:"stop.resizable"},f="ui-dialog ui-widget ui-widget-content ui-corner-all ";g.widget("ui.dialog",{_init:function(){this.originalTitle=this.element.attr("title");var b=this,a=this.options,n=a.title||this.originalTitle||"&nbsp;",s=g.ui.dialog.getTitleId(this.element),c=(this.uiDialog=g("<div/>")).appendTo(document.body).hide().addClass(f+a.dialogClass).css({position:"absolute",overflow:"hidden",zIndex:a.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(h){(a.closeOnEscape&&h.keyCode&&h.keyCode==g.ui.keyCode.ESCAPE&&b.close(h))}).attr({role:"dialog","aria-labelledby":s}).mousedown(function(h){b.moveToTop(false,h)}),q=this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(c),r=(this.uiDialogTitlebar=g("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(c),o=g('<a href="#"/>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){o.addClass("ui-state-hover")},function(){o.removeClass("ui-state-hover")}).focus(function(){o.addClass("ui-state-focus")}).blur(function(){o.removeClass("ui-state-focus")}).mousedown(function(h){h.stopPropagation()}).click(function(h){b.close(h);return false}).appendTo(r),p=(this.uiDialogTitlebarCloseText=g("<span/>")).addClass("ui-icon ui-icon-closethick").text(a.closeText).appendTo(o),u=g("<span/>").addClass("ui-dialog-title").attr("id",s).html(n).prependTo(r);r.find("*").add(r).disableSelection();(a.draggable&&g.fn.draggable&&this._makeDraggable());(a.resizable&&g.fn.resizable&&this._makeResizable());this._createButtons(a.buttons);this._isOpen=false;(a.bgiframe&&g.fn.bgiframe&&c.bgiframe());(a.autoOpen&&this.open())},destroy:function(){(this.overlay&&this.overlay.destroy());this.uiDialog.hide();this.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body");this.uiDialog.remove();(this.originalTitle&&this.element.attr("title",this.originalTitle))},close:function(a){var c=this;if(false===c._trigger("beforeclose",a)){return}(c.overlay&&c.overlay.destroy());c.uiDialog.unbind("keypress.ui-dialog");(c.options.hide?c.uiDialog.hide(c.options.hide,function(){c._trigger("close",a)}):c.uiDialog.hide()&&c._trigger("close",a));g.ui.dialog.overlay.resize();c._isOpen=false;if(c.options.modal){var b=0;g(".ui-dialog").each(function(){if(this!=c.uiDialog[0]){b=Math.max(b,g(this).css("z-index"))}});g.ui.dialog.maxZ=b}},isOpen:function(){return this._isOpen},moveToTop:function(a,b){if((this.options.modal&&!a)||(!this.options.stack&&!this.options.modal)){return this._trigger("focus",b)}if(this.options.zIndex>g.ui.dialog.maxZ){g.ui.dialog.maxZ=this.options.zIndex}(this.overlay&&this.overlay.$el.css("z-index",g.ui.dialog.overlay.maxZ=++g.ui.dialog.maxZ));var c={scrollTop:this.element.attr("scrollTop"),scrollLeft:this.element.attr("scrollLeft")};this.uiDialog.css("z-index",++g.ui.dialog.maxZ);this.element.attr(c);this._trigger("focus",b)},open:function(){if(this._isOpen){return}var a=this.options,b=this.uiDialog;this.overlay=a.modal?new g.ui.dialog.overlay(this):null;(b.next().length&&b.appendTo("body"));this._size();this._position(a.position);b.show(a.show);this.moveToTop(true);(a.modal&&b.bind("keypress.ui-dialog",function(j){if(j.keyCode!=g.ui.keyCode.TAB){return}var k=g(":tabbable",this),c=k.filter(":first")[0],l=k.filter(":last")[0];if(j.target==l&&!j.shiftKey){setTimeout(function(){c.focus()},1)}else{if(j.target==c&&j.shiftKey){setTimeout(function(){l.focus()},1)}}}));g([]).add(b.find(".ui-dialog-content :tabbable:first")).add(b.find(".ui-dialog-buttonpane :tabbable:first")).add(b).filter(":first").focus();this._trigger("open");this._isOpen=true},_createButtons:function(a){var b=this,h=false,c=g("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix");this.uiDialog.find(".ui-dialog-buttonpane").remove();(typeof a=="object"&&a!==null&&g.each(a,function(){return !(h=true)}));if(h){g.each(a,function(k,j){g('<button type="button"></button>').addClass("ui-state-default ui-corner-all").text(k).click(function(){j.apply(b.element[0],arguments)}).hover(function(){g(this).addClass("ui-state-hover")},function(){g(this).removeClass("ui-state-hover")}).focus(function(){g(this).addClass("ui-state-focus")}).blur(function(){g(this).removeClass("ui-state-focus")}).appendTo(c)});c.appendTo(this.uiDialog)}},_makeDraggable:function(){var c=this,a=this.options,b;this.uiDialog.draggable({cancel:".ui-dialog-content",handle:".ui-dialog-titlebar",containment:"document",start:function(){b=a.height;g(this).height(g(this).height()).addClass("ui-dialog-dragging");(a.dragStart&&a.dragStart.apply(c.element[0],arguments))},drag:function(){(a.drag&&a.drag.apply(c.element[0],arguments))},stop:function(){g(this).removeClass("ui-dialog-dragging").height(b);(a.dragStop&&a.dragStop.apply(c.element[0],arguments));g.ui.dialog.overlay.resize()}})},_makeResizable:function(a){a=(a===undefined?this.options.resizable:a);var h=this,b=this.options,c=typeof a=="string"?a:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",alsoResize:this.element,maxWidth:b.maxWidth,maxHeight:b.maxHeight,minWidth:b.minWidth,minHeight:b.minHeight,start:function(){g(this).addClass("ui-dialog-resizing");(b.resizeStart&&b.resizeStart.apply(h.element[0],arguments))},resize:function(){(b.resize&&b.resize.apply(h.element[0],arguments))},handles:c,stop:function(){g(this).removeClass("ui-dialog-resizing");b.height=g(this).height();b.width=g(this).width();(b.resizeStop&&b.resizeStop.apply(h.element[0],arguments));g.ui.dialog.overlay.resize()}}).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_position:function(a){var k=g(window),j=g(document),c=j.scrollTop(),l=j.scrollLeft(),b=c;if(g.inArray(a,["center","top","right","bottom","left"])>=0){a=[a=="right"||a=="left"?a:"center",a=="top"||a=="bottom"?a:"middle"]}if(a.constructor!=Array){a=["center","middle"]}if(a[0].constructor==Number){l+=a[0]}else{switch(a[0]){case"left":l+=0;break;case"right":l+=k.width()-this.uiDialog.outerWidth();break;default:case"center":l+=(k.width()-this.uiDialog.outerWidth())/2}}if(a[1].constructor==Number){c+=a[1]}else{switch(a[1]){case"top":c+=0;break;case"bottom":c+=k.height()-this.uiDialog.outerHeight();break;default:case"middle":c+=(k.height()-this.uiDialog.outerHeight())/2}}c=Math.max(c,b);this.uiDialog.css({top:c,left:l})},_setData:function(c,b){(e[c]&&this.uiDialog.data(e[c],b));switch(c){case"buttons":this._createButtons(b);break;case"closeText":this.uiDialogTitlebarCloseText.text(b);break;case"dialogClass":this.uiDialog.removeClass(this.options.dialogClass).addClass(f+b);break;case"draggable":(b?this._makeDraggable():this.uiDialog.draggable("destroy"));break;case"height":this.uiDialog.height(b);break;case"position":this._position(b);break;case"resizable":var h=this.uiDialog,a=this.uiDialog.is(":data(resizable)");(a&&!b&&h.resizable("destroy"));(a&&typeof b=="string"&&h.resizable("option","handles",b));(a||this._makeResizable(b));break;case"title":g(".ui-dialog-title",this.uiDialogTitlebar).html(b||"&nbsp;");break;case"width":this.uiDialog.width(b);break}g.widget.prototype._setData.apply(this,arguments)},_size:function(){var a=this.options;this.element.css({height:0,minHeight:0,width:"auto"});var b=this.uiDialog.css({height:"auto",width:a.width}).height();this.element.css({minHeight:Math.max(a.minHeight-b,0),height:a.height=="auto"?"auto":Math.max(a.height-b,0)})}});g.extend(g.ui.dialog,{version:"1.7.2",defaults:{autoOpen:true,bgiframe:false,buttons:{},closeOnEscape:true,closeText:"close",dialogClass:"",draggable:true,hide:null,height:"auto",maxHeight:false,maxWidth:false,minHeight:150,minWidth:150,modal:false,position:"center",resizable:true,show:null,stack:true,title:"",width:300,zIndex:1000},getter:"isOpen",uuid:0,maxZ:0,getTitleId:function(a){return"ui-dialog-title-"+(a.attr("id")||++this.uuid)},overlay:function(a){this.$el=g.ui.dialog.overlay.create(a)}});g.extend(g.ui.dialog.overlay,{instances:[],maxZ:0,events:g.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(a){return a+".dialog-overlay"}).join(" "),create:function(a){if(this.instances.length===0){setTimeout(function(){if(g.ui.dialog.overlay.instances.length){g(document).bind(g.ui.dialog.overlay.events,function(h){var c=g(h.target).parents(".ui-dialog").css("zIndex")||0;return(c>g.ui.dialog.overlay.maxZ)})}},1);g(document).bind("keydown.dialog-overlay",function(c){(a.options.closeOnEscape&&c.keyCode&&c.keyCode==g.ui.keyCode.ESCAPE&&a.close(c))});g(window).bind("resize.dialog-overlay",g.ui.dialog.overlay.resize)}var b=g("<div></div>").appendTo(document.body).addClass("ui-widget-overlay").css({width:this.width(),height:this.height()});(a.options.bgiframe&&g.fn.bgiframe&&b.bgiframe());this.instances.push(b);return b},destroy:function(b){this.instances.splice(g.inArray(this.instances,b),1);if(this.instances.length===0){g([document,window]).unbind(".dialog-overlay")}b.remove();var a=0;g.each(this.instances,function(){a=Math.max(a,this.css("z-index"))});this.maxZ=a},height:function(){if(g.browser.msie&&g.browser.version<7){var a=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight);var b=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight);if(a<b){return g(window).height()+"px"}else{return a+"px"}}else{return g(document).height()+"px"}},width:function(){if(g.browser.msie&&g.browser.version<7){var b=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth);var a=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth);if(b<a){return g(window).width()+"px"}else{return b+"px"}}else{return g(document).width()+"px"}},resize:function(){var a=g([]);g.each(g.ui.dialog.overlay.instances,function(){a=a.add(this)});a.css({width:0,height:0}).css({width:g.ui.dialog.overlay.width(),height:g.ui.dialog.overlay.height()})}});g.extend(g.ui.dialog.overlay.prototype,{destroy:function(){g.ui.dialog.overlay.destroy(this.$el)}})})(jQuery);(function(b){b.widget("ui.slider",b.extend({},b.ui.mouse,{_init:function(){var a=this,e=this.options;this._keySliding=false;this._handleIndex=null;this._detectOrientation();this._mouseInit();this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all");this.range=b([]);if(e.range){if(e.range===true){this.range=b("<div></div>");if(!e.values){e.values=[this._valueMin(),this._valueMin()]}if(e.values.length&&e.values.length!=2){e.values=[e.values[0],e.values[0]]}}else{this.range=b("<div></div>")}this.range.appendTo(this.element).addClass("ui-slider-range");if(e.range=="min"||e.range=="max"){this.range.addClass("ui-slider-range-"+e.range)}this.range.addClass("ui-widget-header")}if(b(".ui-slider-handle",this.element).length==0){b('<a href="#"></a>').appendTo(this.element).addClass("ui-slider-handle")}if(e.values&&e.values.length){while(b(".ui-slider-handle",this.element).length<e.values.length){b('<a href="#"></a>').appendTo(this.element).addClass("ui-slider-handle")}}this.handles=b(".ui-slider-handle",this.element).addClass("ui-state-default ui-corner-all");this.handle=this.handles.eq(0);this.handles.add(this.range).filter("a").click(function(c){c.preventDefault()}).hover(function(){if(!e.disabled){b(this).addClass("ui-state-hover")}},function(){b(this).removeClass("ui-state-hover")}).focus(function(){if(!e.disabled){b(".ui-slider .ui-state-focus").removeClass("ui-state-focus");b(this).addClass("ui-state-focus")}else{b(this).blur()}}).blur(function(){b(this).removeClass("ui-state-focus")});this.handles.each(function(c){b(this).data("index.ui-slider-handle",c)});this.handles.keydown(function(c){var l=true;var n=b(this).data("index.ui-slider-handle");if(a.options.disabled){return}switch(c.keyCode){case b.ui.keyCode.HOME:case b.ui.keyCode.END:case b.ui.keyCode.UP:case b.ui.keyCode.RIGHT:case b.ui.keyCode.DOWN:case b.ui.keyCode.LEFT:l=false;if(!a._keySliding){a._keySliding=true;b(this).addClass("ui-state-active");a._start(c,n)}break}var k,o,j=a._step();if(a.options.values&&a.options.values.length){k=o=a.values(n)}else{k=o=a.value()}switch(c.keyCode){case b.ui.keyCode.HOME:o=a._valueMin();break;case b.ui.keyCode.END:o=a._valueMax();break;case b.ui.keyCode.UP:case b.ui.keyCode.RIGHT:if(k==a._valueMax()){return}o=k+j;break;case b.ui.keyCode.DOWN:case b.ui.keyCode.LEFT:if(k==a._valueMin()){return}o=k-j;break}a._slide(c,n,o);return l}).keyup(function(c){var f=b(this).data("index.ui-slider-handle");if(a._keySliding){a._stop(c,f);a._change(c,f);a._keySliding=false;b(this).removeClass("ui-state-active")}});this._refreshValue()},destroy:function(){this.handles.remove();this.range.remove();this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider");this._mouseDestroy()},_mouseCapture:function(s){var r=this.options;if(r.disabled){return false}this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();var o={x:s.pageX,y:s.pageY};var l=this._normValueFromMouse(o);var u=this._valueMax()-this._valueMin()+1,q;var a=this,n;this.handles.each(function(e){var c=Math.abs(l-a.values(e));if(u>c){u=c;q=b(this);n=e}});if(r.range==true&&this.values(1)==r.min){q=b(this.handles[++n])}this._start(s,n);a._handleIndex=n;q.addClass("ui-state-active").focus();var p=q.offset();var v=!b(s.target).parents().andSelf().is(".ui-slider-handle");this._clickOffset=v?{left:0,top:0}:{left:s.pageX-p.left-(q.width()/2),top:s.pageY-p.top-(q.height()/2)-(parseInt(q.css("borderTopWidth"),10)||0)-(parseInt(q.css("borderBottomWidth"),10)||0)+(parseInt(q.css("marginTop"),10)||0)};l=this._normValueFromMouse(o);this._slide(s,n,l);return true},_mouseStart:function(a){return true},_mouseDrag:function(e){var a={x:e.pageX,y:e.pageY};var f=this._normValueFromMouse(a);this._slide(e,this._handleIndex,f);return false},_mouseStop:function(a){this.handles.removeClass("ui-state-active");this._stop(a,this._handleIndex);this._change(a,this._handleIndex);this._handleIndex=null;this._clickOffset=null;return false},_detectOrientation:function(){this.orientation=this.options.orientation=="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(p){var q,k;if("horizontal"==this.orientation){q=this.elementSize.width;k=p.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)}else{q=this.elementSize.height;k=p.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)}var n=(k/q);if(n>1){n=1}if(n<0){n=0}if("vertical"==this.orientation){n=1-n}var o=this._valueMax()-this._valueMin(),j=n*o,a=j%this.options.step,l=this._valueMin()+j-a;if(a>(this.options.step/2)){l+=this.options.step}return parseFloat(l.toFixed(5))},_start:function(e,f){var a={handle:this.handles[f],value:this.value()};if(this.options.values&&this.options.values.length){a.value=this.values(f);a.values=this.values()}this._trigger("start",e,a)},_slide:function(k,l,n){var j=this.handles[l];if(this.options.values&&this.options.values.length){var a=this.values(l?0:1);if((this.options.values.length==2&&this.options.range===true)&&((l==0&&n>a)||(l==1&&n<a))){n=a}if(n!=this.values(l)){var o=this.values();o[l]=n;var i=this._trigger("slide",k,{handle:this.handles[l],value:n,values:o});var a=this.values(l?0:1);if(i!==false){this.values(l,n,(k.type=="mousedown"&&this.options.animate),true)}}}else{if(n!=this.value()){var i=this._trigger("slide",k,{handle:this.handles[l],value:n});if(i!==false){this._setData("value",n,(k.type=="mousedown"&&this.options.animate))}}}},_stop:function(e,f){var a={handle:this.handles[f],value:this.value()};if(this.options.values&&this.options.values.length){a.value=this.values(f);a.values=this.values()}this._trigger("stop",e,a)},_change:function(e,f){var a={handle:this.handles[f],value:this.value()};if(this.options.values&&this.options.values.length){a.value=this.values(f);a.values=this.values()}this._trigger("change",e,a)},value:function(a){if(arguments.length){this._setData("value",a);this._change(null,0)}return this._value()},values:function(a,f,h,g){if(arguments.length>1){this.options.values[a]=f;this._refreshValue(h);if(!g){this._change(null,a)}}if(arguments.length){if(this.options.values&&this.options.values.length){return this._values(a)}else{return this.value()}}else{return this._values()}},_setData:function(a,e,f){b.widget.prototype._setData.apply(this,arguments);switch(a){case"disabled":if(e){this.handles.filter(".ui-state-focus").blur();this.handles.removeClass("ui-state-hover");this.handles.attr("disabled","disabled")}else{this.handles.removeAttr("disabled")}case"orientation":this._detectOrientation();this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation);this._refreshValue(f);break;case"value":this._refreshValue(f);break}},_step:function(){var a=this.options.step;return a},_value:function(){var a=this.options.value;if(a<this._valueMin()){a=this._valueMin()}if(a>this._valueMax()){a=this._valueMax()}return a},_values:function(a){if(arguments.length){var e=this.options.values[a];if(e<this._valueMin()){e=this._valueMin()}if(e>this._valueMax()){e=this._valueMax()}return e}else{return this.options.values}},_valueMin:function(){var a=this.options.min;return a},_valueMax:function(){var a=this.options.max;return a},_refreshValue:function(w){var s=this.options.range,v=this.options,a=this;if(this.options.values&&this.options.values.length){var p,q;this.handles.each(function(e,g){var f=(a.values(e)-a._valueMin())/(a._valueMax()-a._valueMin())*100;var c={};c[a.orientation=="horizontal"?"left":"bottom"]=f+"%";b(this).stop(1,1)[w?"animate":"css"](c,v.animate);if(a.options.range===true){if(a.orientation=="horizontal"){(e==0)&&a.range.stop(1,1)[w?"animate":"css"]({left:f+"%"},v.animate);(e==1)&&a.range[w?"animate":"css"]({width:(f-lastValPercent)+"%"},{queue:false,duration:v.animate})}else{(e==0)&&a.range.stop(1,1)[w?"animate":"css"]({bottom:(f)+"%"},v.animate);(e==1)&&a.range[w?"animate":"css"]({height:(f-lastValPercent)+"%"},{queue:false,duration:v.animate})}}lastValPercent=f})}else{var o=this.value(),r=this._valueMin(),n=this._valueMax(),u=n!=r?(o-r)/(n-r)*100:0;var x={};x[a.orientation=="horizontal"?"left":"bottom"]=u+"%";this.handle.stop(1,1)[w?"animate":"css"](x,v.animate);(s=="min")&&(this.orientation=="horizontal")&&this.range.stop(1,1)[w?"animate":"css"]({width:u+"%"},v.animate);(s=="max")&&(this.orientation=="horizontal")&&this.range[w?"animate":"css"]({width:(100-u)+"%"},{queue:false,duration:v.animate});(s=="min")&&(this.orientation=="vertical")&&this.range.stop(1,1)[w?"animate":"css"]({height:u+"%"},v.animate);(s=="max")&&(this.orientation=="vertical")&&this.range[w?"animate":"css"]({height:(100-u)+"%"},{queue:false,duration:v.animate})}}}));b.extend(b.ui.slider,{getter:"value values",version:"1.7.2",eventPrefix:"slide",defaults:{animate:false,delay:0,distance:0,max:100,min:0,orientation:"horizontal",range:false,step:1,value:0,values:null}})})(jQuery);(function(b){b.widget("ui.tabs",{_init:function(){if(this.options.deselectable!==undefined){this.options.collapsible=this.options.deselectable}this._tabify(true)},_setData:function(a,e){if(a=="selected"){if(this.options.collapsible&&e==this.options.selected){return}this.select(e)}else{this.options[a]=e;if(a=="deselectable"){this.options.collapsible=e}this._tabify()}},_tabId:function(a){return a.title&&a.title.replace(/\s/g,"_").replace(/[^A-Za-z0-9\-_:\.]/g,"")||this.options.idPrefix+b.data(a)},_sanitizeSelector:function(a){return a.replace(/:/g,"\\:")},_cookie:function(){var a=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+b.data(this.list[0]));return b.cookie.apply(null,[a].concat(b.makeArray(arguments)))},_ui:function(e,a){return{tab:e,panel:a,index:this.anchors.index(e)}},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var a=b(this);a.html(a.data("label.tabs")).removeData("label.tabs")})},_tabify:function(i){this.list=this.element.children("ul:first");this.lis=b("li:has(a[href])",this.list);this.anchors=this.lis.map(function(){return b("a",this)[0]});this.panels=b([]);var a=this,z=this.options;var A=/^#.+/;this.anchors.each(function(h,k){var j=b(k).attr("href");var g=j.split("#")[0],f;if(g&&(g===location.toString().split("#")[0]||(f=b("base")[0])&&g===f.href)){j=k.hash;k.href=j}if(A.test(j)){a.panels=a.panels.add(a._sanitizeSelector(j))}else{if(j!="#"){b.data(k,"href.tabs",j);b.data(k,"load.tabs",j.replace(/#.*$/,""));var c=a._tabId(k);k.href="#"+c;var e=b("#"+c);if(!e.length){e=b(z.panelTemplate).attr("id",c).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(a.panels[h-1]||a.list);e.data("destroy.tabs",true)}a.panels=a.panels.add(e)}else{z.disabled.push(h)}}});if(i){this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all");this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all");this.lis.addClass("ui-state-default ui-corner-top");this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom");if(z.selected===undefined){if(location.hash){this.anchors.each(function(c,e){if(e.hash==location.hash){z.selected=c;return false}})}if(typeof z.selected!="number"&&z.cookie){z.selected=parseInt(a._cookie(),10)}if(typeof z.selected!="number"&&this.lis.filter(".ui-tabs-selected").length){z.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"))}z.selected=z.selected||0}else{if(z.selected===null){z.selected=-1}}z.selected=((z.selected>=0&&this.anchors[z.selected])||z.selected<0)?z.selected:0;z.disabled=b.unique(z.disabled.concat(b.map(this.lis.filter(".ui-state-disabled"),function(c,e){return a.lis.index(c)}))).sort();if(b.inArray(z.selected,z.disabled)!=-1){z.disabled.splice(b.inArray(z.selected,z.disabled),1)}this.panels.addClass("ui-tabs-hide");this.lis.removeClass("ui-tabs-selected ui-state-active");if(z.selected>=0&&this.anchors.length){this.panels.eq(z.selected).removeClass("ui-tabs-hide");this.lis.eq(z.selected).addClass("ui-tabs-selected ui-state-active");a.element.queue("tabs",function(){a._trigger("show",null,a._ui(a.anchors[z.selected],a.panels[z.selected]))});this.load(z.selected)}b(window).bind("unload",function(){a.lis.add(a.anchors).unbind(".tabs");a.lis=a.anchors=a.panels=null})}else{z.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"))}this.element[z.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible");if(z.cookie){this._cookie(z.selected,z.cookie)}for(var v=0,o;(o=this.lis[v]);v++){b(o)[b.inArray(v,z.disabled)!=-1&&!b(o).hasClass("ui-tabs-selected")?"addClass":"removeClass"]("ui-state-disabled")}if(z.cache===false){this.anchors.removeData("cache.tabs")}this.lis.add(this.anchors).unbind(".tabs");if(z.event!="mouseover"){var w=function(e,c){if(c.is(":not(.ui-state-disabled)")){c.addClass("ui-state-"+e)}};var s=function(e,c){c.removeClass("ui-state-"+e)};this.lis.bind("mouseover.tabs",function(){w("hover",b(this))});this.lis.bind("mouseout.tabs",function(){s("hover",b(this))});this.anchors.bind("focus.tabs",function(){w("focus",b(this).closest("li"))});this.anchors.bind("blur.tabs",function(){s("focus",b(this).closest("li"))})}var B,u;if(z.fx){if(b.isArray(z.fx)){B=z.fx[0];u=z.fx[1]}else{B=u=z.fx}}function x(c,e){c.css({display:""});if(b.browser.msie&&e.opacity){c[0].style.removeAttribute("filter")}}var r=u?function(c,e){b(c).closest("li").removeClass("ui-state-default").addClass("ui-tabs-selected ui-state-active");e.hide().removeClass("ui-tabs-hide").animate(u,u.duration||"normal",function(){x(e,u);a._trigger("show",null,a._ui(c,e[0]))})}:function(c,e){b(c).closest("li").removeClass("ui-state-default").addClass("ui-tabs-selected ui-state-active");e.removeClass("ui-tabs-hide");a._trigger("show",null,a._ui(c,e[0]))};var q=B?function(e,c){c.animate(B,B.duration||"normal",function(){a.lis.removeClass("ui-tabs-selected ui-state-active").addClass("ui-state-default");c.addClass("ui-tabs-hide");x(c,B);a.element.dequeue("tabs")})}:function(f,c,e){a.lis.removeClass("ui-tabs-selected ui-state-active").addClass("ui-state-default");c.addClass("ui-tabs-hide");a.element.dequeue("tabs")};this.anchors.bind(z.event+".tabs",function(){var g=this,e=b(this).closest("li"),c=a.panels.filter(":not(.ui-tabs-hide)"),f=b(a._sanitizeSelector(this.hash));if((e.hasClass("ui-tabs-selected")&&!z.collapsible)||e.hasClass("ui-state-disabled")||e.hasClass("ui-state-processing")||a._trigger("select",null,a._ui(this,f[0]))===false){this.blur();return false}z.selected=a.anchors.index(this);a.abort();if(z.collapsible){if(e.hasClass("ui-tabs-selected")){z.selected=-1;if(z.cookie){a._cookie(z.selected,z.cookie)}a.element.queue("tabs",function(){q(g,c)}).dequeue("tabs");this.blur();return false}else{if(!c.length){if(z.cookie){a._cookie(z.selected,z.cookie)}a.element.queue("tabs",function(){r(g,f)});a.load(a.anchors.index(this));this.blur();return false}}}if(z.cookie){a._cookie(z.selected,z.cookie)}if(f.length){if(c.length){a.element.queue("tabs",function(){q(g,c)})}a.element.queue("tabs",function(){r(g,f)});a.load(a.anchors.index(this))}else{throw"jQuery UI Tabs: Mismatching fragment identifier."}if(b.browser.msie){this.blur()}});this.anchors.bind("click.tabs",function(){return false})},destroy:function(){var a=this.options;this.abort();this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs");this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all");this.anchors.each(function(){var f=b.data(this,"href.tabs");if(f){this.href=f}var e=b(this).unbind(".tabs");b.each(["href","load","cache"],function(g,c){e.removeData(c+".tabs")})});this.lis.unbind(".tabs").add(this.panels).each(function(){if(b.data(this,"destroy.tabs")){b(this).remove()}else{b(this).removeClass(["ui-state-default","ui-corner-top","ui-tabs-selected","ui-state-active","ui-state-hover","ui-state-focus","ui-state-disabled","ui-tabs-panel","ui-widget-content","ui-corner-bottom","ui-tabs-hide"].join(" "))}});if(a.cookie){this._cookie(null,a.cookie)}},add:function(o,p,q){if(q===undefined){q=this.anchors.length}var a=this,l=this.options,j=b(l.tabTemplate.replace(/#\{href\}/g,o).replace(/#\{label\}/g,p)),k=!o.indexOf("#")?o.replace("#",""):this._tabId(b("a",j)[0]);j.addClass("ui-state-default ui-corner-top").data("destroy.tabs",true);var n=b("#"+k);if(!n.length){n=b(l.panelTemplate).attr("id",k).data("destroy.tabs",true)}n.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide");if(q>=this.lis.length){j.appendTo(this.list);n.appendTo(this.list[0].parentNode)}else{j.insertBefore(this.lis[q]);n.insertBefore(this.panels[q])}l.disabled=b.map(l.disabled,function(c,e){return c>=q?++c:c});this._tabify();if(this.anchors.length==1){j.addClass("ui-tabs-selected ui-state-active");n.removeClass("ui-tabs-hide");this.element.queue("tabs",function(){a._trigger("show",null,a._ui(a.anchors[0],a.panels[0]))});this.load(0)}this._trigger("add",null,this._ui(this.anchors[q],this.panels[q]))},remove:function(a){var g=this.options,f=this.lis.eq(a).remove(),h=this.panels.eq(a).remove();if(f.hasClass("ui-tabs-selected")&&this.anchors.length>1){this.select(a+(a+1<this.anchors.length?1:-1))}g.disabled=b.map(b.grep(g.disabled,function(c,e){return c!=a}),function(c,e){return c>=a?--c:c});this._tabify();this._trigger("remove",null,this._ui(f.find("a")[0],h[0]))},enable:function(a){var e=this.options;if(b.inArray(a,e.disabled)==-1){return}this.lis.eq(a).removeClass("ui-state-disabled");e.disabled=b.grep(e.disabled,function(c,f){return c!=a});this._trigger("enable",null,this._ui(this.anchors[a],this.panels[a]))},disable:function(f){var a=this,e=this.options;if(f!=e.selected){this.lis.eq(f).addClass("ui-state-disabled");e.disabled.push(f);e.disabled.sort();this._trigger("disable",null,this._ui(this.anchors[f],this.panels[f]))}},select:function(a){if(typeof a=="string"){a=this.anchors.index(this.anchors.filter("[href$="+a+"]"))}else{if(a===null){a=-1}}if(a==-1&&this.options.collapsible){a=this.options.selected}this.anchors.eq(a).trigger(this.options.event+".tabs")},load:function(j){var l=this,h=this.options,a=this.anchors.eq(j)[0],k=b.data(a,"load.tabs");this.abort();if(!k||this.element.queue("tabs").length!==0&&b.data(a,"cache.tabs")){this.element.dequeue("tabs");return}this.lis.eq(j).addClass("ui-state-processing");if(h.spinner){var i=b("span",a);i.data("label.tabs",i.html()).html(h.spinner)}this.xhr=b.ajax(b.extend({},h.ajaxOptions,{url:k,success:function(e,f){b(l._sanitizeSelector(a.hash)).html(e);l._cleanup();if(h.cache){b.data(a,"cache.tabs",true)}l._trigger("load",null,l._ui(l.anchors[j],l.panels[j]));try{h.ajaxOptions.success(e,f)}catch(c){}l.element.dequeue("tabs")}}))},abort:function(){this.element.queue([]);this.panels.stop(false,true);if(this.xhr){this.xhr.abort();delete this.xhr}this._cleanup()},url:function(e,a){this.anchors.eq(e).removeData("cache.tabs").data("load.tabs",a)},length:function(){return this.anchors.length}});b.extend(b.ui.tabs,{version:"1.7.2",getter:"length",defaults:{ajaxOptions:null,cache:false,cookie:null,collapsible:false,disabled:[],event:"click",fx:null,idPrefix:"ui-tabs-",panelTemplate:"<div></div>",spinner:"<em>Loading&#8230;</em>",tabTemplate:'<li><a href="#{href}"><span>#{label}</span></a></li>'}});b.extend(b.ui.tabs.prototype,{rotation:null,rotate:function(k,i){var a=this,h=this.options;var l=a._rotate||(a._rotate=function(c){clearTimeout(a.rotation);a.rotation=setTimeout(function(){var e=h.selected;a.select(++e<a.anchors.length?e:0)},k);if(c){c.stopPropagation()}});var j=a._unrotate||(a._unrotate=!i?function(c){if(c.clientX){a.rotate(null)}}:function(c){t=h.selected;l()});if(k){this.element.bind("tabsshow",l);this.anchors.bind(h.event+".tabs",j);l()}else{clearTimeout(a.rotation);this.element.unbind("tabsshow",l);this.anchors.unbind(h.event+".tabs",j);delete this._rotate;delete this._unrotate}}})})(jQuery);(function($){$.extend($.ui,{datepicker:{version:"1.7.2"}});var PROP_NAME="datepicker";function Datepicker(){this.debug=false;this._curInst=null;this._keyEvent=false;this._disabledInputs=[];this._datepickerShowing=false;this._inDialog=false;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass="ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],dateFormat:"mm/dd/yy",firstDay:0,isRTL:false};this._defaults={showOn:"focus",showAnim:"show",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:false,hideIfNoPrevNext:false,navigationAsDateFormat:false,gotoCurrent:false,changeMonth:false,changeYear:false,showMonthAfterYear:false,yearRange:"-10:+10",showOtherMonths:false,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"normal",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:true,showButtonPanel:false};$.extend(this._defaults,this.regional[""]);this.dpDiv=$('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all ui-helper-hidden-accessible"></div>')}$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",log:function(){if(this.debug){console.log.apply("",arguments)}},setDefaults:function(settings){extendRemove(this._defaults,settings||{});return this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase();var inline=(nodeName=="div"||nodeName=="span");if(!target.id){target.id="dp"+(++this.uuid)}var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{});if(nodeName=="input"){this._connectDatepicker(target,inst)}else{if(inline){this._inlineDatepicker(target,inst)}}},_newInst:function(target,inline){var id=target[0].id.replace(/([:\[\]\.])/g,"\\\\$1");return{id:id,input:target,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:inline,dpDiv:(!inline?this.dpDiv:$('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}},_connectDatepicker:function(target,inst){var input=$(target);inst.append=$([]);inst.trigger=$([]);if(input.hasClass(this.markerClassName)){return}var appendText=this._get(inst,"appendText");var isRTL=this._get(inst,"isRTL");if(appendText){inst.append=$('<span class="'+this._appendClass+'">'+appendText+"</span>");input[isRTL?"before":"after"](inst.append)}var showOn=this._get(inst,"showOn");if(showOn=="focus"||showOn=="both"){input.focus(this._showDatepicker)}if(showOn=="button"||showOn=="both"){var buttonText=this._get(inst,"buttonText");var buttonImage=this._get(inst,"buttonImage");inst.trigger=$(this._get(inst,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:buttonImage,alt:buttonText,title:buttonText}):$('<button type="button"></button>').addClass(this._triggerClass).html(buttonImage==""?buttonText:$("<img/>").attr({src:buttonImage,alt:buttonText,title:buttonText})));input[isRTL?"before":"after"](inst.trigger);inst.trigger.click(function(){if($.datepicker._datepickerShowing&&$.datepicker._lastInput==target){$.datepicker._hideDatepicker()}else{$.datepicker._showDatepicker(target)}return false})}input.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).bind("setData.datepicker",function(event,key,value){inst.settings[key]=value}).bind("getData.datepicker",function(event,key){return this._get(inst,key)});$.data(target,PROP_NAME,inst)},_inlineDatepicker:function(target,inst){var divSpan=$(target);if(divSpan.hasClass(this.markerClassName)){return}divSpan.addClass(this.markerClassName).append(inst.dpDiv).bind("setData.datepicker",function(event,key,value){inst.settings[key]=value}).bind("getData.datepicker",function(event,key){return this._get(inst,key)});$.data(target,PROP_NAME,inst);this._setDate(inst,this._getDefaultDate(inst));this._updateDatepicker(inst);this._updateAlternate(inst)},_dialogDatepicker:function(input,dateText,onSelect,settings,pos){var inst=this._dialogInst;if(!inst){var id="dp"+(++this.uuid);this._dialogInput=$('<input type="text" id="'+id+'" size="1" style="position: absolute; top: -100px;"/>');this._dialogInput.keydown(this._doKeyDown);$("body").append(this._dialogInput);inst=this._dialogInst=this._newInst(this._dialogInput,false);inst.settings={};$.data(this._dialogInput[0],PROP_NAME,inst)}extendRemove(inst.settings,settings||{});this._dialogInput.val(dateText);this._pos=(pos?(pos.length?pos:[pos.pageX,pos.pageY]):null);if(!this._pos){var browserWidth=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;var browserHeight=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;var scrollX=document.documentElement.scrollLeft||document.body.scrollLeft;var scrollY=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[(browserWidth/2)-100+scrollX,(browserHeight/2)-150+scrollY]}this._dialogInput.css("left",this._pos[0]+"px").css("top",this._pos[1]+"px");inst.settings.onSelect=onSelect;this._inDialog=true;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);if($.blockUI){$.blockUI(this.dpDiv)}$.data(this._dialogInput[0],PROP_NAME,inst);return this},_destroyDatepicker:function(target){var $target=$(target);var inst=$.data(target,PROP_NAME);if(!$target.hasClass(this.markerClassName)){return}var nodeName=target.nodeName.toLowerCase();$.removeData(target,PROP_NAME);if(nodeName=="input"){inst.append.remove();inst.trigger.remove();$target.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress)}else{if(nodeName=="div"||nodeName=="span"){$target.removeClass(this.markerClassName).empty()}}},_enableDatepicker:function(target){var $target=$(target);var inst=$.data(target,PROP_NAME);if(!$target.hasClass(this.markerClassName)){return}var nodeName=target.nodeName.toLowerCase();if(nodeName=="input"){target.disabled=false;inst.trigger.filter("button").each(function(){this.disabled=false}).end().filter("img").css({opacity:"1.0",cursor:""})}else{if(nodeName=="div"||nodeName=="span"){var inline=$target.children("."+this._inlineClass);inline.children().removeClass("ui-state-disabled")}}this._disabledInputs=$.map(this._disabledInputs,function(value){return(value==target?null:value)})},_disableDatepicker:function(target){var $target=$(target);var inst=$.data(target,PROP_NAME);if(!$target.hasClass(this.markerClassName)){return}var nodeName=target.nodeName.toLowerCase();if(nodeName=="input"){target.disabled=true;inst.trigger.filter("button").each(function(){this.disabled=true}).end().filter("img").css({opacity:"0.5",cursor:"default"})}else{if(nodeName=="div"||nodeName=="span"){var inline=$target.children("."+this._inlineClass);inline.children().addClass("ui-state-disabled")}}this._disabledInputs=$.map(this._disabledInputs,function(value){return(value==target?null:value)});this._disabledInputs[this._disabledInputs.length]=target},_isDisabledDatepicker:function(target){if(!target){return false}for(var i=0;i<this._disabledInputs.length;i++){if(this._disabledInputs[i]==target){return true}}return false},_getInst:function(target){try{return $.data(target,PROP_NAME)}catch(err){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(target,name,value){var inst=this._getInst(target);if(arguments.length==2&&typeof name=="string"){return(name=="defaults"?$.extend({},$.datepicker._defaults):(inst?(name=="all"?$.extend({},inst.settings):this._get(inst,name)):null))}var settings=name||{};if(typeof name=="string"){settings={};settings[name]=value}if(inst){if(this._curInst==inst){this._hideDatepicker(null)}var date=this._getDateDatepicker(target);extendRemove(inst.settings,settings);this._setDateDatepicker(target,date);this._updateDatepicker(inst)}},_changeDatepicker:function(target,name,value){this._optionDatepicker(target,name,value)},_refreshDatepicker:function(target){var inst=this._getInst(target);if(inst){this._updateDatepicker(inst)}},_setDateDatepicker:function(target,date,endDate){var inst=this._getInst(target);if(inst){this._setDate(inst,date,endDate);this._updateDatepicker(inst);this._updateAlternate(inst)}},_getDateDatepicker:function(target){var inst=this._getInst(target);if(inst&&!inst.inline){this._setDateFromField(inst)}return(inst?this._getDate(inst):null)},_doKeyDown:function(event){var inst=$.datepicker._getInst(event.target);var handled=true;var isRTL=inst.dpDiv.is(".ui-datepicker-rtl");inst._keyEvent=true;if($.datepicker._datepickerShowing){switch(event.keyCode){case 9:$.datepicker._hideDatepicker(null,"");break;case 13:var sel=$("td."+$.datepicker._dayOverClass+", td."+$.datepicker._currentClass,inst.dpDiv);if(sel[0]){$.datepicker._selectDay(event.target,inst.selectedMonth,inst.selectedYear,sel[0])}else{$.datepicker._hideDatepicker(null,$.datepicker._get(inst,"duration"))}return false;break;case 27:$.datepicker._hideDatepicker(null,$.datepicker._get(inst,"duration"));break;case 33:$.datepicker._adjustDate(event.target,(event.ctrlKey?-$.datepicker._get(inst,"stepBigMonths"):-$.datepicker._get(inst,"stepMonths")),"M");break;case 34:$.datepicker._adjustDate(event.target,(event.ctrlKey?+$.datepicker._get(inst,"stepBigMonths"):+$.datepicker._get(inst,"stepMonths")),"M");break;case 35:if(event.ctrlKey||event.metaKey){$.datepicker._clearDate(event.target)}handled=event.ctrlKey||event.metaKey;break;case 36:if(event.ctrlKey||event.metaKey){$.datepicker._gotoToday(event.target)}handled=event.ctrlKey||event.metaKey;break;case 37:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,(isRTL?+1:-1),"D")}handled=event.ctrlKey||event.metaKey;if(event.originalEvent.altKey){$.datepicker._adjustDate(event.target,(event.ctrlKey?-$.datepicker._get(inst,"stepBigMonths"):-$.datepicker._get(inst,"stepMonths")),"M")}break;case 38:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,-7,"D")}handled=event.ctrlKey||event.metaKey;break;case 39:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,(isRTL?-1:+1),"D")}handled=event.ctrlKey||event.metaKey;if(event.originalEvent.altKey){$.datepicker._adjustDate(event.target,(event.ctrlKey?+$.datepicker._get(inst,"stepBigMonths"):+$.datepicker._get(inst,"stepMonths")),"M")}break;case 40:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,+7,"D")}handled=event.ctrlKey||event.metaKey;break;default:handled=false}}else{if(event.keyCode==36&&event.ctrlKey){$.datepicker._showDatepicker(this)}else{handled=false}}if(handled){event.preventDefault();event.stopPropagation()}},_doKeyPress:function(event){var inst=$.datepicker._getInst(event.target);if($.datepicker._get(inst,"constrainInput")){var chars=$.datepicker._possibleChars($.datepicker._get(inst,"dateFormat"));var chr=String.fromCharCode(event.charCode==undefined?event.keyCode:event.charCode);return event.ctrlKey||(chr<" "||!chars||chars.indexOf(chr)>-1)}},_showDatepicker:function(input){input=input.target||input;if(input.nodeName.toLowerCase()!="input"){input=$("input",input.parentNode)[0]}if($.datepicker._isDisabledDatepicker(input)||$.datepicker._lastInput==input){return}var inst=$.datepicker._getInst(input);var beforeShow=$.datepicker._get(inst,"beforeShow");extendRemove(inst.settings,(beforeShow?beforeShow.apply(input,[input,inst]):{}));$.datepicker._hideDatepicker(null,"");$.datepicker._lastInput=input;$.datepicker._setDateFromField(inst);if($.datepicker._inDialog){input.value=""}if(!$.datepicker._pos){$.datepicker._pos=$.datepicker._findPos(input);$.datepicker._pos[1]+=input.offsetHeight}var isFixed=false;$(input).parents().each(function(){isFixed|=$(this).css("position")=="fixed";return !isFixed});if(isFixed&&$.browser.opera){$.datepicker._pos[0]-=document.documentElement.scrollLeft;$.datepicker._pos[1]-=document.documentElement.scrollTop}var offset={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};$.datepicker._pos=null;inst.rangeStart=null;inst.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});$.datepicker._updateDatepicker(inst);offset=$.datepicker._checkOffset(inst,offset,isFixed);inst.dpDiv.css({position:($.datepicker._inDialog&&$.blockUI?"static":(isFixed?"fixed":"absolute")),display:"none",left:offset.left+"px",top:offset.top+"px"});if(!inst.inline){var showAnim=$.datepicker._get(inst,"showAnim")||"show";var duration=$.datepicker._get(inst,"duration");var postProcess=function(){$.datepicker._datepickerShowing=true;if($.browser.msie&&parseInt($.browser.version,10)<7){$("iframe.ui-datepicker-cover").css({width:inst.dpDiv.width()+4,height:inst.dpDiv.height()+4})}};if($.effects&&$.effects[showAnim]){inst.dpDiv.show(showAnim,$.datepicker._get(inst,"showOptions"),duration,postProcess)}else{inst.dpDiv[showAnim](duration,postProcess)}if(duration==""){postProcess()}if(inst.input[0].type!="hidden"){inst.input[0].focus()}$.datepicker._curInst=inst}},_updateDatepicker:function(inst){var dims={width:inst.dpDiv.width()+4,height:inst.dpDiv.height()+4};var self=this;inst.dpDiv.empty().append(this._generateHTML(inst)).find("iframe.ui-datepicker-cover").css({width:dims.width,height:dims.height}).end().find("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a").bind("mouseout",function(){$(this).removeClass("ui-state-hover");if(this.className.indexOf("ui-datepicker-prev")!=-1){$(this).removeClass("ui-datepicker-prev-hover")}if(this.className.indexOf("ui-datepicker-next")!=-1){$(this).removeClass("ui-datepicker-next-hover")}}).bind("mouseover",function(){if(!self._isDisabledDatepicker(inst.inline?inst.dpDiv.parent()[0]:inst.input[0])){$(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover");$(this).addClass("ui-state-hover");if(this.className.indexOf("ui-datepicker-prev")!=-1){$(this).addClass("ui-datepicker-prev-hover")}if(this.className.indexOf("ui-datepicker-next")!=-1){$(this).addClass("ui-datepicker-next-hover")}}}).end().find("."+this._dayOverClass+" a").trigger("mouseover").end();var numMonths=this._getNumberOfMonths(inst);var cols=numMonths[1];var width=17;if(cols>1){inst.dpDiv.addClass("ui-datepicker-multi-"+cols).css("width",(width*cols)+"em")}else{inst.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("")}inst.dpDiv[(numMonths[0]!=1||numMonths[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi");inst.dpDiv[(this._get(inst,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");if(inst.input&&inst.input[0].type!="hidden"&&inst==$.datepicker._curInst){$(inst.input[0]).focus()}},_checkOffset:function(inst,offset,isFixed){var dpWidth=inst.dpDiv.outerWidth();var dpHeight=inst.dpDiv.outerHeight();var inputWidth=inst.input?inst.input.outerWidth():0;var inputHeight=inst.input?inst.input.outerHeight():0;var viewWidth=(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)+$(document).scrollLeft();var viewHeight=(window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight)+$(document).scrollTop();offset.left-=(this._get(inst,"isRTL")?(dpWidth-inputWidth):0);offset.left-=(isFixed&&offset.left==inst.input.offset().left)?$(document).scrollLeft():0;offset.top-=(isFixed&&offset.top==(inst.input.offset().top+inputHeight))?$(document).scrollTop():0;offset.left-=(offset.left+dpWidth>viewWidth&&viewWidth>dpWidth)?Math.abs(offset.left+dpWidth-viewWidth):0;offset.top-=(offset.top+dpHeight>viewHeight&&viewHeight>dpHeight)?Math.abs(offset.top+dpHeight+inputHeight*2-viewHeight):0;return offset},_findPos:function(obj){while(obj&&(obj.type=="hidden"||obj.nodeType!=1)){obj=obj.nextSibling}var position=$(obj).offset();return[position.left,position.top]},_hideDatepicker:function(input,duration){var inst=this._curInst;if(!inst||(input&&inst!=$.data(input,PROP_NAME))){return}if(inst.stayOpen){this._selectDate("#"+inst.id,this._formatDate(inst,inst.currentDay,inst.currentMonth,inst.currentYear))}inst.stayOpen=false;if(this._datepickerShowing){duration=(duration!=null?duration:this._get(inst,"duration"));var showAnim=this._get(inst,"showAnim");var postProcess=function(){$.datepicker._tidyDialog(inst)};if(duration!=""&&$.effects&&$.effects[showAnim]){inst.dpDiv.hide(showAnim,$.datepicker._get(inst,"showOptions"),duration,postProcess)}else{inst.dpDiv[(duration==""?"hide":(showAnim=="slideDown"?"slideUp":(showAnim=="fadeIn"?"fadeOut":"hide")))](duration,postProcess)}if(duration==""){this._tidyDialog(inst)}var onClose=this._get(inst,"onClose");if(onClose){onClose.apply((inst.input?inst.input[0]:null),[(inst.input?inst.input.val():""),inst])}this._datepickerShowing=false;this._lastInput=null;if(this._inDialog){this._dialogInput.css({position:"absolute",left:"0",top:"-100px"});if($.blockUI){$.unblockUI();$("body").append(this.dpDiv)}}this._inDialog=false}this._curInst=null},_tidyDialog:function(inst){inst.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(event){if(!$.datepicker._curInst){return}var $target=$(event.target);if(($target.parents("#"+$.datepicker._mainDivId).length==0)&&!$target.hasClass($.datepicker.markerClassName)&&!$target.hasClass($.datepicker._triggerClass)&&$.datepicker._datepickerShowing&&!($.datepicker._inDialog&&$.blockUI)){$.datepicker._hideDatepicker(null,"")}},_adjustDate:function(id,offset,period){var target=$(id);var inst=this._getInst(target[0]);if(this._isDisabledDatepicker(target[0])){return}this._adjustInstDate(inst,offset+(period=="M"?this._get(inst,"showCurrentAtPos"):0),period);this._updateDatepicker(inst)},_gotoToday:function(id){var target=$(id);var inst=this._getInst(target[0]);if(this._get(inst,"gotoCurrent")&&inst.currentDay){inst.selectedDay=inst.currentDay;inst.drawMonth=inst.selectedMonth=inst.currentMonth;inst.drawYear=inst.selectedYear=inst.currentYear}else{var date=new Date();inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear()}this._notifyChange(inst);this._adjustDate(target)},_selectMonthYear:function(id,select,period){var target=$(id);var inst=this._getInst(target[0]);inst._selectingMonthYear=false;inst["selected"+(period=="M"?"Month":"Year")]=inst["draw"+(period=="M"?"Month":"Year")]=parseInt(select.options[select.selectedIndex].value,10);this._notifyChange(inst);this._adjustDate(target)},_clickMonthYear:function(id){var target=$(id);var inst=this._getInst(target[0]);if(inst.input&&inst._selectingMonthYear&&!$.browser.msie){inst.input[0].focus()}inst._selectingMonthYear=!inst._selectingMonthYear},_selectDay:function(id,month,year,td){var target=$(id);if($(td).hasClass(this._unselectableClass)||this._isDisabledDatepicker(target[0])){return}var inst=this._getInst(target[0]);inst.selectedDay=inst.currentDay=$("a",td).html();inst.selectedMonth=inst.currentMonth=month;inst.selectedYear=inst.currentYear=year;if(inst.stayOpen){inst.endDay=inst.endMonth=inst.endYear=null}this._selectDate(id,this._formatDate(inst,inst.currentDay,inst.currentMonth,inst.currentYear));if(inst.stayOpen){inst.rangeStart=this._daylightSavingAdjust(new Date(inst.currentYear,inst.currentMonth,inst.currentDay));this._updateDatepicker(inst)}},_clearDate:function(id){var target=$(id);var inst=this._getInst(target[0]);inst.stayOpen=false;inst.endDay=inst.endMonth=inst.endYear=inst.rangeStart=null;this._selectDate(target,"")},_selectDate:function(id,dateStr){var target=$(id);var inst=this._getInst(target[0]);dateStr=(dateStr!=null?dateStr:this._formatDate(inst));if(inst.input){inst.input.val(dateStr)}this._updateAlternate(inst);var onSelect=this._get(inst,"onSelect");if(onSelect){onSelect.apply((inst.input?inst.input[0]:null),[dateStr,inst])}else{if(inst.input){inst.input.trigger("change")}}if(inst.inline){this._updateDatepicker(inst)}else{if(!inst.stayOpen){this._hideDatepicker(null,this._get(inst,"duration"));this._lastInput=inst.input[0];if(typeof(inst.input[0])!="object"){inst.input[0].focus()}this._lastInput=null}}},_updateAlternate:function(inst){var altField=this._get(inst,"altField");if(altField){var altFormat=this._get(inst,"altFormat")||this._get(inst,"dateFormat");var date=this._getDate(inst);dateStr=this.formatDate(altFormat,date,this._getFormatConfig(inst));$(altField).each(function(){$(this).val(dateStr)})}},noWeekends:function(date){var day=date.getDay();return[(day>0&&day<6),""]},iso8601Week:function(date){var checkDate=new Date(date.getFullYear(),date.getMonth(),date.getDate());var firstMon=new Date(checkDate.getFullYear(),1-1,4);var firstDay=firstMon.getDay()||7;firstMon.setDate(firstMon.getDate()+1-firstDay);if(firstDay<4&&checkDate<firstMon){checkDate.setDate(checkDate.getDate()-3);return $.datepicker.iso8601Week(checkDate)}else{if(checkDate>new Date(checkDate.getFullYear(),12-1,28)){firstDay=new Date(checkDate.getFullYear()+1,1-1,4).getDay()||7;if(firstDay>4&&(checkDate.getDay()||7)<firstDay-3){return 1}}}return Math.floor(((checkDate-firstMon)/86400000)/7)+1},parseDate:function(format,value,settings){if(format==null||value==null){throw"Invalid arguments"}value=(typeof value=="object"?value.toString():value+"");if(value==""){return null}var shortYearCutoff=(settings?settings.shortYearCutoff:null)||this._defaults.shortYearCutoff;var dayNamesShort=(settings?settings.dayNamesShort:null)||this._defaults.dayNamesShort;var dayNames=(settings?settings.dayNames:null)||this._defaults.dayNames;var monthNamesShort=(settings?settings.monthNamesShort:null)||this._defaults.monthNamesShort;var monthNames=(settings?settings.monthNames:null)||this._defaults.monthNames;var year=-1;var month=-1;var day=-1;var doy=-1;var literal=false;var lookAhead=function(match){var matches=(iFormat+1<format.length&&format.charAt(iFormat+1)==match);if(matches){iFormat++}return matches};var getNumber=function(match){lookAhead(match);var origSize=(match=="@"?14:(match=="y"?4:(match=="o"?3:2)));var size=origSize;var num=0;while(size>0&&iValue<value.length&&value.charAt(iValue)>="0"&&value.charAt(iValue)<="9"){num=num*10+parseInt(value.charAt(iValue++),10);size--}if(size==origSize){throw"Missing number at position "+iValue}return num};var getName=function(match,shortNames,longNames){var names=(lookAhead(match)?longNames:shortNames);var size=0;for(var j=0;j<names.length;j++){size=Math.max(size,names[j].length)}var name="";var iInit=iValue;while(size>0&&iValue<value.length){name+=value.charAt(iValue++);for(var i=0;i<names.length;i++){if(name==names[i]){return i+1}}size--}throw"Unknown name at position "+iInit};var checkLiteral=function(){if(value.charAt(iValue)!=format.charAt(iFormat)){throw"Unexpected literal at position "+iValue}iValue++};var iValue=0;for(var iFormat=0;iFormat<format.length;iFormat++){if(literal){if(format.charAt(iFormat)=="'"&&!lookAhead("'")){literal=false}else{checkLiteral()}}else{switch(format.charAt(iFormat)){case"d":day=getNumber("d");break;case"D":getName("D",dayNamesShort,dayNames);break;case"o":doy=getNumber("o");break;case"m":month=getNumber("m");break;case"M":month=getName("M",monthNamesShort,monthNames);break;case"y":year=getNumber("y");break;case"@":var date=new Date(getNumber("@"));year=date.getFullYear();month=date.getMonth()+1;day=date.getDate();break;case"'":if(lookAhead("'")){checkLiteral()}else{literal=true}break;default:checkLiteral()}}}if(year==-1){year=new Date().getFullYear()}else{if(year<100){year+=new Date().getFullYear()-new Date().getFullYear()%100+(year<=shortYearCutoff?0:-100)}}if(doy>-1){month=1;day=doy;do{var dim=this._getDaysInMonth(year,month-1);if(day<=dim){break}month++;day-=dim}while(true)}var date=this._daylightSavingAdjust(new Date(year,month-1,day));if(date.getFullYear()!=year||date.getMonth()+1!=month||date.getDate()!=day){throw"Invalid date"}return date},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TIMESTAMP:"@",W3C:"yy-mm-dd",formatDate:function(format,date,settings){if(!date){return""}var dayNamesShort=(settings?settings.dayNamesShort:null)||this._defaults.dayNamesShort;var dayNames=(settings?settings.dayNames:null)||this._defaults.dayNames;var monthNamesShort=(settings?settings.monthNamesShort:null)||this._defaults.monthNamesShort;var monthNames=(settings?settings.monthNames:null)||this._defaults.monthNames;var lookAhead=function(match){var matches=(iFormat+1<format.length&&format.charAt(iFormat+1)==match);if(matches){iFormat++}return matches};var formatNumber=function(match,value,len){var num=""+value;if(lookAhead(match)){while(num.length<len){num="0"+num}}return num};var formatName=function(match,value,shortNames,longNames){return(lookAhead(match)?longNames[value]:shortNames[value])};var output="";var literal=false;if(date){for(var iFormat=0;iFormat<format.length;iFormat++){if(literal){if(format.charAt(iFormat)=="'"&&!lookAhead("'")){literal=false}else{output+=format.charAt(iFormat)}}else{switch(format.charAt(iFormat)){case"d":output+=formatNumber("d",date.getDate(),2);break;case"D":output+=formatName("D",date.getDay(),dayNamesShort,dayNames);break;case"o":var doy=date.getDate();for(var m=date.getMonth()-1;m>=0;m--){doy+=this._getDaysInMonth(date.getFullYear(),m)}output+=formatNumber("o",doy,3);break;case"m":output+=formatNumber("m",date.getMonth()+1,2);break;case"M":output+=formatName("M",date.getMonth(),monthNamesShort,monthNames);break;case"y":output+=(lookAhead("y")?date.getFullYear():(date.getYear()%100<10?"0":"")+date.getYear()%100);break;case"@":output+=date.getTime();break;case"'":if(lookAhead("'")){output+="'"}else{literal=true}break;default:output+=format.charAt(iFormat)}}}}return output},_possibleChars:function(format){var chars="";var literal=false;for(var iFormat=0;iFormat<format.length;iFormat++){if(literal){if(format.charAt(iFormat)=="'"&&!lookAhead("'")){literal=false}else{chars+=format.charAt(iFormat)}}else{switch(format.charAt(iFormat)){case"d":case"m":case"y":case"@":chars+="0123456789";break;case"D":case"M":return null;case"'":if(lookAhead("'")){chars+="'"}else{literal=true}break;default:chars+=format.charAt(iFormat)}}}return chars},_get:function(inst,name){return inst.settings[name]!==undefined?inst.settings[name]:this._defaults[name]},_setDateFromField:function(inst){var dateFormat=this._get(inst,"dateFormat");var dates=inst.input?inst.input.val():null;inst.endDay=inst.endMonth=inst.endYear=null;var date=defaultDate=this._getDefaultDate(inst);var settings=this._getFormatConfig(inst);try{date=this.parseDate(dateFormat,dates,settings)||defaultDate}catch(event){this.log(event);date=defaultDate}inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear();inst.currentDay=(dates?date.getDate():0);inst.currentMonth=(dates?date.getMonth():0);inst.currentYear=(dates?date.getFullYear():0);this._adjustInstDate(inst)},_getDefaultDate:function(inst){var date=this._determineDate(this._get(inst,"defaultDate"),new Date());var minDate=this._getMinMaxDate(inst,"min",true);var maxDate=this._getMinMaxDate(inst,"max");date=(minDate&&date<minDate?minDate:date);date=(maxDate&&date>maxDate?maxDate:date);return date},_determineDate:function(date,defaultDate){var offsetNumeric=function(offset){var date=new Date();date.setDate(date.getDate()+offset);return date};var offsetString=function(offset,getDaysInMonth){var date=new Date();var year=date.getFullYear();var month=date.getMonth();var day=date.getDate();var pattern=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g;var matches=pattern.exec(offset);while(matches){switch(matches[2]||"d"){case"d":case"D":day+=parseInt(matches[1],10);break;case"w":case"W":day+=parseInt(matches[1],10)*7;break;case"m":case"M":month+=parseInt(matches[1],10);day=Math.min(day,getDaysInMonth(year,month));break;case"y":case"Y":year+=parseInt(matches[1],10);day=Math.min(day,getDaysInMonth(year,month));break}matches=pattern.exec(offset)}return new Date(year,month,day)};date=(date==null?defaultDate:(typeof date=="string"?offsetString(date,this._getDaysInMonth):(typeof date=="number"?(isNaN(date)?defaultDate:offsetNumeric(date)):date)));date=(date&&date.toString()=="Invalid Date"?defaultDate:date);if(date){date.setHours(0);date.setMinutes(0);date.setSeconds(0);date.setMilliseconds(0)}return this._daylightSavingAdjust(date)},_daylightSavingAdjust:function(date){if(!date){return null}date.setHours(date.getHours()>12?date.getHours()+2:0);return date},_setDate:function(inst,date,endDate){var clear=!(date);var origMonth=inst.selectedMonth;var origYear=inst.selectedYear;date=this._determineDate(date,new Date());inst.selectedDay=inst.currentDay=date.getDate();inst.drawMonth=inst.selectedMonth=inst.currentMonth=date.getMonth();inst.drawYear=inst.selectedYear=inst.currentYear=date.getFullYear();if(origMonth!=inst.selectedMonth||origYear!=inst.selectedYear){this._notifyChange(inst)}this._adjustInstDate(inst);if(inst.input){inst.input.val(clear?"":this._formatDate(inst))}},_getDate:function(inst){var startDate=(!inst.currentYear||(inst.input&&inst.input.val()=="")?null:this._daylightSavingAdjust(new Date(inst.currentYear,inst.currentMonth,inst.currentDay)));return startDate},_generateHTML:function(inst){var today=new Date();today=this._daylightSavingAdjust(new Date(today.getFullYear(),today.getMonth(),today.getDate()));var isRTL=this._get(inst,"isRTL");var showButtonPanel=this._get(inst,"showButtonPanel");var hideIfNoPrevNext=this._get(inst,"hideIfNoPrevNext");var navigationAsDateFormat=this._get(inst,"navigationAsDateFormat");var numMonths=this._getNumberOfMonths(inst);var showCurrentAtPos=this._get(inst,"showCurrentAtPos");var stepMonths=this._get(inst,"stepMonths");var stepBigMonths=this._get(inst,"stepBigMonths");var isMultiMonth=(numMonths[0]!=1||numMonths[1]!=1);var currentDate=this._daylightSavingAdjust((!inst.currentDay?new Date(9999,9,9):new Date(inst.currentYear,inst.currentMonth,inst.currentDay)));var minDate=this._getMinMaxDate(inst,"min",true);var maxDate=this._getMinMaxDate(inst,"max");var drawMonth=inst.drawMonth-showCurrentAtPos;var drawYear=inst.drawYear;if(drawMonth<0){drawMonth+=12;drawYear--}if(maxDate){var maxDraw=this._daylightSavingAdjust(new Date(maxDate.getFullYear(),maxDate.getMonth()-numMonths[1]+1,maxDate.getDate()));maxDraw=(minDate&&maxDraw<minDate?minDate:maxDraw);while(this._daylightSavingAdjust(new Date(drawYear,drawMonth,1))>maxDraw){drawMonth--;if(drawMonth<0){drawMonth=11;drawYear--}}}inst.drawMonth=drawMonth;inst.drawYear=drawYear;var prevText=this._get(inst,"prevText");prevText=(!navigationAsDateFormat?prevText:this.formatDate(prevText,this._daylightSavingAdjust(new Date(drawYear,drawMonth-stepMonths,1)),this._getFormatConfig(inst)));var prev=(this._canAdjustMonth(inst,-1,drawYear,drawMonth)?'<a class="ui-datepicker-prev ui-corner-all" onclick="DP_jQuery.datepicker._adjustDate(\'#'+inst.id+"', -"+stepMonths+", 'M');\" title=\""+prevText+'"><span class="ui-icon ui-icon-circle-triangle-'+(isRTL?"e":"w")+'">'+prevText+"</span></a>":(hideIfNoPrevNext?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+prevText+'"><span class="ui-icon ui-icon-circle-triangle-'+(isRTL?"e":"w")+'">'+prevText+"</span></a>"));var nextText=this._get(inst,"nextText");nextText=(!navigationAsDateFormat?nextText:this.formatDate(nextText,this._daylightSavingAdjust(new Date(drawYear,drawMonth+stepMonths,1)),this._getFormatConfig(inst)));var next=(this._canAdjustMonth(inst,+1,drawYear,drawMonth)?'<a class="ui-datepicker-next ui-corner-all" onclick="DP_jQuery.datepicker._adjustDate(\'#'+inst.id+"', +"+stepMonths+", 'M');\" title=\""+nextText+'"><span class="ui-icon ui-icon-circle-triangle-'+(isRTL?"w":"e")+'">'+nextText+"</span></a>":(hideIfNoPrevNext?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+nextText+'"><span class="ui-icon ui-icon-circle-triangle-'+(isRTL?"w":"e")+'">'+nextText+"</span></a>"));var currentText=this._get(inst,"currentText");var gotoDate=(this._get(inst,"gotoCurrent")&&inst.currentDay?currentDate:today);currentText=(!navigationAsDateFormat?currentText:this.formatDate(currentText,gotoDate,this._getFormatConfig(inst)));var controls=(!inst.inline?'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" onclick="DP_jQuery.datepicker._hideDatepicker();">'+this._get(inst,"closeText")+"</button>":"");var buttonPanel=(showButtonPanel)?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(isRTL?controls:"")+(this._isInRange(inst,gotoDate)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" onclick="DP_jQuery.datepicker._gotoToday(\'#'+inst.id+"');\">"+currentText+"</button>":"")+(isRTL?"":controls)+"</div>":"";var firstDay=parseInt(this._get(inst,"firstDay"),10);firstDay=(isNaN(firstDay)?0:firstDay);var dayNames=this._get(inst,"dayNames");var dayNamesShort=this._get(inst,"dayNamesShort");var dayNamesMin=this._get(inst,"dayNamesMin");var monthNames=this._get(inst,"monthNames");var monthNamesShort=this._get(inst,"monthNamesShort");var beforeShowDay=this._get(inst,"beforeShowDay");var showOtherMonths=this._get(inst,"showOtherMonths");var calculateWeek=this._get(inst,"calculateWeek")||this.iso8601Week;var endDate=inst.endDay?this._daylightSavingAdjust(new Date(inst.endYear,inst.endMonth,inst.endDay)):currentDate;var defaultDate=this._getDefaultDate(inst);var html="";for(var row=0;row<numMonths[0];row++){var group="";for(var col=0;col<numMonths[1];col++){var selectedDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,inst.selectedDay));var cornerClass=" ui-corner-all";var calender="";if(isMultiMonth){calender+='<div class="ui-datepicker-group ui-datepicker-group-';switch(col){case 0:calender+="first";cornerClass=" ui-corner-"+(isRTL?"right":"left");break;case numMonths[1]-1:calender+="last";cornerClass=" ui-corner-"+(isRTL?"left":"right");break;default:calender+="middle";cornerClass="";break}calender+='">'}calender+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+cornerClass+'">'+(/all|left/.test(cornerClass)&&row==0?(isRTL?next:prev):"")+(/all|right/.test(cornerClass)&&row==0?(isRTL?prev:next):"")+this._generateMonthYearHeader(inst,drawMonth,drawYear,minDate,maxDate,selectedDate,row>0||col>0,monthNames,monthNamesShort)+'</div><table class="ui-datepicker-calendar"><thead><tr>';var thead="";for(var dow=0;dow<7;dow++){var day=(dow+firstDay)%7;thead+="<th"+((dow+firstDay+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+dayNames[day]+'">'+dayNamesMin[day]+"</span></th>"}calender+=thead+"</tr></thead><tbody>";var daysInMonth=this._getDaysInMonth(drawYear,drawMonth);if(drawYear==inst.selectedYear&&drawMonth==inst.selectedMonth){inst.selectedDay=Math.min(inst.selectedDay,daysInMonth)}var leadDays=(this._getFirstDayOfMonth(drawYear,drawMonth)-firstDay+7)%7;var numRows=(isMultiMonth?6:Math.ceil((leadDays+daysInMonth)/7));var printDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,1-leadDays));for(var dRow=0;dRow<numRows;dRow++){calender+="<tr>";var tbody="";for(var dow=0;dow<7;dow++){var daySettings=(beforeShowDay?beforeShowDay.apply((inst.input?inst.input[0]:null),[printDate]):[true,""]);var otherMonth=(printDate.getMonth()!=drawMonth);var unselectable=otherMonth||!daySettings[0]||(minDate&&printDate<minDate)||(maxDate&&printDate>maxDate);tbody+='<td class="'+((dow+firstDay+6)%7>=5?" ui-datepicker-week-end":"")+(otherMonth?" ui-datepicker-other-month":"")+((printDate.getTime()==selectedDate.getTime()&&drawMonth==inst.selectedMonth&&inst._keyEvent)||(defaultDate.getTime()==printDate.getTime()&&defaultDate.getTime()==selectedDate.getTime())?" "+this._dayOverClass:"")+(unselectable?" "+this._unselectableClass+" ui-state-disabled":"")+(otherMonth&&!showOtherMonths?"":" "+daySettings[1]+(printDate.getTime()>=currentDate.getTime()&&printDate.getTime()<=endDate.getTime()?" "+this._currentClass:"")+(printDate.getTime()==today.getTime()?" ui-datepicker-today":""))+'"'+((!otherMonth||showOtherMonths)&&daySettings[2]?' title="'+daySettings[2]+'"':"")+(unselectable?"":" onclick=\"DP_jQuery.datepicker._selectDay('#"+inst.id+"',"+drawMonth+","+drawYear+', this);return false;"')+">"+(otherMonth?(showOtherMonths?printDate.getDate():"&#xa0;"):(unselectable?'<span class="ui-state-default">'+printDate.getDate()+"</span>":'<a class="ui-state-default'+(printDate.getTime()==today.getTime()?" ui-state-highlight":"")+(printDate.getTime()>=currentDate.getTime()&&printDate.getTime()<=endDate.getTime()?" ui-state-active":"")+'" href="#">'+printDate.getDate()+"</a>"))+"</td>";printDate.setDate(printDate.getDate()+1);printDate=this._daylightSavingAdjust(printDate)}calender+=tbody+"</tr>"}drawMonth++;if(drawMonth>11){drawMonth=0;drawYear++}calender+="</tbody></table>"+(isMultiMonth?"</div>"+((numMonths[0]>0&&col==numMonths[1]-1)?'<div class="ui-datepicker-row-break"></div>':""):"");group+=calender}html+=group}html+=buttonPanel+($.browser.msie&&parseInt($.browser.version,10)<7&&!inst.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':"");inst._keyEvent=false;return html},_generateMonthYearHeader:function(inst,drawMonth,drawYear,minDate,maxDate,selectedDate,secondary,monthNames,monthNamesShort){minDate=(inst.rangeStart&&minDate&&selectedDate<minDate?selectedDate:minDate);var changeMonth=this._get(inst,"changeMonth");var changeYear=this._get(inst,"changeYear");var showMonthAfterYear=this._get(inst,"showMonthAfterYear");var html='<div class="ui-datepicker-title">';var monthHtml="";if(secondary||!changeMonth){monthHtml+='<span class="ui-datepicker-month">'+monthNames[drawMonth]+"</span> "}else{var inMinYear=(minDate&&minDate.getFullYear()==drawYear);var inMaxYear=(maxDate&&maxDate.getFullYear()==drawYear);monthHtml+='<select class="ui-datepicker-month" onchange="DP_jQuery.datepicker._selectMonthYear(\'#'+inst.id+"', this, 'M');\" onclick=\"DP_jQuery.datepicker._clickMonthYear('#"+inst.id+"');\">";for(var month=0;month<12;month++){if((!inMinYear||month>=minDate.getMonth())&&(!inMaxYear||month<=maxDate.getMonth())){monthHtml+='<option value="'+month+'"'+(month==drawMonth?' selected="selected"':"")+">"+monthNamesShort[month]+"</option>"}}monthHtml+="</select>"}if(!showMonthAfterYear){html+=monthHtml+((secondary||changeMonth||changeYear)&&(!(changeMonth&&changeYear))?"&#xa0;":"")}if(secondary||!changeYear){html+='<span class="ui-datepicker-year">'+drawYear+"</span>"}else{var years=this._get(inst,"yearRange").split(":");var year=0;var endYear=0;if(years.length!=2){year=drawYear-10;endYear=drawYear+10}else{if(years[0].charAt(0)=="+"||years[0].charAt(0)=="-"){year=drawYear+parseInt(years[0],10);endYear=drawYear+parseInt(years[1],10)}else{year=parseInt(years[0],10);endYear=parseInt(years[1],10)}}year=(minDate?Math.max(year,minDate.getFullYear()):year);endYear=(maxDate?Math.min(endYear,maxDate.getFullYear()):endYear);html+='<select class="ui-datepicker-year" onchange="DP_jQuery.datepicker._selectMonthYear(\'#'+inst.id+"', this, 'Y');\" onclick=\"DP_jQuery.datepicker._clickMonthYear('#"+inst.id+"');\">";for(;year<=endYear;year++){html+='<option value="'+year+'"'+(year==drawYear?' selected="selected"':"")+">"+year+"</option>"}html+="</select>"}if(showMonthAfterYear){html+=(secondary||changeMonth||changeYear?"&#xa0;":"")+monthHtml}html+="</div>";return html},_adjustInstDate:function(inst,offset,period){var year=inst.drawYear+(period=="Y"?offset:0);var month=inst.drawMonth+(period=="M"?offset:0);var day=Math.min(inst.selectedDay,this._getDaysInMonth(year,month))+(period=="D"?offset:0);var date=this._daylightSavingAdjust(new Date(year,month,day));var minDate=this._getMinMaxDate(inst,"min",true);var maxDate=this._getMinMaxDate(inst,"max");date=(minDate&&date<minDate?minDate:date);date=(maxDate&&date>maxDate?maxDate:date);inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear();if(period=="M"||period=="Y"){this._notifyChange(inst)}},_notifyChange:function(inst){var onChange=this._get(inst,"onChangeMonthYear");if(onChange){onChange.apply((inst.input?inst.input[0]:null),[inst.selectedYear,inst.selectedMonth+1,inst])}},_getNumberOfMonths:function(inst){var numMonths=this._get(inst,"numberOfMonths");return(numMonths==null?[1,1]:(typeof numMonths=="number"?[1,numMonths]:numMonths))},_getMinMaxDate:function(inst,minMax,checkRange){var date=this._determineDate(this._get(inst,minMax+"Date"),null);return(!checkRange||!inst.rangeStart?date:(!date||inst.rangeStart>date?inst.rangeStart:date))},_getDaysInMonth:function(year,month){return 32-new Date(year,month,32).getDate()},_getFirstDayOfMonth:function(year,month){return new Date(year,month,1).getDay()},_canAdjustMonth:function(inst,offset,curYear,curMonth){var numMonths=this._getNumberOfMonths(inst);var date=this._daylightSavingAdjust(new Date(curYear,curMonth+(offset<0?offset:numMonths[1]),1));if(offset<0){date.setDate(this._getDaysInMonth(date.getFullYear(),date.getMonth()))}return this._isInRange(inst,date)},_isInRange:function(inst,date){var newMinDate=(!inst.rangeStart?null:this._daylightSavingAdjust(new Date(inst.selectedYear,inst.selectedMonth,inst.selectedDay)));newMinDate=(newMinDate&&inst.rangeStart<newMinDate?inst.rangeStart:newMinDate);var minDate=newMinDate||this._getMinMaxDate(inst,"min");var maxDate=this._getMinMaxDate(inst,"max");return((!minDate||date>=minDate)&&(!maxDate||date<=maxDate))},_getFormatConfig:function(inst){var shortYearCutoff=this._get(inst,"shortYearCutoff");shortYearCutoff=(typeof shortYearCutoff!="string"?shortYearCutoff:new Date().getFullYear()%100+parseInt(shortYearCutoff,10));return{shortYearCutoff:shortYearCutoff,dayNamesShort:this._get(inst,"dayNamesShort"),dayNames:this._get(inst,"dayNames"),monthNamesShort:this._get(inst,"monthNamesShort"),monthNames:this._get(inst,"monthNames")}},_formatDate:function(inst,day,month,year){if(!day){inst.currentDay=inst.selectedDay;inst.currentMonth=inst.selectedMonth;inst.currentYear=inst.selectedYear}var date=(day?(typeof day=="object"?day:this._daylightSavingAdjust(new Date(year,month,day))):this._daylightSavingAdjust(new Date(inst.currentYear,inst.currentMonth,inst.currentDay)));return this.formatDate(this._get(inst,"dateFormat"),date,this._getFormatConfig(inst))}});function extendRemove(target,props){$.extend(target,props);for(var name in props){if(props[name]==null||props[name]==undefined){target[name]=props[name]}}return target}function isArray(a){return(a&&(($.browser.safari&&typeof a=="object"&&a.length)||(a.constructor&&a.constructor.toString().match(/\Array\(\)/))))}$.fn.datepicker=function(options){if(!$.datepicker.initialized){$(document).mousedown($.datepicker._checkExternalClick).find("body").append($.datepicker.dpDiv);$.datepicker.initialized=true}var otherArgs=Array.prototype.slice.call(arguments,1);if(typeof options=="string"&&(options=="isDisabled"||options=="getDate")){return $.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this[0]].concat(otherArgs))}if(options=="option"&&arguments.length==2&&typeof arguments[1]=="string"){return $.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this[0]].concat(otherArgs))}return this.each(function(){typeof options=="string"?$.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this].concat(otherArgs)):$.datepicker._attachDatepicker(this,options)})};$.datepicker=new Datepicker();$.datepicker.initialized=false;$.datepicker.uuid=new Date().getTime();$.datepicker.version="1.7.2";window.DP_jQuery=$})(jQuery);(function(b){b.widget("ui.progressbar",{_init:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this._valueMin(),"aria-valuemax":this._valueMax(),"aria-valuenow":this._value()});this.valueDiv=b('<div class="ui-progressbar-value ui-widget-header ui-corner-left"></div>').appendTo(this.element);this._refreshValue()},destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow").removeData("progressbar").unbind(".progressbar");this.valueDiv.remove();b.widget.prototype.destroy.apply(this,arguments)},value:function(a){if(a===undefined){return this._value()}this._setData("value",a);return this},_setData:function(a,e){switch(a){case"value":this.options.value=e;this._refreshValue();this._trigger("change",null,{});break}b.widget.prototype._setData.apply(this,arguments)},_value:function(){var a=this.options.value;if(a<this._valueMin()){a=this._valueMin()}if(a>this._valueMax()){a=this._valueMax()}return a},_valueMin:function(){var a=0;return a},_valueMax:function(){var a=100;return a},_refreshValue:function(){var a=this.value();this.valueDiv[a==this._valueMax()?"addClass":"removeClass"]("ui-corner-right");this.valueDiv.width(a+"%");this.element.attr("aria-valuenow",a)}});b.extend(b.ui.progressbar,{version:"1.7.2",defaults:{value:0}})})(jQuery);jQuery.effects||(function(i){i.effects={version:"1.7.2",save:function(b,a){for(var c=0;c<a.length;c++){if(a[c]!==null){b.data("ec.storage."+a[c],b[0].style[a[c]])}}},restore:function(b,a){for(var c=0;c<a.length;c++){if(a[c]!==null){b.css(a[c],b.data("ec.storage."+a[c]))}}},setMode:function(b,a){if(a=="toggle"){a=b.is(":hidden")?"show":"hide"}return a},getBaseline:function(c,b){var a,e;switch(c[0]){case"top":a=0;break;case"middle":a=0.5;break;case"bottom":a=1;break;default:a=c[0]/b.height}switch(c[1]){case"left":e=0;break;case"center":e=0.5;break;case"right":e=1;break;default:e=c[1]/b.width}return{x:e,y:a}},createWrapper:function(k){if(k.parent().is(".ui-effects-wrapper")){return k.parent()}var e={width:k.outerWidth(true),height:k.outerHeight(true),"float":k.css("float")};k.wrap('<div class="ui-effects-wrapper" style="font-size:100%;background:transparent;border:none;margin:0;padding:0"></div>');var a=k.parent();if(k.css("position")=="static"){a.css({position:"relative"});k.css({position:"relative"})}else{var b=k.css("top");if(isNaN(parseInt(b,10))){b="auto"}var c=k.css("left");if(isNaN(parseInt(c,10))){c="auto"}a.css({position:k.css("position"),top:b,left:c,zIndex:k.css("z-index")}).show();k.css({position:"relative",top:0,left:0})}a.css(e);return a},removeWrapper:function(a){if(a.parent().is(".ui-effects-wrapper")){return a.parent().replaceWith(a)}return a},setTransition:function(c,a,e,b){b=b||{};i.each(a,function(l,n){unit=c.cssUnit(n);if(unit[0]>0){b[n]=unit[0]*e+unit[1]}});return b},animateClass:function(e,c,a,b){var n=(typeof a=="function"?a:(b?b:null));var l=(typeof a=="string"?a:null);return this.each(function(){var v={};var x=i(this);var w=x.attr("style")||"";if(typeof w=="object"){w=w.cssText}if(e.toggle){x.hasClass(e.toggle)?e.remove=e.toggle:e.add=e.toggle}var s=i.extend({},(document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle));if(e.add){x.addClass(e.add)}if(e.remove){x.removeClass(e.remove)}var k=i.extend({},(document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle));if(e.add){x.removeClass(e.add)}if(e.remove){x.addClass(e.remove)}for(var u in k){if(typeof k[u]!="function"&&k[u]&&u.indexOf("Moz")==-1&&u.indexOf("length")==-1&&k[u]!=s[u]&&(u.match(/color/i)||(!u.match(/color/i)&&!isNaN(parseInt(k[u],10))))&&(s.position!="static"||(s.position=="static"&&!u.match(/left|top|bottom|right/)))){v[u]=k[u]}}x.animate(v,c,l,function(){if(typeof i(this).attr("style")=="object"){i(this).attr("style")["cssText"]="";i(this).attr("style")["cssText"]=w}else{i(this).attr("style",w)}if(e.add){i(this).addClass(e.add)}if(e.remove){i(this).removeClass(e.remove)}if(n){n.apply(this,arguments)}})})}};function j(e,k){var b=e[1]&&e[1].constructor==Object?e[1]:{};if(k){b.mode=k}var c=e[1]&&e[1].constructor!=Object?e[1]:(b.duration?b.duration:e[2]);c=i.fx.off?0:typeof c==="number"?c:i.fx.speeds[c]||i.fx.speeds._default;var a=b.callback||(i.isFunction(e[1])&&e[1])||(i.isFunction(e[2])&&e[2])||(i.isFunction(e[3])&&e[3]);return[e[0],b,c,a]}i.fn.extend({_show:i.fn.show,_hide:i.fn.hide,__toggle:i.fn.toggle,_addClass:i.fn.addClass,_removeClass:i.fn.removeClass,_toggleClass:i.fn.toggleClass,effect:function(c,e,b,a){return i.effects[c]?i.effects[c].call(this,{method:c,options:e||{},duration:b,callback:a}):null},show:function(){if(!arguments[0]||(arguments[0].constructor==Number||(/(slow|normal|fast)/).test(arguments[0]))){return this._show.apply(this,arguments)}else{return this.effect.apply(this,j(arguments,"show"))}},hide:function(){if(!arguments[0]||(arguments[0].constructor==Number||(/(slow|normal|fast)/).test(arguments[0]))){return this._hide.apply(this,arguments)}else{return this.effect.apply(this,j(arguments,"hide"))}},toggle:function(){if(!arguments[0]||(arguments[0].constructor==Number||(/(slow|normal|fast)/).test(arguments[0]))||(i.isFunction(arguments[0])||typeof arguments[0]=="boolean")){return this.__toggle.apply(this,arguments)}else{return this.effect.apply(this,j(arguments,"toggle"))}},addClass:function(c,e,a,b){return e?i.effects.animateClass.apply(this,[{add:c},e,a,b]):this._addClass(c)},removeClass:function(c,e,a,b){return e?i.effects.animateClass.apply(this,[{remove:c},e,a,b]):this._removeClass(c)},toggleClass:function(c,e,a,b){return((typeof e!=="boolean")&&e)?i.effects.animateClass.apply(this,[{toggle:c},e,a,b]):this._toggleClass(c,e)},morph:function(k,c,e,a,b){return i.effects.animateClass.apply(this,[{add:c,remove:k},e,a,b])},switchClass:function(){return this.morph.apply(this,arguments)},cssUnit:function(c){var b=this.css(c),a=[];i.each(["em","px","%","pt"],function(l,e){if(b.indexOf(e)>0){a=[parseFloat(b),e]}});return a}});i.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","color","outlineColor"],function(a,b){i.fx.step[b]=function(c){if(c.state==0){c.start=h(c.elem,b);c.end=f(c.end)}c.elem.style[b]="rgb("+[Math.max(Math.min(parseInt((c.pos*(c.end[0]-c.start[0]))+c.start[0],10),255),0),Math.max(Math.min(parseInt((c.pos*(c.end[1]-c.start[1]))+c.start[1],10),255),0),Math.max(Math.min(parseInt((c.pos*(c.end[2]-c.start[2]))+c.start[2],10),255),0)].join(",")+")"}});function f(a){var b;if(a&&a.constructor==Array&&a.length==3){return a}if(b=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(a)){return[parseInt(b[1],10),parseInt(b[2],10),parseInt(b[3],10)]}if(b=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(a)){return[parseFloat(b[1])*2.55,parseFloat(b[2])*2.55,parseFloat(b[3])*2.55]}if(b=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(a)){return[parseInt(b[1],16),parseInt(b[2],16),parseInt(b[3],16)]}if(b=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(a)){return[parseInt(b[1]+b[1],16),parseInt(b[2]+b[2],16),parseInt(b[3]+b[3],16)]}if(b=/rgba\(0, 0, 0, 0\)/.exec(a)){return g.transparent}return g[i.trim(a).toLowerCase()]}function h(a,c){var b;do{b=i.curCSS(a,c);if(b!=""&&b!="transparent"||i.nodeName(a,"body")){break}c="backgroundColor"}while(a=a.parentNode);return f(b)}var g={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]};i.easing.jswing=i.easing.swing;i.extend(i.easing,{def:"easeOutQuad",swing:function(e,c,k,a,b){return i.easing[i.easing.def](e,c,k,a,b)},easeInQuad:function(e,c,k,a,b){return a*(c/=b)*c+k},easeOutQuad:function(e,c,k,a,b){return -a*(c/=b)*(c-2)+k},easeInOutQuad:function(e,c,k,a,b){if((c/=b/2)<1){return a/2*c*c+k}return -a/2*((--c)*(c-2)-1)+k},easeInCubic:function(e,c,k,a,b){return a*(c/=b)*c*c+k},easeOutCubic:function(e,c,k,a,b){return a*((c=c/b-1)*c*c+1)+k},easeInOutCubic:function(e,c,k,a,b){if((c/=b/2)<1){return a/2*c*c*c+k}return a/2*((c-=2)*c*c+2)+k},easeInQuart:function(e,c,k,a,b){return a*(c/=b)*c*c*c+k},easeOutQuart:function(e,c,k,a,b){return -a*((c=c/b-1)*c*c*c-1)+k},easeInOutQuart:function(e,c,k,a,b){if((c/=b/2)<1){return a/2*c*c*c*c+k}return -a/2*((c-=2)*c*c*c-2)+k},easeInQuint:function(e,c,k,a,b){return a*(c/=b)*c*c*c*c+k},easeOutQuint:function(e,c,k,a,b){return a*((c=c/b-1)*c*c*c*c+1)+k},easeInOutQuint:function(e,c,k,a,b){if((c/=b/2)<1){return a/2*c*c*c*c*c+k}return a/2*((c-=2)*c*c*c*c+2)+k},easeInSine:function(e,c,k,a,b){return -a*Math.cos(c/b*(Math.PI/2))+a+k},easeOutSine:function(e,c,k,a,b){return a*Math.sin(c/b*(Math.PI/2))+k},easeInOutSine:function(e,c,k,a,b){return -a/2*(Math.cos(Math.PI*c/b)-1)+k},easeInExpo:function(e,c,k,a,b){return(c==0)?k:a*Math.pow(2,10*(c/b-1))+k},easeOutExpo:function(e,c,k,a,b){return(c==b)?k+a:a*(-Math.pow(2,-10*c/b)+1)+k},easeInOutExpo:function(e,c,k,a,b){if(c==0){return k}if(c==b){return k+a}if((c/=b/2)<1){return a/2*Math.pow(2,10*(c-1))+k}return a/2*(-Math.pow(2,-10*--c)+2)+k},easeInCirc:function(e,c,k,a,b){return -a*(Math.sqrt(1-(c/=b)*c)-1)+k},easeOutCirc:function(e,c,k,a,b){return a*Math.sqrt(1-(c=c/b-1)*c)+k},easeInOutCirc:function(e,c,k,a,b){if((c/=b/2)<1){return -a/2*(Math.sqrt(1-c*c)-1)+k}return a/2*(Math.sqrt(1-(c-=2)*c)+1)+k},easeInElastic:function(p,n,q,a,b){var e=1.70158;var c=0;var o=a;if(n==0){return q}if((n/=b)==1){return q+a}if(!c){c=b*0.3}if(o<Math.abs(a)){o=a;var e=c/4}else{var e=c/(2*Math.PI)*Math.asin(a/o)}return -(o*Math.pow(2,10*(n-=1))*Math.sin((n*b-e)*(2*Math.PI)/c))+q},easeOutElastic:function(p,n,q,a,b){var e=1.70158;var c=0;var o=a;if(n==0){return q}if((n/=b)==1){return q+a}if(!c){c=b*0.3}if(o<Math.abs(a)){o=a;var e=c/4}else{var e=c/(2*Math.PI)*Math.asin(a/o)}return o*Math.pow(2,-10*n)*Math.sin((n*b-e)*(2*Math.PI)/c)+a+q},easeInOutElastic:function(p,n,q,a,b){var e=1.70158;var c=0;var o=a;if(n==0){return q}if((n/=b/2)==2){return q+a}if(!c){c=b*(0.3*1.5)}if(o<Math.abs(a)){o=a;var e=c/4}else{var e=c/(2*Math.PI)*Math.asin(a/o)}if(n<1){return -0.5*(o*Math.pow(2,10*(n-=1))*Math.sin((n*b-e)*(2*Math.PI)/c))+q}return o*Math.pow(2,-10*(n-=1))*Math.sin((n*b-e)*(2*Math.PI)/c)*0.5+a+q},easeInBack:function(l,e,n,a,b,c){if(c==undefined){c=1.70158}return a*(e/=b)*e*((c+1)*e-c)+n},easeOutBack:function(l,e,n,a,b,c){if(c==undefined){c=1.70158}return a*((e=e/b-1)*e*((c+1)*e+c)+1)+n},easeInOutBack:function(l,e,n,a,b,c){if(c==undefined){c=1.70158}if((e/=b/2)<1){return a/2*(e*e*(((c*=(1.525))+1)*e-c))+n}return a/2*((e-=2)*e*(((c*=(1.525))+1)*e+c)+2)+n},easeInBounce:function(e,c,k,a,b){return a-i.easing.easeOutBounce(e,b-c,0,a,b)+k},easeOutBounce:function(e,c,k,a,b){if((c/=b)<(1/2.75)){return a*(7.5625*c*c)+k}else{if(c<(2/2.75)){return a*(7.5625*(c-=(1.5/2.75))*c+0.75)+k}else{if(c<(2.5/2.75)){return a*(7.5625*(c-=(2.25/2.75))*c+0.9375)+k}else{return a*(7.5625*(c-=(2.625/2.75))*c+0.984375)+k}}}},easeInOutBounce:function(e,c,k,a,b){if(c<b/2){return i.easing.easeInBounce(e,c*2,0,a,b)*0.5+k}return i.easing.easeOutBounce(e,c*2-b,0,a,b)*0.5+a*0.5+k}})})(jQuery);(function(b){b.effects.blind=function(a){return this.queue(function(){var r=b(this),s=["position","top","left"];var n=b.effects.setMode(r,a.options.mode||"hide");var o=a.options.direction||"vertical";b.effects.save(r,s);r.show();var k=b.effects.createWrapper(r).css({overflow:"hidden"});var q=(o=="vertical")?"height":"width";var l=(o=="vertical")?k.height():k.width();if(n=="show"){k.css(q,0)}var p={};p[q]=n=="show"?l:0;k.animate(p,a.duration,a.options.easing,function(){if(n=="hide"){r.hide()}b.effects.restore(r,s);b.effects.removeWrapper(r);if(a.callback){a.callback.apply(r[0],arguments)}r.dequeue()})})}})(jQuery);(function(b){b.effects.bounce=function(a){return this.queue(function(){var B=b(this),u=["position","top","left"];var v=b.effects.setMode(B,a.options.mode||"effect");var r=a.options.direction||"up";var D=a.options.distance||20;var C=a.options.times||5;var z=a.duration||250;if(/show|hide/.test(v)){u.push("opacity")}b.effects.save(B,u);B.show();b.effects.createWrapper(B);var A=(r=="up"||r=="down")?"top":"left";var i=(r=="up"||r=="left")?"pos":"neg";var D=a.options.distance||(A=="top"?B.outerHeight({margin:true})/3:B.outerWidth({margin:true})/3);if(v=="show"){B.css("opacity",0).css(A,i=="pos"?-D:D)}if(v=="hide"){D=D/(C*2)}if(v!="hide"){C--}if(v=="show"){var x={opacity:1};x[A]=(i=="pos"?"+=":"-=")+D;B.animate(x,z/2,a.options.easing);D=D/2;C--}for(var w=0;w<C;w++){var q={},s={};q[A]=(i=="pos"?"-=":"+=")+D;s[A]=(i=="pos"?"+=":"-=")+D;B.animate(q,z/2,a.options.easing).animate(s,z/2,a.options.easing);D=(v=="hide")?D*2:D/2}if(v=="hide"){var x={opacity:0};x[A]=(i=="pos"?"-=":"+=")+D;B.animate(x,z/2,a.options.easing,function(){B.hide();b.effects.restore(B,u);b.effects.removeWrapper(B);if(a.callback){a.callback.apply(this,arguments)}})}else{var q={},s={};q[A]=(i=="pos"?"-=":"+=")+D;s[A]=(i=="pos"?"+=":"-=")+D;B.animate(q,z/2,a.options.easing).animate(s,z/2,a.options.easing,function(){b.effects.restore(B,u);b.effects.removeWrapper(B);if(a.callback){a.callback.apply(this,arguments)}})}B.queue("fx",function(){B.dequeue()});B.dequeue()})}})(jQuery);(function(b){b.effects.clip=function(a){return this.queue(function(){var r=b(this),n=["position","top","left","height","width"];var o=b.effects.setMode(r,a.options.mode||"hide");var l=a.options.direction||"vertical";b.effects.save(r,n);r.show();var v=b.effects.createWrapper(r).css({overflow:"hidden"});var s=r[0].tagName=="IMG"?v:r;var q={size:(l=="vertical")?"height":"width",position:(l=="vertical")?"top":"left"};var u=(l=="vertical")?s.height():s.width();if(o=="show"){s.css(q.size,0);s.css(q.position,u/2)}var p={};p[q.size]=o=="show"?u:0;p[q.position]=o=="show"?0:u/2;s.animate(p,{queue:false,duration:a.duration,easing:a.options.easing,complete:function(){if(o=="hide"){r.hide()}b.effects.restore(r,n);b.effects.removeWrapper(r);if(a.callback){a.callback.apply(r[0],arguments)}r.dequeue()}})})}})(jQuery);(function(b){b.effects.drop=function(a){return this.queue(function(){var q=b(this),r=["position","top","left","opacity"];var l=b.effects.setMode(q,a.options.mode||"hide");var n=a.options.direction||"left";b.effects.save(q,r);q.show();b.effects.createWrapper(q);var p=(n=="up"||n=="down")?"top":"left";var s=(n=="up"||n=="left")?"pos":"neg";var k=a.options.distance||(p=="top"?q.outerHeight({margin:true})/2:q.outerWidth({margin:true})/2);if(l=="show"){q.css("opacity",0).css(p,s=="pos"?-k:k)}var o={opacity:l=="show"?1:0};o[p]=(l=="show"?(s=="pos"?"+=":"-="):(s=="pos"?"-=":"+="))+k;q.animate(o,{queue:false,duration:a.duration,easing:a.options.easing,complete:function(){if(l=="hide"){q.hide()}b.effects.restore(q,r);b.effects.removeWrapper(q);if(a.callback){a.callback.apply(this,arguments)}q.dequeue()}})})}})(jQuery);(function(b){b.effects.explode=function(a){return this.queue(function(){var j=a.options.pieces?Math.round(Math.sqrt(a.options.pieces)):3;var q=a.options.pieces?Math.round(Math.sqrt(a.options.pieces)):3;a.options.mode=a.options.mode=="toggle"?(b(this).is(":visible")?"hide":"show"):a.options.mode;var n=b(this).show().css("visibility","hidden");var i=n.offset();i.top-=parseInt(n.css("marginTop"),10)||0;i.left-=parseInt(n.css("marginLeft"),10)||0;var o=n.outerWidth(true);var s=n.outerHeight(true);for(var p=0;p<j;p++){for(var r=0;r<q;r++){n.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-r*(o/q),top:-p*(s/j)}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:o/q,height:s/j,left:i.left+r*(o/q)+(a.options.mode=="show"?(r-Math.floor(q/2))*(o/q):0),top:i.top+p*(s/j)+(a.options.mode=="show"?(p-Math.floor(j/2))*(s/j):0),opacity:a.options.mode=="show"?0:1}).animate({left:i.left+r*(o/q)+(a.options.mode=="show"?0:(r-Math.floor(q/2))*(o/q)),top:i.top+p*(s/j)+(a.options.mode=="show"?0:(p-Math.floor(j/2))*(s/j)),opacity:a.options.mode=="show"?1:0},a.duration||500)}}setTimeout(function(){a.options.mode=="show"?n.css({visibility:"visible"}):n.css({visibility:"visible"}).hide();if(a.callback){a.callback.apply(n[0])}n.dequeue();b("div.ui-effects-explode").remove()},a.duration||500)})}})(jQuery);(function(b){b.effects.fold=function(a){return this.queue(function(){var B=b(this),u=["position","top","left"];var x=b.effects.setMode(B,a.options.mode||"hide");var p=a.options.size||15;var q=!(!a.options.horizFirst);var z=a.duration?a.duration/2:b.fx.speeds._default/2;b.effects.save(B,u);B.show();var C=b.effects.createWrapper(B).css({overflow:"hidden"});var w=((x=="show")!=q);var A=w?["width","height"]:["height","width"];var D=w?[C.width(),C.height()]:[C.height(),C.width()];var v=/([0-9]+)%/.exec(p);if(v){p=parseInt(v[1],10)/100*D[x=="hide"?0:1]}if(x=="show"){C.css(q?{height:0,width:p}:{height:p,width:0})}var r={},s={};r[A[0]]=x=="show"?D[0]:p;s[A[1]]=x=="show"?D[1]:0;C.animate(r,z,a.options.easing).animate(s,z,a.options.easing,function(){if(x=="hide"){B.hide()}b.effects.restore(B,u);b.effects.removeWrapper(B);if(a.callback){a.callback.apply(B[0],arguments)}B.dequeue()})})}})(jQuery);(function(b){b.effects.highlight=function(a){return this.queue(function(){var l=b(this),n=["backgroundImage","backgroundColor","opacity"];var i=b.effects.setMode(l,a.options.mode||"show");var o=a.options.color||"#ffff99";var j=l.css("backgroundColor");b.effects.save(l,n);l.show();l.css({backgroundImage:"none",backgroundColor:o});var k={backgroundColor:j};if(i=="hide"){k.opacity=0}l.animate(k,{queue:false,duration:a.duration,easing:a.options.easing,complete:function(){if(i=="hide"){l.hide()}b.effects.restore(l,n);if(i=="show"&&b.browser.msie){this.style.removeAttribute("filter")}if(a.callback){a.callback.apply(this,arguments)}l.dequeue()}})})}})(jQuery);(function(b){b.effects.pulsate=function(a){return this.queue(function(){var k=b(this);var h=b.effects.setMode(k,a.options.mode||"show");var i=a.options.times||5;var j=a.duration?a.duration/2:b.fx.speeds._default/2;if(h=="hide"){i--}if(k.is(":hidden")){k.css("opacity",0);k.show();k.animate({opacity:1},j,a.options.easing);i=i-2}for(var l=0;l<i;l++){k.animate({opacity:0},j,a.options.easing).animate({opacity:1},j,a.options.easing)}if(h=="hide"){k.animate({opacity:0},j,a.options.easing,function(){k.hide();if(a.callback){a.callback.apply(this,arguments)}})}else{k.animate({opacity:0},j,a.options.easing).animate({opacity:1},j,a.options.easing,function(){if(a.callback){a.callback.apply(this,arguments)}})}k.queue("fx",function(){k.dequeue()});k.dequeue()})}})(jQuery);(function(b){b.effects.puff=function(a){return this.queue(function(){var k=b(this);var o=b.extend(true,{},a.options);var i=b.effects.setMode(k,a.options.mode||"hide");var j=parseInt(a.options.percent,10)||150;o.fade=true;var l={height:k.height(),width:k.width()};var n=j/100;k.from=(i=="hide")?l:{height:l.height*n,width:l.width*n};o.from=k.from;o.percent=(i=="hide")?j:100;o.mode=i;k.effect("scale",o,a.duration,a.callback);k.dequeue()})};b.effects.scale=function(a){return this.queue(function(){var o=b(this);var r=b.extend(true,{},a.options);var k=b.effects.setMode(o,a.options.mode||"effect");var n=parseInt(a.options.percent,10)||(parseInt(a.options.percent,10)==0?0:(k=="hide"?0:100));var l=a.options.direction||"both";var s=a.options.origin;if(k!="effect"){r.origin=s||["middle","center"];r.restore=true}var p={height:o.height(),width:o.width()};o.from=a.options.from||(k=="show"?{height:0,width:0}:p);var q={y:l!="horizontal"?(n/100):1,x:l!="vertical"?(n/100):1};o.to={height:p.height*q.y,width:p.width*q.x};if(a.options.fade){if(k=="show"){o.from.opacity=0;o.to.opacity=1}if(k=="hide"){o.from.opacity=1;o.to.opacity=0}}r.from=o.from;r.to=o.to;r.mode=k;o.effect("size",r,a.duration,a.callback);o.dequeue()})};b.effects.size=function(a){return this.queue(function(){var F=b(this),s=["position","top","left","width","height","overflow","opacity"];var u=["position","top","left","overflow","opacity"];var x=["width","height","overflow"];var q=["fontSize"];var w=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"];var C=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"];var B=b.effects.setMode(F,a.options.mode||"effect");var z=a.options.restore||false;var D=a.options.scale||"both";var r=a.options.origin;var E={height:F.height(),width:F.width()};F.from=a.options.from||E;F.to=a.options.to||E;if(r){var A=b.effects.getBaseline(r,E);F.from.top=(E.height-F.from.height)*A.y;F.from.left=(E.width-F.from.width)*A.x;F.to.top=(E.height-F.to.height)*A.y;F.to.left=(E.width-F.to.width)*A.x}var v={from:{y:F.from.height/E.height,x:F.from.width/E.width},to:{y:F.to.height/E.height,x:F.to.width/E.width}};if(D=="box"||D=="both"){if(v.from.y!=v.to.y){s=s.concat(w);F.from=b.effects.setTransition(F,w,v.from.y,F.from);F.to=b.effects.setTransition(F,w,v.to.y,F.to)}if(v.from.x!=v.to.x){s=s.concat(C);F.from=b.effects.setTransition(F,C,v.from.x,F.from);F.to=b.effects.setTransition(F,C,v.to.x,F.to)}}if(D=="content"||D=="both"){if(v.from.y!=v.to.y){s=s.concat(q);F.from=b.effects.setTransition(F,q,v.from.y,F.from);F.to=b.effects.setTransition(F,q,v.to.y,F.to)}}b.effects.save(F,z?s:u);F.show();b.effects.createWrapper(F);F.css("overflow","hidden").css(F.from);if(D=="content"||D=="both"){w=w.concat(["marginTop","marginBottom"]).concat(q);C=C.concat(["marginLeft","marginRight"]);x=s.concat(w).concat(C);F.find("*[width]").each(function(){child=b(this);if(z){b.effects.save(child,x)}var c={height:child.height(),width:child.width()};child.from={height:c.height*v.from.y,width:c.width*v.from.x};child.to={height:c.height*v.to.y,width:c.width*v.to.x};if(v.from.y!=v.to.y){child.from=b.effects.setTransition(child,w,v.from.y,child.from);child.to=b.effects.setTransition(child,w,v.to.y,child.to)}if(v.from.x!=v.to.x){child.from=b.effects.setTransition(child,C,v.from.x,child.from);child.to=b.effects.setTransition(child,C,v.to.x,child.to)}child.css(child.from);child.animate(child.to,a.duration,a.options.easing,function(){if(z){b.effects.restore(child,x)}})})}F.animate(F.to,{queue:false,duration:a.duration,easing:a.options.easing,complete:function(){if(B=="hide"){F.hide()}b.effects.restore(F,z?s:u);b.effects.removeWrapper(F);if(a.callback){a.callback.apply(this,arguments)}F.dequeue()}})})}})(jQuery);(function(b){b.effects.shake=function(a){return this.queue(function(){var B=b(this),u=["position","top","left"];var v=b.effects.setMode(B,a.options.mode||"effect");var r=a.options.direction||"left";var D=a.options.distance||20;var C=a.options.times||3;var z=a.duration||a.options.duration||140;b.effects.save(B,u);B.show();b.effects.createWrapper(B);var A=(r=="up"||r=="down")?"top":"left";var i=(r=="up"||r=="left")?"pos":"neg";var x={},q={},s={};x[A]=(i=="pos"?"-=":"+=")+D;q[A]=(i=="pos"?"+=":"-=")+D*2;s[A]=(i=="pos"?"-=":"+=")+D*2;B.animate(x,z,a.options.easing);for(var w=1;w<C;w++){B.animate(q,z,a.options.easing).animate(s,z,a.options.easing)}B.animate(q,z,a.options.easing).animate(x,z/2,a.options.easing,function(){b.effects.restore(B,u);b.effects.removeWrapper(B);if(a.callback){a.callback.apply(this,arguments)}});B.queue("fx",function(){B.dequeue()});B.dequeue()})}})(jQuery);(function(b){b.effects.slide=function(a){return this.queue(function(){var q=b(this),r=["position","top","left"];var l=b.effects.setMode(q,a.options.mode||"show");var n=a.options.direction||"left";b.effects.save(q,r);q.show();b.effects.createWrapper(q).css({overflow:"hidden"});var p=(n=="up"||n=="down")?"top":"left";var s=(n=="up"||n=="left")?"pos":"neg";var k=a.options.distance||(p=="top"?q.outerHeight({margin:true}):q.outerWidth({margin:true}));if(l=="show"){q.css(p,s=="pos"?-k:k)}var o={};o[p]=(l=="show"?(s=="pos"?"+=":"-="):(s=="pos"?"-=":"+="))+k;q.animate(o,{queue:false,duration:a.duration,easing:a.options.easing,complete:function(){if(l=="hide"){q.hide()}b.effects.restore(q,r);b.effects.removeWrapper(q);if(a.callback){a.callback.apply(this,arguments)}q.dequeue()}})})}})(jQuery);(function(b){b.effects.transfer=function(a){return this.queue(function(){var k=b(this),i=b(a.options.to),l=i.offset(),j={top:l.top,left:l.left,height:i.innerHeight(),width:i.innerWidth()},n=k.offset(),o=b('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(a.options.className).css({top:n.top,left:n.left,height:k.innerHeight(),width:k.innerWidth(),position:"absolute"}).animate(j,a.duration,a.options.easing,function(){o.remove();(a.callback&&a.callback.apply(k[0],arguments));k.dequeue()})})}})(jQuery);(function($){var opts={},default_opts={url:"",refresh:1000,paramname:"userfile",maxfiles:25,maxfilesize:1,data:{},drop:empty,dragEnter:empty,dragOver:empty,dragLeave:empty,docEnter:empty,docOver:empty,docLeave:empty,error:function(err,file){alert(err)},uploadStarted:empty,uploadFinished:empty,progressUpdated:empty,speedUpdated:empty},errors=["BrowserNotSupported","TooManyFiles","FileTooLarge"],doc_leave_timer,stop_loop=false;$.fn.filedrop=function(options){opts=$.extend({},default_opts,options);try{this.get(0).addEventListener("drop",drop,true);this.bind("dragenter",dragEnter).bind("dragover",dragOver).bind("dragleave",dragLeave);document.addEventListener("drop",docDrop,true);$(document).bind("dragenter",docEnter).bind("dragover",docOver).bind("dragleave",docLeave)}catch(e){}};function drop(e){opts.drop(e);upload(e.dataTransfer.files);e.preventDefault();return false}function getBuilder(filename,filedata,boundary){var dashdash="--",crlf="\r\n",builder="";$.each(opts.data,function(i,val){if(typeof val==="function"){val=val()}builder+=dashdash;builder+=boundary;builder+=crlf;builder+='Content-Disposition: form-data; name="'+i+'"';builder+=crlf;builder+=val;builder+=crlf});builder+=dashdash;builder+=boundary;builder+=crlf;builder+=dashdash;builder+=boundary;builder+=crlf;builder+='Content-Disposition: form-data; name="'+opts.paramname+'"';builder+='; filename="'+filename+'"';builder+=crlf;builder+="Content-Type: application/octet-stream";builder+=crlf;builder+=crlf;builder+=filedata;builder+=crlf;builder+=dashdash;builder+=boundary;builder+=dashdash;builder+=crlf;return builder}function progress(e){if(e.lengthComputable){var percentage=Math.round((e.loaded*100)/e.total);if(this.currentProgress!=percentage){this.currentProgress=percentage;opts.progressUpdated(this.index,this.file,this.currentProgress);var elapsed=new Date().getTime();var diffTime=elapsed-this.currentStart;if(diffTime>=opts.refresh){var diffData=e.loaded-this.startData;var speed=diffData/diffTime;opts.speedUpdated(this.index,this.file,speed);this.startData=e.loaded;this.currentStart=elapsed}}}}function upload(files){stop_loop=false;if(!files){opts.error(errors[0]);return false}var len=files.length;if(len>opts.maxfiles){opts.error(errors[1]);return false}for(var i=0;i<len;i++){if(stop_loop){return false}try{if(i===len){return}var reader=new FileReader(),max_file_size=1048576*opts.maxfilesize;reader.index=i;reader.file=files[i];reader.len=len;if(reader.file.size>max_file_size){opts.error(errors[2],reader.file);return false}reader.addEventListener("loadend",send,false);reader.readAsBinaryString(files[i])}catch(err){opts.error(errors[0]);return false}}function send(e){var xhr=new XMLHttpRequest(),upload=xhr.upload,file=e.target.file,index=e.target.index,start_time=new Date().getTime(),boundary="------multipartformboundary"+(new Date).getTime(),builder=getBuilder(file.name,e.target.result,boundary);upload.index=index;upload.file=file;upload.downloadStartTime=start_time;upload.currentStart=start_time;upload.currentProgress=0;upload.startData=0;upload.addEventListener("progress",progress,false);xhr.open("POST",opts.url,true);xhr.setRequestHeader("content-type","multipart/form-data; boundary="+boundary);xhr.sendAsBinary(builder);opts.uploadStarted(index,file,e.target.len);xhr.onload=function(){if(xhr.responseText){var now=new Date().getTime(),timeDiff=now-start_time,result=opts.uploadFinished(index,file,eval("["+xhr.responseText+"]"),timeDiff);if(result===false){stop_loop=true}}}}}function dragEnter(e){clearTimeout(doc_leave_timer);e.preventDefault();opts.dragEnter(e)}function dragOver(e){clearTimeout(doc_leave_timer);e.preventDefault();opts.docOver(e);opts.dragOver(e)}function dragLeave(e){clearTimeout(doc_leave_timer);opts.dragLeave(e);e.stopPropagation()}function docDrop(e){e.preventDefault();opts.docLeave(e);return false}function docEnter(e){clearTimeout(doc_leave_timer);e.preventDefault();opts.docEnter(e);return false}function docOver(e){clearTimeout(doc_leave_timer);e.preventDefault();opts.docOver(e);return false}function docLeave(e){doc_leave_timer=setTimeout(function(){opts.docLeave(e)},200)}function empty(){}})(jQuery);(function(f){var g=(f.browser.msie?"paste":"input")+".mask";var e=(window.orientation!=undefined);f.mask={definitions:{"9":"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"}};f.fn.extend({caret:function(b,a){if(this.length==0){return}if(typeof b=="number"){a=(typeof a=="number")?a:b;return this.each(function(){if(this.setSelectionRange){this.focus();this.setSelectionRange(b,a)}else{if(this.createTextRange){var h=this.createTextRange();h.collapse(true);h.moveEnd("character",a);h.moveStart("character",b);h.select()}}})}else{if(this[0].setSelectionRange){b=this[0].selectionStart;a=this[0].selectionEnd}else{if(document.selection&&document.selection.createRange){var c=document.selection.createRange();b=0-c.duplicate().moveStart("character",-100000);a=b+c.text.length}}return{begin:b,end:a}}},unmask:function(){return this.trigger("unmask")},mask:function(b,q){if(!b&&this.length>0){var o=f(this[0]);var n=o.data("tests");return f.map(o.data("buffer"),function(i,h){return n[h]?i:null}).join("")}q=f.extend({placeholder:"_",completed:null},q);var a=f.mask.definitions;var n=[];var p=b.length;var c=null;var l=b.length;f.each(b.split(""),function(h,i){if(i=="?"){l--;p=h}else{if(a[i]){n.push(new RegExp(a[i]));if(c==null){c=n.length-1}}else{n.push(null)}}});return this.each(function(){var h=f(this);var z=f.map(b.split(""),function(r,s){if(r!="?"){return a[r]?q.placeholder:r}});var x=false;var i=h.val();h.data("buffer",z).data("tests",n);function C(r){while(++r<=l&&!n[r]){}return r}function E(r){while(!n[r]&&--r>=0){}for(var u=r;u<l;u++){if(n[u]){z[u]=q.placeholder;var s=C(u);if(s<l&&n[u].test(z[s])){z[u]=z[s]}else{break}}}F();h.caret(Math.max(c,r))}function D(w){for(var s=w,u=q.placeholder;s<l;s++){if(n[s]){var v=C(s);var r=z[s];z[s]=u;if(v<l&&n[v].test(r)){u=r}else{break}}}}function A(u){var r=f(this).caret();var s=u.keyCode;x=(s<16||(s>16&&s<32)||(s>32&&s<41));if((r.begin-r.end)!=0&&(!x||s==8||s==46)){B(r.begin,r.end)}if(s==8||s==46||(e&&s==127)){E(r.begin+(s==46?0:-1));return false}else{if(s==27){h.val(i);h.caret(0,j());return false}}}function k(G){if(x){x=false;return(G.keyCode==8)?false:null}G=G||window.event;var v=G.charCode||G.keyCode||G.which;var u=f(this).caret();if(G.ctrlKey||G.altKey||G.metaKey){return true}else{if((v>=32&&v<=125)||v>186){var s=C(u.begin-1);if(s<l){var r=String.fromCharCode(v);if(n[s].test(r)){D(s);z[s]=r;F();var w=C(s);f(this).caret(w);if(q.completed&&w==l){q.completed.call(h)}}}}}return false}function B(r,u){for(var s=r;s<u&&s<l;s++){if(n[s]){z[s]=q.placeholder}}}function F(){return h.val(z.join("")).val()}function j(G){var v=h.val();var u=-1;for(var w=0,s=0;w<l;w++){if(n[w]){z[w]=q.placeholder;while(s++<v.length){var r=v.charAt(s-1);if(n[w].test(r)){z[w]=r;u=w;break}}if(s>v.length){break}}else{if(z[w]==v[s]&&w!=p){s++;u=w}}}if(!G&&u+1<p){h.val("");B(0,l)}else{if(G||u+1>=p){F();if(!G){h.val(h.val().substring(0,u+1))}}}return(p?w:c)}if(!h.attr("readonly")){h.one("unmask",function(){h.unbind(".mask").removeData("buffer").removeData("tests")}).bind("focus.mask",function(){i=h.val();var r=j();F();setTimeout(function(){if(r==b.length){h.caret(0,r)}else{h.caret(r)}},0)}).bind("blur.mask",function(){j();if(h.val()!=i){h.change()}}).bind("keydown.mask",A).bind("keypress.mask",k).bind(g,function(){setTimeout(function(){h.caret(j(true))},0)})}j()})}})})(jQuery);$.fn.hasAttr=function(a){return this.attr(a)!==undefined};Array.prototype.remove=function(c,b){var a=this.slice((b||c)+1||this.length);this.length=c<0?this.length+c:c;return this.push.apply(this,a)};function ClickMenu(){this.init=function(){var a;$(".clickmenu").live("click",function(){$(".clickmenu").removeClass("on");$(this).addClass("on")}).live("mouseout",function(){a=setTimeout("$('.clickmenu').removeClass('on')",300)}).live("mouseover",function(){clearTimeout(a)})};this.init()}function dayStemmer(a){var b="th";switch(a){case"1":case"21":case"31":b="st";break;case"2":case"22":b="nd";break;case"3":case"23":b="rd";break;default:break}return a.toString()+b}
/*
Math.uuid.js (v1.4)
http://www.broofa.com
mailto:robert@broofa.com

Copyright (c) 2009 Robert Kieffer
Dual licensed under the MIT and GPL licenses.
*/
(function($){function toIntegersAtLease(n){return n<10?"0"+n:n}Date.prototype.toJSON=function(date){return this.getUTCFullYear()+"-"+toIntegersAtLease(this.getUTCMonth())+"-"+toIntegersAtLease(this.getUTCDate())};var escapeable=/["\\\x00-\x1f\x7f-\x9f]/g;var meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};$.quoteString=function(string){if(escapeable.test(string)){return'"'+string.replace(escapeable,function(a){var c=meta[a];if(typeof c==="string"){return c}c=a.charCodeAt();return"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16)})+'"'}return'"'+string+'"'};$.toJSON=function(o,compact){var type=typeof(o);if(type=="undefined"){return"undefined"}else{if(type=="number"||type=="boolean"){return o+""}else{if(o===null){return"null"}}}if(type=="string"){return $.quoteString(o)}if(type=="object"&&typeof o.toJSON=="function"){return o.toJSON(compact)}if(type!="function"&&typeof(o.length)=="number"){var ret=[];for(var i=0;i<o.length;i++){ret.push($.toJSON(o[i],compact))}if(compact){return"["+ret.join(",")+"]"}else{return"["+ret.join(", ")+"]"}}if(type=="function"){throw new TypeError("Unable to convert object of type 'function' to json.")}var ret=[];for(var k in o){var name;type=typeof(k);if(type=="number"){name='"'+k+'"'}else{if(type=="string"){name=$.quoteString(k)}else{continue}}var val=$.toJSON(o[k],compact);if(typeof(val)!="string"){continue}if(compact){ret.push(name+":"+val)}else{ret.push(name+": "+val)}}return"{"+ret.join(", ")+"}"};$.compactJSON=function(o){return $.toJSON(o,true)};$.evalJSON=function(src){return eval("("+src+")")};$.secureEvalJSON=function(src){var filtered=src;filtered=filtered.replace(/\\["\\\/bfnrtu]/g,"@");filtered=filtered.replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]");filtered=filtered.replace(/(?:^|:|,)(?:\s*\[)+/g,"");if(/^[\],:{}\s]*$/.test(filtered)){return eval("("+src+")")}else{throw new SyntaxError("Error parsing JSON, source is not valid.")}}})(jQuery);function Page(){var a=this;a.nav=new Foxmenu;a.fox=new Foxhelper;a.thumbnail=new Thumbnail;a.inputText=new SetInputText;a.buttons=new Buttons;a.previewModal=new PreviewModal;a.errors=new Errors;$("#header .find button").bind("click",function(){var b=$("#header .searchbox").val();if(!b.match(/^[a-zA-Z0-9]+$/i)){page.fox.message({message:"Search only accepts letters and numbers. 					Please try again.",close:function(){parentTR.removeClass("selected")},offset:{x:200,y:0}});return false}});return a}Page.prototype.ajaxStart=function(){$("div#eventStatus").css({display:"block"})};Page.prototype.ajaxStop=function(){var a=this;$("div#eventStatus").css({display:"none"});return a};Page.prototype.request=function(f){var j=this;var b=f.async?f.async:false;var h=f.type?f.type:"POST";var i=f.dataType?f.dataType:"json";var e=f.request?f.request:"";var a=f.url?f.url:"";var c=f.offset?f.offset:{x:0,y:0};var g=f.errorHandler?f.errorHander:function(k){j.errors.prompt({errors:k,offset:c})};$.ajax({async:b,dataType:i,type:h,url:a,cache:false,data:e,beforeSend:function(){j.ajaxStart()},error:function(l,k,n){j.fox.center().display({url:"ajaxerror",callback:function(){$("#refreshButton").bind("click",function(){location.reload(true)})}});j.ajaxStop()},success:function(k){j.ajaxStop().errors.clear();if(k.errors){g(k.errors)}else{j.fox.dock();f.success(k)}}})};Page.prototype.makeHash=function(b,l){var j=b+"="+l;var c=location.hash.replace(/^.*#/,"");var h=c.split(",");var g=-1;var f="".indexOf(h);if(f>=0){h.remove(f)}for(var e=0;e<h.length;e++){var a=h[e].split("=");if(b==a[0]){var g=e;break}}if(g>=0){h.remove(g)}h.push(j);return h.join(",")};Page.prototype.makeMultipleHash=function(){var e=location.hash.replace(/^.*#/,"");var h=e.split(",");var g=-1;for(var f=0,c=arguments.length;f<c;f++){var n=arguments[f];var l=n[0]+"="+n[1];for(var b=0;b<h.length;b++){var a=h[b].split("=");if(n[0]==a[0]){var g=b}}if(g>=0){h.remove(g)}h.push(l)}h=$.grep(h,function(k,j){return(k)});return h.join(",")};Page.prototype.getHashVal=function(b){var e=location.hash.replace(/^.*#/,"");var a=e.split(",");var c="".indexOf(a);if(c>=0){a.remove(c)}var f=0;$.each(a,function(h,g){g=g.split("=");if(b==g[0]){f=g[1]}});return f};function Errors(){var a=this}Errors.prototype.prompt=function(b){var a=this;var e=b.errors;var c=b.offset||{x:0,y:0};a.clear();page.fox.center({x:c.x,y:c.y}).display({url:"errors.html",callback:function(){for(var f=0;f<e.length;f++){var g=e[f].selector;var h=e[f].message;if(g){$(g).addClass("error")}$("#errorList").append("<li>"+h+"</li>")}}});return a};Errors.prototype.clear=function(){var a=this;$(".error").removeClass("error");return a};function Buttons(){var a=this;a.activate()}Buttons.prototype.activate=function(a){if(!a){a=".button"}$(a).live("mousedown",function(){$(this).addClass("active")}).live("mouseup",function(){$(this).removeClass("active")}).live("mouseout",function(){$(this).removeClass("active")}).disableTextSelect()};function Thumbnail(){var a=this;a.init()}Thumbnail.prototype.init=function(){var a=this;$(".thumb").each(function(b,c){if($(this).children(".frame").children("img").attr("src")){$(this).css("background","url('"+$(this).children(".frame").children("img").attr("src")+"') no-repeat center center")}});return a};function PicViewer(a){var b=this;b.selector=a;b.photos=[];b.photoLen=0;b.photoIndex=0;b.defaultBg="/styles/img/picviewer_frame_placeholder.png";b.init()}PicViewer.prototype.init=function(){var a=this;a.setupArrows().setupMenu();$(a.selector+" .picViewer .center").disableTextSelect();return a};PicViewer.prototype.setup=function(b){var a=this;a.photos=b;a.photoLen=b.length;a.photoIndex=0;a.showPhoto(a.photoIndex)};PicViewer.prototype.showDropzone=function(){var a=this,b=$(a.selector+" .picDisplay");$(a.selector+" .droptext").addClass("hover");b.css("background","url('"+a.defaultBg+"') no-repeat center center")};PicViewer.prototype.hideDropzone=function(){var a=this;a.deactivateDropzone();$(a.selector+" .droptext").removeClass("hover");a.showPhoto(a.photoIndex)};PicViewer.prototype.activateDropzone=function(){var a=this,b=$(a.selector+" .picDisplay");$(a.selector+" .droptext").addClass("on");b.css("background","url('"+a.defaultBg+"') no-repeat center center")};PicViewer.prototype.deactivateDropzone=function(){var a=this;$(a.selector+" .droptext").removeClass("on")};PicViewer.prototype.showPhoto=function(e){var c=this,g=$(c.selector+" .picDisplay"),b=$(c.selector+" .center"),a=c.photoLen,f=a?c.photoIndex+1:0;if(c.photos[e]){g.css("background","#232323 url('"+c.photos[e].photo+"') no-repeat center center")}else{g.css("background","url('"+c.defaultBg+"') no-repeat center center")}b.text(f+" of "+a)};PicViewer.prototype.removePhoto=function(){var a=this,c=a.photos.slice(0,a.photoIndex),b=a.photos.slice(a.photoIndex+1);a.photos=c.concat(b);a.photoLen-=1;a.photoIndex-=1;if(a.photoIndex<0){a.photoIndex=0}a.showPhoto(a.photoIndex)};PicViewer.prototype.addPhoto=function(b){var a=this;a.photos=a.photos.concat(b);a.photoIndex=a.photoLen;a.photoLen+=1;a.showPhoto(a.photoIndex)};PicViewer.prototype.setupArrows=function(){var a=this;$(a.selector+" .picNav .left,"+a.selector+" .picNav .right").bind("mousedown",function(){$(this).addClass("active")}).bind("mouseup",function(){$(this).removeClass("active")}).bind("click",function(){if($(this).hasClass("left")){a.prevPhoto()}else{a.nextPhoto()}});$(a.selector+" .picDisplay").bind("click",function(){a.nextPhoto()});return a};PicViewer.prototype.setupMenu=function(){var a=this;$(a.selector+" .picBar .picEditor").bind("click",function(b){if($(this).hasClass("on")){$(this).removeClass("on")}else{$(this).addClass("on")}b.stopPropagation()});$(document).bind("click",function(){$(a.selector+" .picBar .picEditor").removeClass("on")});return a};PicViewer.prototype.nextPhoto=function(){this.photoIndex+=1;if(this.photoIndex===this.photoLen){this.photoIndex=0}this.showPhoto(this.photoIndex)};PicViewer.prototype.prevPhoto=function(){this.photoIndex-=1;if(this.photoIndex<0){this.photoIndex=this.photoLen-1}this.showPhoto(this.photoIndex)};function Pulse(a){this.container=$(a+" .container")}Pulse.prototype.refresh=function(c){var a=this.container,b=this.generateHTML(c);a.html(b)};Pulse.prototype.generateHTML=function(e){var n=[],h=e.length;if(!h){return'<div class="nothing">No recent activity.</div>'}for(var f=0;f<h;f++){var p="",l=e[f],b=l.id,j=l.type,c=l.date,g=l.html.replace("#Unit",""),k=l.day,o=e[f-1]?e[f-1].date:null,a=e[f+1]?e[f+1].date:null;if(c!==o){p+="<dl><dt>"+k+"</dt>"}p+='<dd class="'+j+'">'+g+"</dd>";if(c!==a){p+="</dl>"}n.push(p)}return n.join("")};function SetInputText(){var a=this;a.reset();return a}SetInputText.prototype.reset=function(){var a=this;$("input:text,input:password").unbind("focus").unbind("blur").addClass("active").each(function(b,e){if($(this).hasAttr("alt")){var c=$(this).attr("alt");if($(this).val()==""||$(this).val()==c){$(this).val(c).removeClass("active")}$(this).bind("focus",function(){if($(this).val()==c){$(this).val("")}$(this).addClass("active")}).bind("blur",function(){if($(this).val()==""){$(this).val(c).removeClass("active")}$(this).addClass("inactive")})}});return a};SetInputText.prototype.clear=function(a){var b=this;$("input:text").each(function(c,f){var e=$(this).attr("value")==$(this).attr("alt");if(e){$(this).attr({value:""})}});return b};$(function(){$.extend($.fn.disableTextSelect=function(){return this.each(function(){if($.browser.mozilla){$(this).css("MozUserSelect","none")}else{if($.browser.msie){$(this).bind("selectstart",function(){return false})}else{$(this).mousedown(function(){return false})}}})})});(function(a){a.fn.extend({elastic:function(){var b=new Array("paddingTop","paddingRight","paddingBottom","paddingLeft","fontSize","lineHeight","fontFamily","width","fontWeight");return this.each(function(){if(this.type!="textarea"){return false}var k=a(this);var q=parseInt(k.css("lineHeight"),10)||parseInt(k.css("fontSize"),"10");var p=parseInt(k.css("height"),10)||q*3;var o=parseInt(k.css("max-height"),10)||Number.MAX_VALUE;var n=0;var l=null;var j=true;if(!l){$twin=a("<div />").css({position:"absolute",display:"none"}).appendTo(k.parent());a.each(b,function(){$twin.css(this.toString(),k.css(this.toString()))})}function r(f,e){curratedHeight=Math.floor(parseInt(f,10));if(k.height()!=curratedHeight){k.css({height:curratedHeight+"px",overflow:e})}}function c(){var f=k.val().replace(/<|>/g," ").replace(/\n/g,"<br />").replace(/&/g,"&amp;");var e=$twin.html();if(f+"&nbsp;"!=e){$twin.html(f+"&nbsp;");if(Math.abs($twin.height()+q-k.height())>3){var g=$twin.height()+q;if(g>=o){r(o,"auto")}else{if(g<=p){r(p,"hidden")}else{r(g,"hidden")}}if(j){temp=k.val();k.val("");setTimeout(function(){k.val(temp)},1);j=false}}}}k.css({overflow:"hidden"}).bind("focus",function(){self.periodicalUpdater=window.setInterval(function(){c()},50)}).bind("blur",function(){clearInterval(self.periodicalUpdater)});c()})}})})(jQuery);function Foxmenu(){var b=$("#menu .sub");var a=$("#menuBackdrop");this.hideSubmenu=e;this.showSubmenu=c;function e(){b.hide();a.removeClass("submenu")}function c(){b.show();a.addClass("submenu")}}function Foxhelper(){var a=this;a.incPath="/foxhelper/";a.foxDisplayMessage="index";a.foxDefaultMessage="index";a.foxHelper=$("#foxhelper");a.theFox=$("#foxhelper .thefox");a.foxPanel=$("#foxhelper .foxpanel");a.alert=$("#foxhelper .balloon");a.foxDisplay=$("#foxhelper .display");a.foxDisplayWidth=$("#foxhelper").width();a.dockLeft=-35;a.dockBottom=25;a.expanded=false;a.callback=null;a.init()}Foxhelper.prototype.init=function(){var a=this;a.dock();a.foxHelper.draggable({handle:".thefox",stop:function(){a._keepInBounds();if(a._foxOnMenu()){a.dock()}else{a.display()}return a}});a.theFox.bind("dblclick",function(){if(a.foxHelper.css("top")=="auto"){a.center().display()}else{a.dock()}}).bind("mousedown",function(){this.style.cursor='url("/styles/img/closedhand.cur"), move'}).bind("mouseup",function(){this.style.cursor='url("/styles/img/openhand.cur"), move'});$(window).resize(function(){if(a._foxOnMenu()){a.dock()}else{a._keepInBounds()}});$(".foxClose").live("click",function(){a.dock()});return a};Foxhelper.prototype.dock=function(){var a=this;a.foxPanel.hide();a.foxHelper.css("left",a.dockLeft).css("bottom",a.dockBottom).css("top","auto").css({overflow:"auto"});a.expanded=false;a.foxDisplayMessage=a.foxDefaultMessage;if(a.onClose){a.onClose();a.onClose=null;a.callback=null}return a};Foxhelper.prototype.center=function(e){var b=this;var c=$(window).width()/2-parseInt(b.foxPanel.css("width"))/2;var a=$(window).height()/6;if(e){c+=e.x;a+=e.y}b.foxHelper.css("bottom",0);b.foxHelper.css("left",c).css("top",a);expanded=true;return b};Foxhelper.prototype.display=function(c){var a=this;var b=0;a.hideAlert();if(!a.expanded&&a.foxDisplayMessage!=a.foxDefaultMessage){a.foxDisplayMessage=a.foxDefaultMessage}if(a.onClose&&c&&c.url!="undefined"){a.onClose();a.onClose=null}if(c){if(c.url){a.foxDisplayMessage=c.url;var b=1}if(c.callback){a.callback=c.callback}if(c.close){a.onClose=c.close}}a.foxPanel.show();if(a.foxDisplayMessage!=a.lastFoxDisplayMessage||b){a.foxDisplay.load(a.incPath+a.foxDisplayMessage,"",a.callback).show();a.lastFoxDisplayMessage=a.foxDisplayMessage}a.expanded=true;a.foxHelper.css({overflow:"hidden"});return a};Foxhelper.prototype.confirm=function(e){var b=this;var c=true;var a="Confirm";var f=null;var g=e.offset?e.offset:{x:0,y:0};if(e.confirmButtonText){a=e.confirmButtonText}if(e.dock!="undefined"){c=e.dock}if(e.close){f=e.close}b.center(g).display({url:"confirm",callback:function(){$("#foxConfirmMessage").html(e.message);$("#foxConfirmYesText").text(a);$("#foxConfirmYes").bind("click",function(){if(c!="undefined"){page.fox.dock()}e.success()})},close:f});return b};Foxhelper.prototype.message=function(c){var b=this;var a="Close";if(c.closeText){a=c.closeText}b.center({x:0,y:0}).display({url:"message",callback:function(){$("#foxMessage").html(c.message);$("#foxTitle").text(c.title);$("#foxCloseText").text(a)}});return b};Foxhelper.prototype._foxOnMenu=function(){var a=this;var b=parseInt($(window).height())-parseInt(a.foxHelper.css("top"));if(b<170){return true}else{return false}};Foxhelper.prototype._keepInBounds=function(){var b=this;var a=parseInt(b.foxHelper.css("top"));var e=parseInt(b.foxHelper.css("left"));var c=$(window).width()-parseInt(b.foxHelper.css("left"))-b.foxDisplayWidth;if(b.expanded){if(a<0){b.foxHelper.css("top",0)}if(e<0){b.foxHelper.css("left",0)}if(c<0){b.foxHelper.css("left",$(window).width()-b.foxDisplayWidth)}}return b};Foxhelper.prototype.showAlert=function(){var a=this;setTimeout(function(){a.theFox.animate({top:"-10px"},100,function(){$(this).animate({top:"0"},250,function(){a.alert.bind("click",function(){a.center().display()}).slideDown("fast",function(){setInterval(function(){a.alert.animate({top:"-10px"},200,function(){$(this).animate({top:"0"},500)})},2500)})})})},1000)};Foxhelper.prototype.hideAlert=function(){var a=this;a.alert.css({display:"none"})};function Homepage(){var x=1,k=$("#tourContent > .pane").size();function o(){if(location.hash=="#signup"){f()}$("#slideNav > li").bind("click",function(){q($(this).attr("id"))});$("#slideViewer").bind("click",function(){e()});$("#tour-button").bind("click",function(){p()});$("#tour-close").bind("click",function(){r()});$(".next-pane").bind("click",function(){l(x+1)});page.fox.foxDefaultMessage="signup";page.buttons.activate("a.login");l(x);n()}function q(D){$("#slideViewer").css({background:'no-repeat url("/styles/img/'+D+'.png")'});$("#slideNav > li").removeClass("on");$("#"+D).addClass("on")}function e(){var D=$("#slideNav > li.on");var E=($("#slideNav > li").length==$("#slideNav > li").index(D)+1);if(E){q("slide_1")}else{q(D.next().attr("id"))}}function n(){$("#signUpButton, #tour-signup-button").bind("click",function(){f()});$("#signInButton").bind("click",function(){$("#signInForm").submit()});$("#signInForm input").bind("keypress",function(E){var D=E.keyCode||E.which;if(D==13){$("#signInForm").submit()}});$("#termsLink").bind("click",function(){c()});$("#privacyLink").bind("click",function(){w()});$("#aboutLink").bind("click",function(){a()});$("#supportLink").bind("click",function(){i()});$("#contactLink").bind("click",function(){s()});$("#leads-button").bind("click",function(){v()})}function v(){var D={url:"leads.html?v=beta",callback:z};page.fox.center({x:100,y:-100}).display(D)}function z(){$("#send-lead").bind("click",function(){$.ajax({url:"/marketing/sendLead",cache:false,data:{name:$("#lead-name").val(),email:$("#lead-email").val(),phone:$("#lead-phone").val(),message:$("#lead-message").val()},type:"POST",dataType:"json",beforeSend:function(){page.ajaxStart()},success:function(D){page.ajaxStop();if(D.errors.length){h(D.errors)}else{$(".error").remove();$("#lead-form").hide();$("#lead-thanks").show();$("#lead-name-thanks").text($("#lead-name").val())}}})});$("#lead-form input").bind("keypress",function(E){var D=E.keyCode||E.which;if(D==13){$("#send-lead").trigger("click")}});$("#lead-phone").mask("(999) 999-9999")}function f(){var D={url:"signup",callback:u};page.fox.center({x:100,y:-100}).display(D)}function u(){$("#step1 input").bind("keypress",function(E){var D=E.keyCode||E.which;if(D==13){g()}});$("#step2 input").bind("keypress",function(E){var D=E.keyCode||E.which;if(D==13){B()}});$("#foxhelper .button").bind("click",function(){label=$(this).attr("rel").length?$(this).attr("rel"):$(this).attr("id");switch(label){case"step1":b(label);break;case"step2":b(label);break;case"checkBasicInfo":g();break;case"checkLoginInfo":B();break;case"signUpNow":C();break;case"agreeWithTerms":A();break}});b("step0");$("#recaptcha_response_field").live("keypress",function(E){var D=E.keyCode||E.which;if(D==13){C()}});Recaptcha.create("6LclDgwAAAAAAMjA9r5epZYJW_ZXXmqRcBq9vfeE","captcha",{theme:"custom"});$("#signupPhone").mask("(999) 999-9999")}function h(D){$(".error").remove();$.each(D,function(F,G){var E='<div class="error"><span><span>'+G.message+"</span></span></div>";$(G.selector).before(E)})}function A(){b("step1");$("#signupFName").focus()}function b(E){var F=parseInt(E.replace("step",""));var D=(F-1)*100/3+"%";if(parseInt(F)===0){$(".progress, #progressInfo").hide()}else{$(".progress, #progressInfo").show();$("#foxhelper .step").removeClass("on");$("#"+E).addClass("on");$("#progressBar").animate({width:D});$("#progressInfo").text("Step "+F+" of 3")}}function g(){$.ajax({url:"/account/signUpBasicInfoCheck",cache:false,data:{company:$("#signupCompany").val(),fname:$("#signupFName").val(),lname:$("#signupLName").val(),email:$("#signupEmail").val(),phone:$("#signupPhone").val()},type:"POST",dataType:"json",beforeSend:function(){page.ajaxStart()},success:function(D){page.ajaxStop();if(D.errors.length){h(D.errors)}else{$(".error").remove();b("step2");$("#signupUsername").focus()}}})}function B(){$.ajax({url:"/account/signUpAuthInfoCheck",cache:false,data:{username:$("#signupUsername").val(),password:$("#signupPassword").val(),secret:$("#signupSecret").val()},type:"POST",dataType:"json",beforeSend:function(){page.ajaxStart()},success:function(D){page.ajaxStop();if(D.errors.length){h(D.errors)}else{$(".error").remove();b("step3");$("#recaptcha_response_field").focus()}}})}function C(){$.ajax({url:"/account/createNewClient",cache:false,data:{company:$("#signupCompany").val(),fname:$("#signupFName").val(),lname:$("#signupLName").val(),email:$("#signupEmail").val(),phone:$("#signupPhone").val(),username:$("#signupUsername").val(),password:$("#signupPassword").val(),secret:$("#signupSecret").val(),captchaChallenge:Recaptcha.get_challenge(),captchaResponse:Recaptcha.get_response()},type:"POST",dataType:"json",beforeSend:function(){$("#progressBar").css({width:"100%"});page.ajaxStart()},success:function(D){page.ajaxStop();if(D.errors.length){h(D.errors);$("#recaptcha_image").hide("fast");Recaptcha.reload();Recaptcha.focus_response_field();$("#recaptcha_image").show("fast")}else{page.fox.dock();j()}}})}function j(){$("#username").val($("#signupUsername").val());$("#password").val($("#signupPassword").val());$("#signInForm").submit()}function p(){$("#tour").fadeIn("fast",function(){$("#tourContent").fadeIn(function(){$(document).bind("keydown",function(E){var D=E.keyCode||E.which;if(D==37){if(x>1){l(x-1)}E.preventDefault()}else{if(D==39){if(x<k){l(x+1)}E.preventDefault()}else{if(D==27){r()}}}})})})}function r(){$("#tourContent").fadeOut("fast",function(){$("#tour").fadeOut(function(){$(document).unbind("keydown")})})}function l(D){var E=$("#tourpane-"+D).size();x=E>0?D:1;$("#tourContent > .pane").hide();setTimeout(function(){$("#tourpane-"+x).show()},1)}function c(){var D={url:"terms.html"};page.fox.center({x:0,y:-100}).display(D)}function w(){var D={url:"privacy.html"};page.fox.center({x:0,y:-100}).display(D)}function a(){var D={url:"about.html"};page.fox.center({x:0,y:-100}).display(D)}function i(){var D={url:"support.html"};page.fox.center({x:0,y:-100}).display(D)}function s(){var D={url:"contact.html"};page.fox.center({x:0,y:-100}).display(D)}o()}function SignIn(){function c(){e();var g=new Buttons;$("#username").focus();$("#signInButton").bind("click",function(){$("#signInForm").submit()});$("#signInForm input").bind("keypress",function(i){var h=i.keyCode||i.which;if(h==13){$("#signInForm").submit()}});$(".forgotEmail").bind("click",function(){f()});$(".back").bind("click",function(){b()});$("#signInAgain").bind("click",function(){b("password")});$("#remindMe").bind("click",function(){$.ajax({url:"/account/recoverPasswordByEmail",cache:false,data:{email:$("#email").val()},type:"POST",dataType:"json",beforeSend:function(){$("div#eventStatus").css({display:"block"})},success:function(h){$("div#eventStatus").css({display:"none"});if(h.error){$("#emailError").text(h.error).css({display:"block"})}else{$("#emailError").css({display:"none"});a(h.username,h.secret)}}})});$("#email").bind("keypress",function(i){var h=i.keyCode||i.which;if(h==13){$("#remindMe").click()}})}function f(){$(".view").removeClass("on");$(".view.emailReminder").addClass("on");$("#email").focus()}function b(g){$(".view").removeClass("on");$(".view.default").addClass("on");if(g=="password"){$("#password").focus()}else{$("#username").focus()}}function a(h,g){$("#username").val(h);$("#passwordSecret").text(g);$("#emailRecoveryDestination").text($("#email").val());$(".view").removeClass("on");$(".view.hint").addClass("on")}function e(){if(location.hash){location.href=location.hash.replace(/^.*#/,"")}}c()}function Activate(b){function c(){$("#cannotActivate").css({display:"none"});var e=new Buttons;$("#username").focus();$("#activateButton").bind("click",function(){$.ajax({async:true,dataType:"json",type:"POST",url:"/account/activateUser",data:{username:$("#username").val(),password:$("#password").val(),reminder:$("#reminder").val(),code:b},beforeSend:function(){$("div#eventStatus").css({display:"block"})},success:function(f){$("div#eventStatus").css({display:"none"});$("#activateError").removeClass("on").text("");if(f.errors.length>0){$("#activateError").addClass("on").text(f.errors[0])}else{$("#activationForm").attr("action","/account").submit()}}})});$("#activationForm input").bind("keypress",function(g){var f=g.keyCode||g.which;if(f==13){$("#activateButton").click()}})}function a(){$("#activationForm").css({display:"none"})}if(b!="fake"){c()}else{a()}}function Dashboard(){var a=this;a.searchPanel=$("#searchpanel");a.searchBox=$("#searchBox");a.searchBox.focus();a.refresh().init();$(window).resize(function(){a.refresh()})}Dashboard.prototype.refresh=function(){var a=this;var b=$(window).width();if(b<964){b=964}var c=a.searchPanel.width();a.searchPanel.css("left",b/2-c/2);return a};Dashboard.prototype.init=function(){var a=this,b=$("#dashboard-pulse-options > li");a.pulse=new Pulse("#dashboard-pulse");page.request({url:"/pulse/get",success:function(c){a.pulse.refresh(c)}});b.bind("click",function(){var e=$(this),f=e.attr("rel"),c=e.text();b.removeClass("on");e.addClass("on");page.request({url:"/pulse/get",request:{type:f},success:function(g){$("#dashboard-pulse-label").text(c);a.pulse.refresh(g)}})});$("#rent-progress").bind("click",function(){location.href="/property/record"});return a};function PropertySetup(b){var a=this;a.propertyId=false;a.currentUnitId=false;if(b){if(b.propertyId){a.propertyId=b.propertyId}if(b.unitId){a.currentUnitId=b.unitId}}a.deletePropertyLink=$("#deletePropertyLink,#propertyOptionsList .delete");a.propertyName=$("#propertyNameLabel");a.propertyStreet=$("#propertyStreetLabel");a.propertyCity=$("#propertyCityLabel");a.propertyState=$("#propertyStateLabel");a.propertyZip=$("#propertyZipLabel");a.propertyPhoto=$("#propertyPhotoEdit");a.propertyThumbnail=$("#propertyPhotoDisplay");a.propertyForm=$("#propertyName, #propertyStreet, #propertyZip");a.propertyNameInput=$("#propertyName");a.propertyStreetInput=$("#propertyStreet");a.propertyZipInput=$("#propertyZip");a.savePropertyButton=$("#savePropertyButton");a.savePropertyCancel=$("#savePropertyCancel");a.editPropertyButton=$("#editPropertyButton");a.unitMakerButton=$("#unitMakerButton");a.unitMakerButtonLabel=$("#unitMakerButton > span");a.unitMakerInput=$("#unitsInput");a.unitMakerShortcuts=$("#unitMakerShortcuts");a.textarea=$("#unitInfo textarea");a.unitbox=$("#unitbox");a.unitInfoEdit=$("#editFloorPlan");a.unitInfoDisplay=$("#displayFloorPlan");a.floorPlan=$("#floorPlan");a.floorPlanForm=$("#unitForm");a.floorPlanInfo=$("#floorPlanInfo");a.floorPlanLabel=$("#floorPlanLabel");a.floorPlanPhoto=$("#unitInfo .uploadPlaceHolder");a.floorPlanDisplayPhoto=$("#floorPlanDisplayPhoto");a.floorPlanList=$("#floorPlanList");a.floorPlanListItem=$("#floorPlanList > li");a.saveFloorPlanButton=$("#saveFloorPlanButton");a.saveFloorPlanCancel=$("#saveFloorPlanCancel");a.floorPlanNameInput=$("#floorPlanName");a.unitLabel=$("#unitLabel, #unitEditorLabel");a.sqftInput=$("#sqft");a.bedsInput=$("#beds");a.bathsInput=$("#baths");a.floorPlanDescriptionInput=$("#floorPlanDescription");a.unitPhotosLabel=$("#unitPhotosLabel");a.assignFloorPlanStatus=false;a.progress=$("#progress");a.progressBar=$("#progress > .bar > span");a.progressLabel=$("#progress > label");a.exitSetup=$("#exitSetup");a.exitSetupButton=$("#exitSetupButton");a.tempPropertyPhoto={thumbid:"",photoid:"",thumbpath:""};if(a.propertyId){a.setPageState(2)}else{a.setPageState(1)}}PropertySetup.prototype.init=function(){var a=this;a.prop=new Property({propertyId:a.propertyId});a.unit=new Unit();a.property=a.prop.getProperty();a.unitscroller=new UnitScroller({property:a.property,clickUnit:function(b,c){b.removeClass("on");c.addClass("on");a.currentUnitId=c.attr("id");a.loadUnit()}});a.picViewer=new PicViewer("#unitPicViewer");a.resetScroller().initUnitButtonSetup().initPropertyInfo().initFloorPlanSave().initUnitMaker().initAjaxUpload();a.textarea.elastic();if($("#"+a.currentUnitId).attr("id")){a.unitscroller.scrollToUnit(a.currentUnitId);$("#"+a.currentUnitId).click()}if(a.property.type==="single"){$("#unitMaker").hide();$("#scrollFrame li:first").trigger("click");$("#deleteUnitLink, #renameUnitLink, #unitScroller > .label").remove()}else{$("#unitMaker").show()}};PropertySetup.prototype.resetUnit=function(){var a=this;a.unitInfoDisplay.css({display:"none"});a.unitInfoEdit.css({display:"none"});a.unitbox.css({display:"none"});return a};PropertySetup.prototype.initUnitButtonSetup=function(){var a=this;a.exitSetupButton.bind("click",function(){location.href="/property/view/"+a.propertyId});$("#editFloorPlanLink").bind("click",function(){a.exitAssignFloorPlanMode();a.showUnitEditor({action:"edit"})});$("#deleteUnitLink").bind("click",function(){page.fox.center().display({url:"deleteUnitConfirm.html",callback:function(){$("#deleteUnitButton").bind("click",function(){a.unit.deleteUnit({request:{unitId:a.currentUnit.id,propertyId:a.propertyId},success:function(b){page.errors.clear();if(b.errors){page.errors.prompt({errors:b.errors,offset:{x:0,y:0}})}else{a.property=b;a.resetUnit().resetScroller();page.fox.dock()}}})})}})});$("#renameUnitLink").bind("click",function(){var b=a.currentUnit.label;$("#unitLabel").css({display:"none"});$("#unitLabelRenamer").css({display:"block"});$("#unitLabelInput").val(b).focus().select()});$("#unitRenameCancel").bind("click",function(){$("#unitLabelRenamer").css({display:"none"});$("#unitLabel").css({display:"block"})});$("#unitRenameButton").bind("click",function(){var b=$("#unitLabelInput").val();a.unit.rename({request:{unitId:a.currentUnit.id,unitLabel:b,currentLabel:a.currentUnit.label,propertyId:a.propertyId},success:function(c){page.errors.clear();if(c.errors){page.errors.prompt({errors:c.errors,offset:{x:-200,y:0}})}else{a.property=c;a.loadUnit().resetScroller();page.fox.dock()}}})});return a};PropertySetup.prototype.loadUnit=function(){var a=this,c=[],g=a.currentUnitId;a.unitbox.css({display:"block"});$("#unitLabelRenamer").css({display:"none"});$("#unitLabel").css({display:"block"});$("#unitTooltip").hide();a.currentUnit=a.getUnit(g);var f=a.property.type,b=f==="single"?a.currentUnit.label:"Unit #"+a.currentUnit.label;a.unitLabel.text(b).unbind().bind("click",function(){location.href="/unit/view/"+g});a.unitPhotosLabel.text("Upload photos for "+b);a.loadFloorPlanList();if(a.currentUnit.floorPlan){var e=a.getFloorplan(a.currentUnit.floorPlan.id);a.floorPlanUploader.setData({floorplanId:a.currentUnit.floorPlan.id});c[0]="<p>"+a.currentUnit.floorPlan.sqft+" sqft<br />"+a.currentUnit.floorPlan.beds+" br / "+a.currentUnit.floorPlan.baths+" ba</p>";if(a.currentUnit.floorPlan.description){c[1]="<p>"+a.currentUnit.floorPlan.description+"</p>"}c[2]='<div class="assign"><a class="button" id="assignFloorPlanToOtherUnits"><span>&laquo; Assign floor plan to other units</span></a></div>';a.floorPlanDisplayPhoto.css({display:"block"});a.floorPlan.html(c.join("")).css({display:"block"});a.floorPlanLabel.text(a.currentUnit.floorPlan.label);if(f==="single"){$("#assignFloorPlanToOtherUnits").remove()}if(e.thumb){a.floorPlanPhoto.addClass("photo").children("img").attr({src:e.thumb})}else{a.floorPlanPhoto.removeClass("photo")}a.setupUploader();a.showUnit();$("#assignFloorPlanToOtherUnits").bind("click",function(){a.assignFloorPlanMode()});$("#editFloorPlanLink").css({display:"block"});$("#unitPicViewer").css({display:"block"});a.unitUploader.setData({unitid:a.currentUnit.id});page.request({url:"/unit/photos",type:"GET",request:{unitid:a.currentUnit.id},success:function(h){a.picViewer.setup(h)}})}else{$("#unitPicViewer").css({display:"none"});$("#editFloorPlanLink").css({display:"none"});if(a.property.floorPlans){a.floorPlanDisplayPhoto.css({display:"none"});a.floorPlan.css({display:"none"});a.floorPlanLabel.text("Choose floor plan");a.showUnit()}else{a.showUnitEditor({action:"new"})}}return a};PropertySetup.prototype.assignFloorPlanMode=function(){var a=this;var b=a.currentUnit.floorPlan.id;a.assignFloorPlanStatus=true;$("#assignFloorPlanToOtherUnits span").text("I'm done, save!").parent().addClass("primary").unbind().bind("click",function(){var c="";$("#scrollFrame li input:checked").each(function(){c+=$(this).parent().attr("id")+","});a.prop.assignFloorPlansToUnits({floorplanId:b,units:c.slice(0,-1),propertyId:a.propertyId,success:function(e){page.errors.clear();if(e.errors){page.errors.prompt({errors:e.errors,offset:{x:-270,y:0}})}else{a.property=e;a.exitAssignFloorPlanMode();page.fox.dock()}}})}).after('<a id="assignFloorPlanToOtherUnitsCancel" class="button"><span>Cancel</span></a>');$("#assignFloorPlanToOtherUnitsCancel").bind("click",function(){a.exitAssignFloorPlanMode()});a.unitscroller.property=a.property;a.unitscroller.loadUnits({currentUnit:a.currentUnit.id}).initListItems({eachUnit:function(f){var e='<input type="checkbox" id="ck_'+f.attr("id")+'" />';var c=a.getUnit(f.attr("id")).floorPlan.id;if(c){f.addClass("inuse")}if(c==b){e='<input type="checkbox" id="ck_'+f.attr("id")+'" checked="checked" />';f.addClass("highlight")}f.prepend(e)},allUnits:function(c){c.unbind("click");$("#scrollFrame > ul > li").unbind().bind("click",function(){if(a.unitscroller.clickable&&!$(this).children("input").attr("disabled")){if($(this).hasClass("highlight")){$(this).removeClass("highlight").children("input").attr({checked:""})}else{$(this).addClass("highlight").children("input").attr({checked:"checked"})}}a.unitscroller.clickable=true})}});return a};PropertySetup.prototype.exitAssignFloorPlanMode=function(){var a=this;if(a.assignFloorPlanStatus){a.resetScroller().loadUnit()}else{a.assignFloorPlanStatus=false}return a};PropertySetup.prototype.loadFloorPlanList=function(){var a=this;var c=[];for(var b in a.property.floorPlans){if(a.currentUnit.floorPlanid&&a.currentUnit.floorPlan.id==a.property.floorPlans[b].id){c[b]='<li class="on" id="'+a.property.floorPlans[b].id+'"><span class="delete"></span><span class="label" title="'+a.property.floorPlans[b].label+'">'+a.property.floorPlans[b].label+"</span></li>"}else{c[b]='<li id="'+a.property.floorPlans[b].id+'"><span class="delete"></span><span class="label" title="'+a.property.floorPlans[b].label+'">'+a.property.floorPlans[b].label+"</span></li>"}}a.floorPlanList.html(c.join("")).prepend('<li class="new">Create new floor plan</li>');$("#floorPlanList > li").unbind().bind("click",function(j){var f=$(this).attr("id");var g=$(this).hasClass("new");var i=f==a.currentUnit.floorPlan.id;a.exitAssignFloorPlanMode();if($(j.target).hasClass("delete")){var h=$(j.target).parent().attr("id");page.fox.center().display({url:"deleteFloorPlanConfirm.html",callback:function(){$("#deleteFloorPlanButton").bind("click",function(){a.prop.deleteFloorPlan({propertyId:a.propertyId,floorPlanId:h,success:function(e){page.errors.clear();if(e.errors){page.errors.prompt({errors:e.errors,offset:{x:0,y:0}})}else{a.property=e;a.loadUnit().resetScroller();page.fox.dock()}}})})}})}else{if(g){a.showUnitEditor({action:"new"})}else{if(!i){a.unit.addFloorPlanToUnit({floorplanId:f,unitId:a.currentUnit.id,propertyId:a.propertyId,success:function(e){page.errors.clear();if(e.errors){page.errors.prompt({errors:e.errors,offset:{x:0,y:0}})}else{a.property=e;a.loadUnit().resetScroller();page.fox.dock();a.loadUnit()}}})}}}});return a};PropertySetup.prototype.showUnitEditor=function(b){var a=this;a.saveFloorPlanAction=b.action;if(b.action=="edit"){a.floorPlanNameInput.attr({value:a.currentUnit.floorPlan.label}).addClass("active");a.sqftInput.attr({value:a.currentUnit.floorPlan.sqft}).addClass("active");a.bedsInput.attr({value:a.currentUnit.floorPlan.beds}).addClass("active");a.bathsInput.attr({value:a.currentUnit.floorPlan.baths}).addClass("active");a.floorPlanDescriptionInput.val(a.currentUnit.floorPlan.description)}else{a.floorPlanNameInput.attr({value:a.floorPlanNameInput.attr("alt")}).removeClass("active");a.sqftInput.attr({value:a.sqftInput.attr("alt")}).removeClass("active");a.bedsInput.attr({value:a.bedsInput.attr("alt")}).removeClass("active");a.bathsInput.attr({value:a.bathsInput.attr("alt")}).removeClass("active");a.floorPlanDescriptionInput.val("")}if(!a.property.floorPlans){a.saveFloorPlanCancel.css({display:"none"})}else{a.saveFloorPlanCancel.css({display:"block"})}a.unitInfoDisplay.css({display:"none"});a.unitInfoEdit.css({display:"block"});return a};PropertySetup.prototype.showUnit=function(){var a=this;a.unitInfoDisplay.css({display:"block"});a.unitInfoEdit.css({display:"none"});return a};PropertySetup.prototype.getUnit=function(c){var a=this;for(var b in a.property.units){if(a.property.units[b].id==c){return a.property.units[b]}}return false};PropertySetup.prototype.getFloorplan=function(a){var b=this;for(var c in b.property.floorPlans){if(b.property.floorPlans[c].id==a){return b.property.floorPlans[c]}}return false};PropertySetup.prototype.setPageState=function(c){var a=this;switch(c){case 1:$("#property-preview").hide();$("#edit-mode-text").css({"padding-left":0});a.setupUploader();var b=new AjaxUpload("#uploadPropertyPhoto",{action:"/property/uploadTempPhoto",onSubmit:function(e,f){page.ajaxStart()},responseType:"json",onComplete:function(f,e){page.ajaxStop();if(e.errors){page.errors.prompt(e)}else{a.tempPropertyPhoto=e;a.propertyPhoto.addClass("photo").children("img").attr({src:e.thumbpath});a.setupUploader()}}});$("#propertyInfo").css({display:"block"});a.pageState=1;page.nav.hideSubmenu();a.savePropertyCancel.css({display:"none"});a.editPropertyInfo();a.progress.css({display:"none"});a.savePropertyButton.bind("click",function(){var g=new Property(),e=$("#propertyType > option:selected").attr("value");var f=g.create({request:{name:a.propertyNameInput.attr("value"),type:e,street:a.propertyStreetInput.attr("value"),zip:a.propertyZipInput.attr("value"),state:$("#propertyState").val(),city:$("#propertyCity").val(),thumbid:a.tempPropertyPhoto.thumbid,photoid:a.tempPropertyPhoto.photoid},success:function(h){page.errors.clear();if(h.errors){page.errors.prompt({errors:h.errors,offset:{x:0,y:-40}})}else{if(e==="single"){a.createUnitForProperty(h.id,"Unit")}else{location.href="/property/setup/"+h.id}}}})});a.propertyForm.bind("keypress",function(g){var f=g.keyCode||g.which;if(f==13){a.savePropertyButton.click()}});$("#propertyName").focus();break;case 2:$("#propertyInfo, #unitMaker, #unitList, #unitInfo").css({display:"block"});a.init();a.pageState=2;page.nav.showSubmenu();a.showPropertyInfo();a.progress.css({display:"block"});a.unitMakerInput.focus();break;default:break}return a};PropertySetup.prototype.createUnitForProperty=function(a,c){var b={propertyId:a,units:c,unitCount:1};page.request({url:"/unit/create",request:b,success:function(e){location.href="/property/setup/"+e.id}})};PropertySetup.prototype.showPropertyInfo=function(){var a=this;$("#propertyInfoEdit").css({display:"none"});$("#propertyInfoDisplay").css({display:"block"});a.updatePropertyInfo();return a};PropertySetup.prototype.editPropertyInfo=function(){var a=this;a.propertyNameInput.focus();$("#propertyInfoDisplay").css({display:"none"});$("#propertyInfoEdit").css({display:"block"});return a};PropertySetup.prototype.updatePropertyInfo=function(){var a=this;a.propertyName.text(a.property.name);a.propertyStreet.text(a.property.street);a.propertyCity.text(a.property.city);a.propertyState.text(a.property.state);a.propertyZip.text(a.property.zip);$("#propertyType option[value='"+a.property.type+"']").attr("selected","selected");if(a.property.photo){a.propertyPhoto.addClass("photo").children("img").attr({src:a.property.photo});a.propertyThumbnail.attr({src:a.property.photo})}else{a.propertyPhoto.removeClass("photo");a.propertyThumbnail.attr({src:""})}page.thumbnail.init();return a};PropertySetup.prototype.initPropertyInfo=function(){var a=this;a.savePropertyButton.unbind().bind("click",function(){var b=$("#propertyType > option:selected").attr("value"),c=a.property.units.length;if(b==="single"&&a.property.type==="multi"&&c>0){page.errors.prompt({errors:[{selector:"#propertyType",message:"It seems you are trying to switch to a single unit property. Please delete all your current units first."}],offset:{x:0,y:0}});return}a.exitAssignFloorPlanMode();a.prop.save({request:{id:a.propertyId,type:b,name:a.propertyNameInput.attr("value"),street:a.propertyStreetInput.attr("value"),zip:a.propertyZipInput.attr("value"),state:$("#propertyState").val(),city:$("#propertyCity").val()},success:function(e){page.errors.clear();if(e.errors){page.errors.prompt({errors:e.errors,offset:{x:0,y:-40}})}else{if(c===0&&e.type=="single"){a.createUnitForProperty(a.propertyId,"Unit")}if(b!==a.property.type){location.href="/property/setup/"+a.propertyId}a.propertyId=e.id;a.property=e;a.showPropertyInfo();page.fox.dock()}}})}).addClass("fixedLength").children("span").text("Save");a.savePropertyCancel.bind("click",function(){a.exitAssignFloorPlanMode();a.showPropertyInfo()});a.editPropertyButton.bind("click",function(){a.exitAssignFloorPlanMode().setupUploader();a.savePropertyCancel.css({display:"block"});a.propertyNameInput.attr({value:a.property.name}).addClass("active");a.propertyStreetInput.attr({value:a.property.street}).addClass("active");a.propertyZipInput.attr({value:a.property.zip}).addClass("active");$("#propertyCity").val(a.property.city).addClass("active");$("#propertyState").val(a.property.state).addClass("active");a.editPropertyInfo()});a.deletePropertyLink.bind("click",function(){page.fox.center().display({url:"deletePropertyConfirm.html",callback:function(){$("#deletePropertyButton").bind("click",function(){a.prop.deleteProperty({propertyId:a.propertyId,success:function(b){page.errors.clear();if(b.errors){page.errors.prompt({errors:b.errors,offset:{x:0,y:0}})}else{location.href="/dashboard"}}})})}})});a.propertyName.bind("click",function(){location.href="/property/view/"+a.propertyId});return a};PropertySetup.prototype.initFloorPlanSave=function(){var a=this;a.saveFloorPlanButton.bind("click",function(){if(a.saveFloorPlanAction=="edit"){page.inputText.clear();a.prop.saveFloorPlan({input:{name:a.floorPlanNameInput.attr("value"),sqft:a.sqftInput.attr("value"),beds:a.bedsInput.attr("value"),baths:a.bathsInput.attr("value"),description:a.floorPlanDescriptionInput.attr("value")},floorplanId:a.currentUnit.floorPlan.id,success:function(b){page.errors.clear();if(b.errors){page.errors.prompt({errors:b.errors,offset:{x:-190,y:-40}})}else{a.property=b;a.loadUnit().resetScroller();page.fox.dock()}}});page.inputText.reset()}else{page.inputText.clear();a.prop.createFloorPlan({input:{name:a.floorPlanNameInput.attr("value"),sqft:a.sqftInput.attr("value"),beds:a.bedsInput.attr("value"),baths:a.bathsInput.attr("value"),description:a.floorPlanDescriptionInput.attr("value")},unitId:a.currentUnit.id,propertyId:a.propertyId,success:function(b){page.errors.clear();if(b.errors){page.errors.prompt({errors:b.errors,offset:{x:-190,y:-40}})}else{a.property=b;a.loadUnit().resetScroller();page.fox.dock()}}});page.inputText.reset()}});a.saveFloorPlanCancel.bind("click",function(){a.showUnit()});return a};PropertySetup.prototype.initUnitMaker=function(){var a=this;a.unitMakerButton.bind("click",function(){a.exitAssignFloorPlanMode();a.prop.addUnits({input:a.unitMakerInput.attr("value"),success:function(b){page.errors.clear();if(b.errors){page.errors.prompt({errors:b.errors,offset:{x:-100,y:-40}})}else{page.fox.dock();a.property=b;a.resetScroller().resetUnit();a.unitMakerInput.attr({value:""})}}})});a.unitMakerInput.bind("keyup",function(b){if(b.keyCode==13){a.unitMakerButton.click()}});a.unitMakerInput.bind("focus",function(){a.unitMakerShortcuts.css({display:"block"})}).bind("blur",function(){a.unitMakerShortcuts.css({display:"none"})}).bind("keyup",function(){if(a.unitMakerInput.attr("value").match("x ")){a.unitMakerButtonLabel.text("Delete unit numbers")}else{a.unitMakerButtonLabel.text("Add unit numbers")}});return a};PropertySetup.prototype.resetScroller=function(){var a=this;a.unitscroller.property=a.property;$("#unitTooltip").hide();if(a.currentUnit){a.unitscroller.loadUnits({currentUnit:a.currentUnit.id})}else{a.unitscroller.loadUnits();if($("#scrollFrame > ul > li").size()>0){$("#unitTooltip").show()}}a.unitscroller.initListItems({eachUnit:function(c){var b=a.getUnit(c.attr("id")).floorPlan.id;c.addClass("noFloorPlan");if(b){c.addClass("hasFloorPlan")}}});a.updateProgressBar();return a};PropertySetup.prototype.updateProgressBar=function(){var c=this;var a=$("#unitScroller li.hasFloorPlan").size();var e=$("#unitScroller li").size();var b=0;if(e){b=Math.round(100*a/e);if(b&&c.pageState==2){c.progress.css({display:"block"})}else{c.progress.css({display:"none"})}c.progressBar.css({width:""+b+"%"}).parent().css({display:"block"});c.progressLabel.text("You have associated floorplans for "+a+" of "+e+" units ("+b+"%)").css({display:"block"});if(b==100){c.exitSetup.css({display:"block"})}else{c.exitSetup.css({display:"none"})}}else{c.progressBar.parent().css({display:"none"});c.progressLabel.css({display:"none"});c.exitSetup.css({display:"none"})}return c};PropertySetup.prototype.initAjaxUpload=function(){var b=this,e=b.picViewer,a={errors:[]};b.setupUploader();var c=new AjaxUpload("#uploadPropertyPhoto",{action:"/property/uploadPhoto",data:{propertyId:b.propertyId},onSubmit:function(f,g){page.ajaxStart()},responseType:"json",onComplete:function(g,f){page.ajaxStop();if(f.errors){page.errors.prompt(f)}else{b.property.photo=f.thumbpath;b.updatePropertyInfo().setupUploader()}}});b.floorPlanUploader=new AjaxUpload("#uploadFloorPlanOnDisplay",{action:"/floorplan/uploadPhoto",onSubmit:function(f,g){page.ajaxStart()},responseType:"json",onComplete:function(g,f){page.ajaxStop();if(f.errors){page.errors.prompt(f)}else{b.property=b.prop.getProperty();b.loadUnit()}}});b.unitUploader=new AjaxUpload("#unitPicViewer-upload",{action:"/unit/uploadPhoto",onSubmit:function(f,g){page.ajaxStart()},responseType:"json",onComplete:function(g,f){page.ajaxStop();if(f.errors){page.errors.prompt(f)}else{e.addPhoto(f)}}});$("#unitPicViewer-delete").bind("click",function(){var f=e.photos[e.photoIndex],g=f?f.id:false;if(g){page.fox.confirm({message:"Are you sure you want to delete this photo?",confirmButtonText:"Delete photo",success:function(){page.request({url:"/unit/removePhoto",request:{photoid:g},success:function(h){e.removePhoto()}})}})}else{page.fox.message({title:"Oops!",message:"The photo you are trying to delete does not exist."})}});$("#unitPicViewer").filedrop({url:"/unit/uploadPhoto",data:{unitid:function(){return b.currentUnit.id}},error:function(g,f){switch(g){case"BrowserNotSupported":a.errors.push({selector:"",message:"Your browser does not support drag and drop uploading.  Currently only Firefox 3.6+ supports this feature. Please use the upload button instead."});page.errors.prompt(a);break;case"TooManyFiles":a.errors.push({selector:"",message:"Too many files. You can only upload 25 files at a time."});page.errors.prompt(a);break;case"FileTooLarge":a.errors.push({selector:"",message:f.name+" is too large. Please keep each photo under 20MB."});page.errors.prompt(a);break;default:break}},maxfilesize:20,dragOver:function(){e.activateDropzone()},dragLeave:function(){e.deactivateDropzone()},docOver:function(){e.showDropzone()},docLeave:function(){e.hideDropzone()},drop:function(){e.hideDropzone();a.errors=[]},uploadStarted:function(h,g,f){page.ajaxStart()},uploadFinished:function(h,g,f,j){page.ajaxStop();if(f[0].errors){a.errors.push({selector:"",message:g.name+" failed to upload. "+f[0].errors[0].message});page.errors.prompt(a);return false}else{e.addPhoto(f[0])}}});return b};PropertySetup.prototype.setupUploader=function(){var a=this;$(".uploadPlaceHolder").unbind().each(function(){if($(this).hasClass("photo")){$(this).css({background:"url("+$(this).children("img").attr("src")+") center center no-repeat"}).children("span").text("Replace Image")}else{var b="";if($(this).parent().attr("id")=="saveProperty"){b="Upload photo"}else{b="Upload floor plan"}$(this).css({background:'url("/styles/img/upload_photo_bg.png")'}).children("span").text(b)}}).bind("click",function(){if($(this).hasClass("photo")){var b=$(this).find("img").attr("src").replace("-thumb","");page.previewModal.show(b)}});return a};function PropertyView(b){var a=this;a.propertyId=false;if(b){a.propertyId=b.propertyId}a.init();return a}PropertyView.prototype.init=function(){var a=this;a.prop=new Property({propertyId:a.propertyId});a.property=a.prop.getProperty();a.unitscroller=new UnitScroller({property:a.property,clickUnit:function(e,h){var i=h.attr("id");var g=h.text();var f=a.getUnit(i);location.href="/unit/view/"+i}});a.unitscroller.initListItems({eachUnit:function(f){var e=a.getUnit(f.attr("id"));if(!e.floorPlan.id){f.addClass("noFloorPlan")}else{if(e.id==a.unitId){f.addClass("on")}}}});if(a.property.photo){$("#propertyPhotoDisplay").attr({src:a.property.photo})}var b=$("#property-pulse-options > li"),c=a.propertyId;a.pulse=new Pulse("#property-pulse");page.request({url:"/pulse/get",request:{propertyid:c},success:function(e){a.pulse.refresh(e)}});b.bind("click",function(){var f=$(this),g=f.attr("rel"),e=f.text();b.removeClass("on");f.addClass("on");page.request({url:"/pulse/get",request:{type:g,propertyid:c},success:function(h){$("#property-pulse-label").text(e);a.pulse.refresh(h)}})});$("#rent-progress").bind("click",function(){location.href="/property/record#property="+a.propertyId});a.renderCharts()};PropertyView.prototype.renderCharts=function(){var a=this;page.request({url:"/chart/monthlyOccupancy",request:{propertyid:a.propertyId},success:function(b){var c=new Highcharts.Chart({chart:{renderTo:"monthly-occupancy-chart",defaultSeriesType:"area"},title:{text:"Monthly Occupancy Chart"},xAxis:{categories:b.xAxis,title:{text:"Month"}},yAxis:{title:{text:"Occupancy %"},labels:{formatter:function(){return this.value+"%"}},max:100},tooltip:{formatter:function(){return Highcharts.numberFormat(this.y,0,null," ")+"% "+this.series.name+" in "+this.x}},series:b.series})}})};PropertyView.prototype.getUnit=function(c){var a=this;for(var b in a.property.units){if(a.property.units[b].id==c){return a.property.units[b]}}return false};function PropertyRecord(g){var p=this;p.propertyId=false;if(g){p.propertyId=g.propertyId}p.paidButton='<a class="mini button paid"><span><img src="/styles/img/ico/accept.png" />Rent Received</span></a>';p.clickmenu='<div class="opts"><div class="clickmenu"><div class="wrap"><label></label><div class="options"><ul><li class="late">Charge Late Fee</li><li class="undo">Undo Payment</li></ul></div></div></div></div>';p.months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];p.initVisit=1;var f="";function j(){var r=new Date();var q=r.getMonth();var s=r.getFullYear();if(q===12){q=1;s=s+1}else{q=q+1}p.thisMonth=q;p.thisYear=s;p.curMonth=q;p.curYear=s;p.curUnit="all";p.curStatus="all";p.curPage=1;p.propList=f}function b(){page.request({url:"/rent/json",request:{month:p.curMonth,year:p.curYear,unit:p.curUnit,status:p.curStatus,page:p.curPage,propList:p.propList},success:function(r){p.json=r}});var q="";$.each(p.json.rent,function(u,w){var v="th";if(w.due=="1"){v="st"}if(w.due=="2"){v="nd"}if(w.due=="3"){v="rd"}w.due=w.due+v;var r="";if(w.statusType===1){r+='<div class="opts"><div class="clickmenu"><div class="wrap"><label></label>';r+='<div class="options"><ul><li class="late">Charge Late Fee</li>';r+='<li class="undo">Undo Payment</li></ul></div></div></div></div>';r+="<span>"+w.status+"</span>";q+='<tr class="ok">'}else{if(w.statusType===2){r+=p.paidButton;r+="<span>"+w.status+"</span>";q+='<tr class="overdue">'}else{if(w.statusType===3){r+='<div class="opts"><div class="clickmenu"><div class="wrap"><label></label>';r+='<div class="options"><ul><li class="latePaid">Late Pay Received</li>';r+='<li class="undo">Undo Payment</li></ul></div></div></div></div>';r+="<span>"+w.status+"</span>";q+='<tr class="warning">'}else{if(w.statusType===4){r+='<div class="opts"><div class="clickmenu"><div class="wrap"><label></label>';r+='<div class="options"><ul><li class="undo">Undo Payment</li></ul>';r+="</div></div></div></div>";q+='<tr class="ok">';r+="<span>"+w.status+"</span>"}else{if(w.statusType===5||w.statusType===6){r+=p.paidButton;r+="<span>"+w.status+"</span>";q+="<tr>"}}}}}q+='<td class="info"><span></span></td>';q+='<td class="property"><span>'+w.propertyName+"</span></td>";q+='<td class="unit on" id="'+w.unitId+'"><span>'+w.unitLabel+"</span></td>";q+='<td class="rent" id="'+w.leaseId+'"><span>'+w.rent.toFixed(2)+"</span></td>";q+='<td class="due"><span>'+w.due+"</span></td>";q+='<td class="status">'+r+"</td></tr>"});if(!q){q+='<tr class="norecords"><td colspan="6"><span>No leases found.</span></td></tr>'}$("#propertyRecord tbody").html(q);a()}function k(v){if(v){var z=page.getHashVal("page");var s=page.getHashVal("date");var q=page.getHashVal("property");var A=page.getHashVal("unit");var u=page.getHashVal("status");if(z&&p.curPage!==1){p.curPage=parseInt(z)}else{p.curPage=1}if(s){var r=s.split("+");var w=r[0];var x=r[1];p.curMonth=w;p.curYear=x}if(q){if(q==="all"){p.propList=f}else{p.propList=q}}else{p.propList=f}if(A&&A!="all"){p.curUnit=A}if(u){p.curStatus=u}}else{j()}h();b()}function h(){var r=page.getHashVal("date");var q=page.getHashVal("status");var u=page.getHashVal("property");if(r){var s=r.split("+");if(p.thisMonth===s[0]&&p.thisYear===s[1]){$("#dateDropDown option:first").next().attr("selected","selected")}else{$("#dateDropDown option[value="+r+"]").attr("selected","selected")}}else{$("#dateDropDown option:first").next().attr("selected","selected")}if(!u||u==="all"){$("#propertyDropDown option:first").attr("selected","selected")}else{var u=page.getHashVal("property");u=u.split("+").join(" ");$("#propertyDropDown option[value="+u+"]").attr("selected","selected")}if(q){$("#statusDropDown option[value="+q+"]").attr("selected","selected")}else{$("#statusDropDown option:first").attr("selected","selected")}}function o(){var s=new ClickMenu;if(p.initVisit){page.request({url:"/property/getPropAndLeaseDates",success:function(z){p.propNameDate=z}});var v=[];propDateHtml="";if(p.propNameDate.dates.length>0){var r=p.curMonth+1;var x=p.curMonth==12?p.curYear+1:p.curYear;propDateHtml+='<option value="'+r+"+"+x+'">'+p.months[r-1]+" "+x+"</option>"}$.each(p.propNameDate.dates,function(B,C){var A=C.split("+");var z=parseInt(A[0])-1;var D=parseInt(A[1]);z=p.months[z];propDateHtml+='<option value="'+C+'">'+z+" "+D+"</option>"});if(!propDateHtml){propDateHtml+='<option value="'+p.curMonth+"+"+p.curYear+'">'+p.months[p.curMonth-1]+" "+p.curYear+"</option>"}$("#dateDropDown").html(propDateHtml);$("#dateDropDown option:first").next().attr("selected","selected");var w=[];var u=[];$.each(p.propNameDate.properties,function(z,A){w[A.name]=A.id;u.push(A.id)});f=u.join(",");p.propList=f;propHtml='<option id="all" value="All Properties">All Properties</option>';for(var q in w){if(w.hasOwnProperty(q)){propHtml+='<option id="'+w[q]+'" value="'+q+'">'+q+"</option>"}}$("#propertyDropDown").html(propHtml);p.initVisit=0}if(location.href.indexOf("#")==-1){b()}$.historyInit(k);$(".mini.button.paid").live("click",function(){var z=$(this).parent().parent();c(z)});$("tbody > tr > .unit").live("click",function(B){var C=$(this).attr("id");var A=$(this).parent();var z={url:"unitContact/"+C,callback:function(){A.addClass("selected")},close:function(){A.removeClass("selected")}};page.fox.center({x:125,y:-100}).display(z)});$("#unit").bind("keypress",function(B){var A=B.keyCode||B.which;if(A==13){var z=$("#unit").val();if(!z.match(/^[a-zA-Z0-9]+$/i)&&z!=""){page.fox.message({message:"Unit filter only accepts letters and numbers. 							Please try again.",close:function(){parentTR.removeClass("selected")}});return false}p.curUnit=z;p.curStatus="all";if(z){if(p.curPage>1){p.curPage=1;$.historyLoad(page.makeMultipleHash(["unit",z],["page",1]))}else{$.historyLoad(page.makeHash("unit",z))}}else{$.historyLoad(page.makeHash("unit","all"))}}});$("tbody > tr > .rent").live("click",function(){var E=$(this).prev().attr("id");var D=$(this).parent();var z=D.find(".paid");var A=$(this).text();var C=$(this);var B={url:"updateRent/"+A,callback:function(){D.addClass("selected");$("#changeRent").bind("click",function(){var G=$("#rentAmount").val();if(!G.match(/^(\d{1,3}(\,\d{3})*|(\d+))(\.\d{2})?$/i)){var F='<div class="error"><span><span>Please enter a valid amount</span></span></div>';$("#rentAmount").before(F);return false}C.html("<span>"+G+"</span>");if(z.length){z.click()}else{var H=D.children(".unit").attr("id");page.request({url:"/rent/updateTransaction",request:{amount:G,unitId:H,forMonth:p.curMonth,forYear:p.curYear},success:function(I){}})}})},close:function(){D.removeClass("selected")}};page.fox.center({x:0,y:-50}).display(B)});$(".pagination .first").bind("click",function(){if($(this).hasClass("disabled")){return false}p.curPage=1;$.historyLoad(page.makeHash("page",p.curPage))});$(".pagination .prev").bind("click",function(){if($(this).hasClass("disabled")){return false}var A=p.curPage*20;var z=A-19;if(z!=1){p.curPage=p.curPage-1}$.historyLoad(page.makeHash("page",p.curPage))});$(".pagination .next").bind("click",function(){if($(this).hasClass("disabled")){return false}var A=p.json.totalRecords;var z=p.curPage*20;if(z<A){p.curPage=p.curPage+1}$.historyLoad(page.makeHash("page",p.curPage))});$(".pagination .last").bind("click",function(){if($(this).hasClass("disabled")){return false}var z=p.json.totalRecords;p.curPage=Math.ceil(z/20);$.historyLoad(page.makeHash("page",p.curPage))});$("#dateDropDown").change(function(){var B=$("#dateDropDown option:selected").attr("value");var A=B.split("+");var z=A[0];var C=A[1];p.curMonth=z;p.curYear=C;if(p.curPage>1){p.curPage=1;$.historyLoad(page.makeMultipleHash(["date",B],["page",1]))}else{$.historyLoad(page.makeHash("date",B))}});$("#propertyDropDown").change(function(){var A=$("#propertyDropDown option:selected");var z=A.attr("id");if(p.curPage>1){p.curPage=1;$.historyLoad(page.makeMultipleHash(["property",z],["page",1]))}else{$.historyLoad(page.makeHash("property",z))}});$("#statusDropDown").change(function(){var z=$("#statusDropDown option:selected").attr("value");p.curStatus=z;if(p.curPage>1){p.curPage=1;$.historyLoad(page.makeMultipleHash(["status",z],["page",1]))}else{$.historyLoad(page.makeHash("status",z))}});l();i()}function l(){var q=100;$(".opts > .clickmenu").each(function(r){$(this).css({"z-index":q-r})})}function c(B,r){var q=B.children("td.rent");var x=q.attr("id");var z=q.text();var s=B.children("td.unit").attr("id");var C;var v=0;if(r){v=1}var A=B.children("td.due").text();A=A.match(/^\d+/);page.request({url:"/rent/markPaid",request:{unitId:s,leaseId:x,amount:z,due:A,forMonth:p.curMonth,forYear:p.curYear,markLatePaid:v},success:function(D){C=D}});var w=B.children("td.status").children("a.paid");var u=B.children("td.status").children("span");B.removeClass("overdue warning").addClass("ok");if(r){lateChargeButton=B.children("td.status").children(".opts").children(".clickmenu").children(".wrap").children(".options").children("ul").children(".latePaid");u.text("Rent Received, including "+r+" late fee");lateChargeButton.remove()}else{w.replaceWith(p.clickmenu);u.text("Rent Received")}l()}function e(v,x,s,r){page.request({url:"/rent/markLate",request:{unitId:x,latefee:s,forMonth:p.curMonth,forYear:p.curYear,date:r,remind:$("#remindTenant").is(":checked")},success:function(){}});var u=v.children("td.status").children(".opts");var q=v.children("td.status").children("span");var w=u.children(".clickmenu").children(".wrap").children(".options").children("ul").children(".late");w.replaceWith('<li class="latePaid">Late Pay Received</li>');v.removeClass("ok").addClass("warning");if(!s.match(/^\$.+$/i)){s=parseFloat(s);s="$"+s.toFixed(2)}q.text("Rent Received, still owes "+s+" late fee")}function n(s,v,u){page.request({url:"/rent/markUnpaid",request:{unitId:v,forMonth:p.curMonth,forYear:p.curYear},success:function(){}});var r=s.children("td.status").children(".opts");var q=s.children("td.status").children("span");r.replaceWith(p.paidButton);s.removeClass("ok warning");q.text(u)}function i(){$(".clickmenu").live("click",function(v){var u=null;var s=$(v.target).closest("tr");switch($(v.target).attr("class")){case"late":var w=s.children(".unit").attr("id");var q=w+"+"+p.curMonth+"+"+p.curYear;$(".error").remove();u={url:"lateRent/"+q,callback:function(){$("#chargeLateFee").bind("click",function(){$(".error").remove();var B=0;if($("#lateFee").is("input")){var A=$("#lateFee").val();if(!A.match(/^(\d{1,3}(\,\d{3})*|(\d+))(\.\d{2})?$/i)){var z='<div class="error"><span><span>Please enter a valid amount</span></span></div>';$("#lateFee").before(z);B=1}else{if(A.match(/^[0\.]*$/i)){var z='<div class="error"><span><span>Cannot charge late fee of 0</span></span></div>';$("#lateFee").before(z);B=1}}}else{var A=$("#lateFee").html();if(A=="$0.00"){var z='<div class="error"><span><span>Cannot charge late fee of 0</span></span></div>';$("#lateFee").before(z);B=1}}var x=$("#rentReceivedDate").val();if(!x.match(/^(0[1-9]|1[012])[- /.](0[1-9]|[12][0-9]|3[01])[- /.](19|20)\d\d$/i)){var z='<div class="error"><span><span>Date format: mm/dd/yyyy</span></span></div>';$("#rentReceivedDate").before(z);B=1}if(B){return false}var C="You have successfully recorded a late payment.";if($("#remindTenant").is(":checked")){C="You have billed <strong>"+A+"</strong> in late fees to unit 503. 									This unit will be notified by email of the late fee."}page.fox.message({title:"Success!",message:C});e(s,w,A,x)});$("#remindTenant").bind("click",function(){if($(this).is(":checked")){$("#willRemindText").css({display:"block"})}else{$("#willRemindText").css({display:"none"})}});s.addClass("selected")},close:function(){s.removeClass("selected")}};break;case"undo":s.addClass("selected");page.fox.confirm({message:"Are you sure you want to revert this payment? 							It will now be considered unpaid.",confirmButtonText:"Yes, please undo",success:function(){var z="";var x="Payment Undo";var A=s.children(".unit").attr("id");n(s,A,x,z)},close:function(){s.removeClass("selected")},offset:{x:200,y:0}});break;case"latePaid":var r=s.children(".status").text().match(/\$[^\s]*/);c(s,r);break;case"remind":u={url:"remindTenant",callback:function(){page.inputText.reset();s.addClass("selected")},close:function(){s.removeClass("selected")}};break;default:break}if(u){page.fox.center({x:100,y:-100}).display(u)}})}function a(){var u=p.json.totalRecords;var r=Math.ceil(u/20);var s=p.curPage*20;var q=s-19;if(q>u){q=1}if(s>u){s=u}if(u===0){q=0}$(".pagination .pages").html(q+"-"+s+" of "+u);if(s<u){$(".pagination .next").removeClass("disabled");$(".pagination .last").removeClass("disabled")}if(p.curPage==r){$(".pagination .next").addClass("disabled");$(".pagination .last").addClass("disabled")}if(p.curPage==1){$(".pagination .first").addClass("disabled");$(".pagination .prev").addClass("disabled")}if(p.curPage!=1&&p.curPage<=r){$(".pagination .first").removeClass("disabled");$(".pagination .prev").removeClass("disabled")}}j();o();return p}function PropertyUnits(){var n=this;var v=["unit","rent","rent.reverse","due","due.reverse","late","late.reverse"],u=null,a=1,o=0,s=0,h=0,l=0;var q={};function j(){c();if(a){page.request({url:"/property/getPropertyList",success:function(z){n.propNameList=z}});var x=[];$.each(n.propNameList.properties,function(z,A){x[A.name]=A.id});propHtml='<option id="all" value="All Properties">All Properties</option>';for(var w in x){if(x.hasOwnProperty(w)){propHtml+='<option id="'+x[w]+'" value="'+w+'">'+w+"</option>"}}$("#propertyDropDown").html(propHtml);a=0}if(location.href.indexOf("#")==-1){f()}$.historyInit(g)}$("#unit").bind("keypress",function(z){var x=z.keyCode||z.which;if(x==13){var w=$("#unit").val();if(!w.match(/^[a-zA-Z0-9]+$/i)&&w!=""){page.fox.message({message:"Unit filter only accepts letters and numbers. 						Please try again.",close:function(){parentTR.removeClass("selected")}});return false}b();q.sort=0;q.unit=w;q.status="all";if(w){if(q.curPage>1){q.curPage=1;$.historyLoad(page.makeMultipleHash(["unit",w],["page",1]))}else{$.historyLoad(page.makeHash("unit",w))}}else{$.historyLoad(page.makeHash("unit","all"))}}});function e(){$("tbody > tr > .unit").bind("click",function(z){var A=$(this).attr("id");var x=$(this).parent();var w={url:"unitContact/"+A,callback:function(){x.addClass("selected")},close:function(){x.removeClass("selected")}};page.fox.center({x:0,y:-100}).display(w)})}function c(){q.propertyId="all";q.unit=0;q.status="all";q.curPage=1;q.sort=0;q.sortOrder=0;l=0}$("#propertyDropDown").change(function(){var w=$("#propertyDropDown option:selected").attr("id");if(q.curPage>1){q.curPage=1;$.historyLoad(page.makeMultipleHash(["property",w],["page",1]))}else{$.historyLoad(page.makeHash("property",w))}});$("#statusDropDown").change(function(){var w=$("#statusDropDown option:selected").attr("id");if(q.curPage>1){q.curPage=1;$.historyLoad(page.makeMultipleHash(["status",w],["page",1]))}else{$.historyLoad(page.makeHash("status",w))}});$("#rent").bind("click",function(){if(o===0||o==="desc"){q.sort=$(this).attr("id");q.sortOrder="asc";o="asc";s=0;h=0}else{q.sort=$(this).attr("id");q.sortOrder="desc";o="desc"}if(q.curPage!=1){q.curPage=1}r("rent")});$("#due").bind("click",function(){if(s===0||s==="desc"){q.sort=$(this).attr("id");q.sortOrder="asc";s="asc";o=0;h=0}else{q.sort=$(this).attr("id");q.sortOrder="desc";s="desc"}if(q.curPage!=1){q.curPage=1}r("due")});$("#late").bind("click",function(){if(h===0||h==="desc"){q.sort=$(this).attr("id");q.sortOrder="asc";h="asc";o=0;s=0}else{q.sort=$(this).attr("id");q.sortOrder="desc";h="desc"}if(q.curPage!=1){q.curPage=1}r("late")});function f(){page.request({url:"/unitDisplay/json",request:{propertyId:q.propertyId,unit:q.unit,sort:q.sort,sortOrder:q.sortOrder,status:q.status,curPage:q.curPage,initVisit:a},success:function(x){n.json=x}});var w="";$.each(n.json.unit,function(x,A){if(A.rent!=="-"){A.rent="$"+A.rent}if(A.due!=="-"){var z="th";if(A.due=="1"){z="st"}if(A.due=="2"){z="nd"}if(A.due=="3"){z="rd"}A.due=A.due+z}w+='<tr><td class="property"><span>'+A.propertyName+"</span></td>";w+='<td class="unit" id="'+A.unitId+'"><span>'+A.label+"</span></td>";w+='<td class="rent"><span>'+A.rent+"</span></td>";w+='<td class="due"><span>'+A.due+"</span></td>";w+='<td class="late"><span>'+A.latepay+"</span></td>";w+='<td class="status"><span>'+A.status+"</span></td></tr>"});$("#propertyUnits tbody").html(w);statusHtml="";statusHtml+='<option id="all">Status</option>';statusHtml+='<option id="m2m">Month-to-month ('+n.json.m2m+")</option>";statusHtml+='<option id="underContract">Under Contract ('+n.json.underContract+")</option>";statusHtml+='<option id="vacant">Vacant ('+n.json.vacant+")</option>";statusHtml+='<option id="movingOut">Moving Out ('+n.json.movingOut+")</option>";statusHtml+='<option id="movingIn">Moving In ('+n.json.movingIn+")</option>";$("#statusDropDown").html(statusHtml);$('#statusDropDown option[id="'+q.status+'"]').attr("selected","selected");if(n.json.unit.length===0){w+='<tr><td colspan="6" class="property"><span>No records</span></td></tr>';$("#propertyUnits tbody").html(w)}if(q.propertyId!="all"){$('#propertyDropDown option[value="'+l+'"]').attr("selected","selected")}else{$('#propertyDropDown option[value="All Properties"]').attr("selected","selected")}if(q.sort==0){b()}else{$("#propertyUnits th, #propertyUnits td").removeClass("on");$("."+q.sort).addClass("on")}p();e()}function p(){var A=n.json.totalStatusRecords;var x=Math.ceil(A/20);var z=q.curPage*20;var w=z-19;if(w>A){w=1}if(z>A){z=A}if(A===0){w=0}$(".pagination .pages").html(w+"-"+z+" of "+A);if(z<A){$(".pagination .next").removeClass("disabled");$(".pagination .last").removeClass("disabled")}if(q.curPage==x){$(".pagination .next").addClass("disabled");$(".pagination .last").addClass("disabled")}if(q.curPage==1){$(".pagination .first").addClass("disabled");$(".pagination .prev").addClass("disabled")}if(q.curPage!=1&&q.curPage<=x){$(".pagination .first").removeClass("disabled");$(".pagination .prev").removeClass("disabled")}}$(".pagination .first").bind("click",function(){if($(this).hasClass("disabled")){return false}q.curPage=1;$.historyLoad(page.makeHash("page",q.curPage))});$(".pagination .prev").bind("click",function(){if($(this).hasClass("disabled")){return false}var x=q.curPage*20;var w=x-19;if(w!=1){q.curPage=q.curPage-1}$.historyLoad(page.makeHash("page",q.curPage))});$(".pagination .next").bind("click",function(){if($(this).hasClass("disabled")){return false}var x=n.json.totalStatusRecords;var w=q.curPage*20;if(w<x){q.curPage=q.curPage+1}$.historyLoad(page.makeHash("page",q.curPage))});$(".pagination .last").bind("click",function(){if($(this).hasClass("disabled")){return false}var w=n.json.totalStatusRecords;q.curPage=Math.ceil(w/20);$.historyLoad(page.makeHash("page",q.curPage))});function r(x){var w=k(x);$.historyLoad(page.makeHash("sort",w))}function b(){$("#propertyUnits th, #propertyUnits td").removeClass("on");$("#propertyUnits .unit").addClass("on");$(".sortImg").css({display:"none"})}function i(z){if(0>$.inArray(z,v)){return false}var x="up";var w=$("#sortUp");$(".sortImg").css({display:"none"});if(z.match(".reverse")){z=z.replace(".reverse","");x="down";w=$("#sortDown")}$("th, td").removeClass("on up down");$("."+z).addClass("on");var A=$("th."+z).addClass(x).children("span");if(z!="unit"){A.append(w.css({display:"inline"}))}return true}function k(x){var w=(x==u);if(w){x=x+".reverse"}return x}function g(B){if(B){var z=page.getHashVal("sort");var A=page.getHashVal("page");var x=page.getHashVal("unit");var D=page.getHashVal("property");var w=page.getHashVal("status");if(z){var C=z.split(".");q.sort=C[0];q.sortOrder=C[1]?"desc":"asc"}else{q.sort=0}if(A&&q.curPage!==1){q.curPage=parseInt(A)}else{q.curPage=1}if(D){q.propertyId=D}else{q.propertyId="all"}if(x&&x!="all"){q.unit=x}else{q.unit=0}if(w){q.status=w}else{q.status="all"}u=z;i(z)}else{c();l="All Properties"}f()}j();return n}function ReportsTransactions(){var b={};self.months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];self.income=0;self.expense=0;self.initLoad=1;self.periodClick=0;function g(){b.curMonth="all";b.curYear="all";b.curType="all";b.curSearch="all";b.curFilter="all";b.curDatePeriod="all";b.curPage=1;b.curProperty="all";b.updateBalance=0}function j(){new Datepicker("#incomeDate","days");new Datepicker("#expenseDate","days");$("#incomeDate, #expenseDate").mask("99/99/9999");$("#sidepanel .panel a.close").bind("click",function(){i("default");e()});$("#editTransactionPanel .tabs > li:not(.on)").live("click",function(p){$("#editTransactionPanel .tabs > li").removeClass("on");$(this).addClass("on");$("#editTransactionPanel .form").removeClass("on");$("#"+$(this).attr("id").replace("Tab","")).addClass("on")});$("#editIncomeTab").bind("click",function(){var p=$("#incomeType > option:selected").val()==="Rent";$(".income-record-view").hide();if(p){$("#record-rent").show()}else{$("#record-non-rent").show()}});$("#transactionList tbody > tr:not(.selected):not(.noRecords)").live("click",function(){e();var w=$(this).attr("class");i("editTransaction","edit",w);$(this).addClass("selected");self.transToggle=0;self.rentRow=0;self.transId=$(this).attr("id");$("#reportsTransactions .sidepanel .delete").show();if(w==="Income"){var A=$(this).children(".type").text();if(A==="Rent"){$("#incomeType").hide();self.rentRow=1}else{$("#incomeType").show();$("#incomeType option:contains("+A+")").attr("selected","selected")}$("#incomeFrom").val($(this).children(".who").text());$("#incomeAmount").val($(this).children(".amount").text().replace("+$",""));var r=$(this).children(".date").attr("id");r=r.split("-");var x=r[0];var q=r[1];var v=r[2];if(q.length==1){q="0"+q}if(v.length==1){v="0"+v}$("#incomeDate").val(q+"/"+v+"/"+x)}else{var u=$(this).children(".type").text();$("#expenseType option:contains("+u+")").attr("selected","selected");$("#expensePay").val($(this).children(".who").text());$("#expenseAmount").val($(this).children(".amount").text().replace("-$",""));var p=$(this).children(".date").attr("id");p=p.split("-");var B=p[0];var s=p[1];var z=p[2];if(s.length==1){s="0"+s}if(z.length==1){z="0"+z}$("#expenseDate").val(s+"/"+z+"/"+B)}});$("#reportsTransactions .sidepanel .delete").bind("click",function(){page.fox.confirm({message:"Are you sure you want to delete this transaction?",confirmButtonText:"Yes, please delete",success:function(){page.request({url:"/reports/delete",request:{transId:self.transId},success:function(p){i("default");b.updateBalance=1;c();e()}})}})});$("#expenseTemplate").bind("onchange",function(){});page.request({url:"/property/getPropAndTransDates",success:function(p){self.initInfo=p}});propDateHtml="";propDateHtml+='<option value="all">Month</option>';$.each(self.initInfo.dates,function(r,s){var q=s.split("+");var p=parseInt(q[0])-1;var u=parseInt(q[1]);p=self.months[p];propDateHtml+='<option value="'+s+'">'+p+" "+u+"</option>"});$("#dateDropDown").html(propDateHtml);$("#dateDropDown").change(function(){var p=$("#dateDropDown option:selected").attr("value");if(b.curPage>1){b.curPage=1;$.historyLoad(page.makeMultipleHash(["date",p],["page",1]))}else{$.historyLoad(page.makeHash("date",p))}});var k="";k+='<option value="all">Type</option>';k+='<option value="Rent">Rent</option>';k+='<option value="Deposit">Deposit</option>';k+='<option value="Other">Other</option>';$("#typeDropDown").html(k);$("#typeDropDown").change(function(){var p=$("#typeDropDown option:selected").attr("value");if(b.curPage>1){b.curPage=1;$.historyLoad(page.makeMultipleHash(["type",p],["page",1]))}else{$.historyLoad(page.makeHash("type",p))}});var n="";n+='<option value="all">Filter</option>';n+='<option value="expense">Expense</option>';n+='<option value="income">Income</option>';$("#filterDropDown").html(n);$("#filterDropDown").change(function(){var p=$("#filterDropDown option:selected").attr("value");if(b.curPage>1){b.curPage=1;$.historyLoad(page.makeMultipleHash(["filter",p],["page",1]))}else{$.historyLoad(page.makeHash("filter",p))}});var o=[];$.each(self.initInfo.properties,function(p,q){o[q.name]=q.id});propHtml='<option id="all" value="All Properties">All Properties</option>';propListHtml="";for(var l in o){if(o.hasOwnProperty(l)){propListHtml+='<option id="'+o[l]+'" value="'+l+'">'+l+"</option>"}}propHtml+=propListHtml;$("#propertyDropDown").html(propHtml);$("#expenseProperty").append(propListHtml);$("#incomeProperty").append(propListHtml);$("#propertyDropDown").change(function(){var q=$("#propertyDropDown option:selected");var p=q.attr("id");b.updateBalance=1;if(b.curPage>1){b.curPage=1;$.historyLoad(page.makeMultipleHash(["property",p],["page",1]))}else{$.historyLoad(page.makeHash("property",p))}});if(location.href.indexOf("#")==-1){c()}$.historyInit(h);$("#who").bind("keypress",function(r){var q=r.keyCode||r.which;if(q==13){var p=$("#who").val();if(!p.match(/^[a-zA-Z0-9]+$/i)&&p!=""){page.fox.message({message:"Search only accepts letters and numbers. 							Please try again.",close:function(){parentTR.removeClass("selected")}});return false}if(p){self.curSearch=p;if(b.curPage>1){b.curPage=1;$.historyLoad(page.makeMultipleHash(["search",p],["page",1]))}else{$.historyLoad(page.makeHash("search",p))}}else{self.curSearch="all";$.historyLoad(page.makeHash("search","all"))}}});$(".pagination .first").bind("click",function(){if($(this).hasClass("disabled")){return false}b.curPage=1;$.historyLoad(page.makeHash("page",b.curPage))});$(".pagination .prev").bind("click",function(){if($(this).hasClass("disabled")){return false}var q=b.curPage*20;var p=q-19;if(p!=1){b.curPage=b.curPage-1}$.historyLoad(page.makeHash("page",b.curPage))});$(".pagination .next").bind("click",function(){if($(this).hasClass("disabled")){return false}var q=self.json.totalRecords;var p=b.curPage*20;if(p<q){b.curPage=b.curPage+1}$.historyLoad(page.makeHash("page",b.curPage))});$(".pagination .last").bind("click",function(){if($(this).hasClass("disabled")){return false}var p=self.json.totalRecords;b.curPage=Math.ceil(p/20);$.historyLoad(page.makeHash("page",b.curPage))});self.transToggle=0;$("#addTransaction").bind("click",function(){i("editTransaction","add");self.transToggle=1;$("#incomeType").show()});$("#incomeType").bind("change",function(){var p=$(this).find("option:selected").val()==="Rent";$(".income-record-view").hide();if(p){$("#record-rent").show()}else{$("#record-non-rent").show()}});$("#saveExpense").bind("click",function(){var p=$("#expensePay").parent();var s=p.hasClass("search");var q=p.removeClass("search field").attr("class");p.addClass("search field");var r=self.transToggle?"/reports/addExpense":"/reports/editExpense";var u=self.transToggle?"":self.transId;page.request({url:r,request:{type:"expense",action:self.transToggle?"create":"edit",expenseType:$("#expenseType").val(),payTo:$("#expensePay").val(),expenseAmount:$("#expenseAmount").val(),expenseDate:$("#expenseDate").val(),transId:u,contactType:s?q:"",contactId:s?p.attr("id"):""},success:function(v){i("default");location.hash="";b.updateBalance=1;c();e();self.transToggle=0}})});$("#saveIncome").bind("click",function(){var p=$("#incomeFrom").parent();var s=p.hasClass("search");var q=p.removeClass("search field").attr("class");p.addClass("search field");var r=self.transToggle?"/reports/addIncome":"/reports/editIncome";var u=self.transToggle?"":self.transId;page.request({url:r,request:{type:"income",action:self.transToggle?"create":"edit",incomeType:self.rentRow?"Rent":$("#incomeType").val(),incomeFrom:$("#incomeFrom").val(),incomeAmount:$("#incomeAmount").val(),incomeDate:$("#incomeDate").val(),transId:u,contactType:s?q:"",contactId:s?p.attr("id"):""},success:function(v){i("default");location.hash="";b.updateBalance=1;c();e();self.transToggle=0}})});$("#period > li > a").bind("click",function(){$("#period > li > a").removeClass("on");$(this).addClass("on");var v=$(this).attr("id");b.curDatePeriod=v;self.periodClick=1;b.curPage=1;if(v=="thisMonth"){var w=new Date();var q=w.getMonth()+1;var p=w.getFullYear();var r=q+"+"+p;var u=$("#dateDropDown option[value="+r+"]");if(u.length){u.attr("selected","selected")}else{$("#dateDropDown option:first").attr("selected","selected")}$.historyLoad(page.makeMultipleHash(["period",v],["date",r],["page",1]))}else{if(v=="lastMonth"){var w=new Date();var q=w.getMonth()+1;var p=w.getFullYear();if(q==1){q=12;p=p-1}else{q=q-1}var s=q+"+"+p;var u=$("#dateDropDown option[value="+s+"]");if(u.length){u.attr("selected","selected")}else{$("#dateDropDown option:first").attr("selected","selected")}$.historyLoad(page.makeMultipleHash(["period",v],["date",s],["page",1]))}else{$("#dateDropDown option:first").attr("selected","selected");$.historyLoad(page.makeMultipleHash(["period",v],["date","all"],["page",1]))}}})}function c(){page.request({url:"/reports/json",request:{month:b.curMonth,year:b.curYear,type:b.curType,search:b.curSearch,filter:b.curFilter,datePeriod:b.curDatePeriod,property:b.curProperty,page:b.curPage,initLoad:self.initLoad,periodClick:self.periodClick,updateBalance:b.updateBalance},success:function(r){self.json=r}});var q=self.json.prevTotal;self.income=0;self.expense=0;if(q!=0){if(q>0){self.income=q}else{var n=q*-1;self.expense=n}}var o="";$.each(self.json.transactions,function(r,w){var v="";var u=w.transDate;u=u.split("-");y=u[0];m=u[1];d=u[2];m=self.months[m-1];if(w.transAmount>0){self.income+=w.transAmount;var s=self.income-self.expense;if(s<0){s=s*-1;s="-$"+s.toFixed(2)}else{s="$"+s.toFixed(2)}v+='<tr class="Income" id="'+w.transId+'"><td class="date" id="'+w.transDate+'"><span>'+m+" "+d+" "+y+"</span></td>";v+='<td class="type"><span>'+w.transType+"</span></td>";v+='<td class="who" id="'+w.transPropertyId+'"><span>'+w.transContact+"</span></td>";v+='<td class="amount income"><span>+$'+w.transAmount.toFixed(2)+"</em></span></td>";v+='<td class="balance on"><span>'+s+"</span></td></tr>"}else{w.transAmount=w.transAmount*-1;self.expense+=w.transAmount;var s=self.income-self.expense;if(s<0){s=s*-1;s="-$"+s.toFixed(2)}else{s="$"+s.toFixed(2)}v+='<tr class="Expense" id="'+w.transId+'"><td class="date" id="'+w.transDate+'"><span>'+m+" "+d+" "+y+"</span></td>";v+='<td class="type"><span>'+w.transType+"</span></td>";v+='<td class="who" id="'+w.transPropertyId+'"><span>'+w.transContact+"</span></td>";v+='<td class="amount income"><span>-$'+w.transAmount.toFixed(2)+"</em></span></td>";v+='<td class="balance on"><span>'+s+"</span></td></tr>"}o=v+o});if(!o){o+='<tr class="noRecords"><td colspan="5"><span>No transaction records</span></td></tr>'}$("#transactionList tbody").html(o);if(self.initLoad||b.updateBalance){var l=parseFloat(self.json.incomeTotal);var k=parseFloat(self.json.expenseTotal);$("#incomeCell").html("$"+l.toFixed(2));$("#expenseCell").html("-$"+k.toFixed(2));if(l>=k){var p=l-k;p=p.toFixed(2);$("#totalCell").html("$"+p)}else{var p=k-l;p=p.toFixed(2);$("#totalCell").html("-$"+p)}self.initIncome=$("#incomeCell").text();self.initExpense=$("#expenseCell").text();self.initTotal=$("#totalCell").text();self.initLoad=0;b.updateBalance=0}if(self.periodClick){if(b.curDatePeriod=="all"){$("#incomeCell").html(self.initIncome);$("#expenseCell").html(self.initExpense);$("#totalCell").html(self.initTotal)}else{var l=parseFloat(self.json.incomeTotal);var k=parseFloat(self.json.expenseTotal);$("#incomeCell").html("$"+l.toFixed(2));$("#expenseCell").html("-$"+k.toFixed(2))}self.periodClick=0}a()}function h(p){if(p){var r=page.getHashVal("page");var o=page.getHashVal("date");var k=page.getHashVal("property");var s=page.getHashVal("type");var l=page.getHashVal("filter");var u=page.getHashVal("search");var q=page.getHashVal("period");if(r&&b.curPage!==1){b.curPage=parseInt(r)}else{b.curPage=1}if(o){var n=o.split("+");b.curMonth=n[0];b.curYear=n[1]}else{b.curMonth="all";b.curYear="all"}if(k){b.curProperty=k}else{b.curProperty="all"}s?b.curType=s:b.curType="all";l?b.curFilter=l:b.curFilter="all";u?b.curSearch=u:b.curSearch="all";q?self.periodClick=1:self.periodClick=0}else{g()}f();c()}function f(){if(b.curMonth==="all"){$("#dateDropDown option:first").attr("selected","selected")}else{$("#dateDropDown option[value="+b.curMonth+"+"+b.curYear+"]").attr("selected","selected")}$("#typeDropDown option[value="+b.curType+"]").attr("selected","selected");$("#filterDropDown option[value="+b.curFilter+"]").attr("selected","selected");var k=page.getHashVal("property");if(!k||k==="all"){$("#propertyDropDown option:first").attr("selected","selected")}else{var k=page.getHashVal("property");k=k.split("+").join(" ");$("#propertyDropDown option[value="+k+"]").attr("selected","selected")}}function i(k,n,l){$("#sidepanel .panel, #editTransactionPanel .tabs > li, #editTransactionPanel .form").removeClass("on");$("#transactionList tbody > tr").removeClass("selected");$("#"+k+"Panel").addClass("on");if(l){$("#edit"+l+"Tab").addClass("on");$("#edit"+l).addClass("on")}else{$("#editExpenseTab").addClass("on");$("#editExpense").addClass("on")}if(!n||n=="add"){$("#addExpenseTabs").css({display:"block"})}else{$("#addExpenseTabs").css({display:"none"})}}function e(){$("#editExpense input").removeClass("error");$("#editExpense input").val("");$("#editExpense #expenseProperty option:first").attr("selected","selected");$("#editExpense #expenseType option:first").attr("selected","selected");$("#editIncome input").removeClass("error");$("#editIncome input").val("");$("#editIncome #incomeProperty option:first").attr("selected","selected");$("#editIncome #incomeType option:first").attr("selected","selected");$("#reportsTransactions .sidepanel .delete").hide()}function a(){var o=self.json.totalRecords;var l=Math.ceil(o/20);var n=b.curPage*20;var k=n-19;if(k>o){k=1}if(n>o){n=o}if(o===0){k=0}$(".pagination .pages").html(k+"-"+n+" of "+o);if(n<o){$(".pagination .next").removeClass("disabled");$(".pagination .last").removeClass("disabled")}if(b.curPage==l){$(".pagination .next").addClass("disabled");$(".pagination .last").addClass("disabled")}if(b.curPage==1){$(".pagination .first").addClass("disabled");$(".pagination .prev").addClass("disabled")}if(b.curPage!=1&&b.curPage<=l){$(".pagination .first").removeClass("disabled");$(".pagination .prev").removeClass("disabled")}}g();j()}function Property(b){var a=this;if(b){a.propertyId=b.propertyId}}Property.prototype.getProperty=function(){var a=this;var b=false;$.ajax({async:false,dataType:"json",type:"GET",url:"/property/json/"+a.propertyId,cache:false,success:function(c){b=c}});return b};Property.prototype.create=function(c){var a=this;var b=false;$.ajax({async:true,dataType:"json",type:"POST",url:"/property/create",data:c.request,beforeSend:function(){page.ajaxStart()},success:function(e){page.ajaxStop();c.success(e)}})};Property.prototype.deleteProperty=function(e){var a=this;var b=false;var c={propertyId:e.propertyId};$.ajax({async:true,dataType:"json",type:"POST",data:c,url:"/property/delete",beforeSend:function(){page.ajaxStart()},success:function(f){page.ajaxStop();e.success(f)}})};Property.prototype.save=function(c){var a=this;var b=false;$.ajax({async:true,dataType:"json",type:"POST",data:c.request,url:"/property/save",cache:false,beforeSend:function(){page.ajaxStart()},success:function(e){page.ajaxStop();c.success(e)}})};Property.prototype.createFloorPlan=function(e){var a=this;var b=false;var c={propertyid:e.propertyId,unitid:e.unitId,name:e.input.name,sqft:e.input.sqft,beds:e.input.beds,baths:e.input.baths,description:e.input.description};$.ajax({async:true,dataType:"json",type:"POST",data:c,url:"/floorplan/create",cache:false,beforeSend:function(){page.ajaxStart()},success:function(f){page.ajaxStop();e.success(f)}})};Property.prototype.saveFloorPlan=function(e){var a=this;var b=false;var c={name:e.input.name,sqft:e.input.sqft,beds:e.input.beds,baths:e.input.baths,description:e.input.description};$.ajax({async:true,dataType:"json",type:"POST",data:c,url:"/floorplan/save/"+e.floorplanId,cache:false,beforeSend:function(){page.ajaxStart()},success:function(f){page.ajaxStop();e.success(f)}})};Property.prototype.deleteFloorPlan=function(e){var a=this;var b=false;var c={propertyId:e.propertyId,floorPlanId:e.floorPlanId};$.ajax({async:true,dataType:"json",type:"POST",data:c,url:"/floorplan/delete",cache:false,beforeSend:function(){page.ajaxStart()},success:function(f){page.ajaxStop();e.success(f)}})};Property.prototype.assignFloorPlansToUnits=function(e){var a=this;var b=false;var c={units:e.units,propertyid:e.propertyId};$.ajax({async:true,dataType:"json",type:"POST",data:c,url:"/floorplan/assignMultiple/"+e.floorplanId,cache:false,beforeSend:function(){page.ajaxStart()},success:function(f){page.ajaxStop();e.success(f)}})};Property.prototype.addUnits=function(e){var a=this;var b=false;var c={propertyId:a.propertyId,units:e.input};$.ajax({async:true,type:"POST",dataType:"json",url:"/unit/create",cache:false,data:c,beforeSend:function(){page.ajaxStart()},success:function(f){page.ajaxStop();e.success(f)}})};function Unit(){var a=this}Unit.prototype.getUnit=function(b){var a=this;var c=false;$.ajax({async:false,dataType:"json",type:"POST",url:"/unit/json/"+b.unitId,cache:false,success:function(e){c=e}});return c};Unit.prototype.addFloorPlanToUnit=function(e){var a=this;var b=false;var c={unitid:e.unitId,propertyid:e.propertyId};$.ajax({async:true,dataType:"json",type:"POST",data:c,url:"/floorplan/assign/"+e.floorplanId,cache:false,beforeSend:function(){page.ajaxStart()},success:function(f){page.ajaxStop();e.success(f)}})};Unit.prototype.deleteUnit=function(c){var a=this;var b=false;$.ajax({async:true,type:"POST",dataType:"json",url:"/unit/delete",cache:false,data:c.request,beforeSend:function(){page.ajaxStart()},success:function(e){page.ajaxStop();c.success(e)}})};Unit.prototype.rename=function(c){var a=this;var b=false;$.ajax({async:true,type:"POST",dataType:"json",url:"/unit/rename",cache:false,data:c.request,beforeSend:function(){page.ajaxStart()},success:function(e){page.ajaxStop();c.success(e)}})};function Users(b){var a=this;a.propertyId=false;page.nav.hideSubmenu();if(b&&b.propertyId){a.propertyId=b.propertyId;page.nav.showSubmenu()}a.init();return a}Users.prototype.init=function(){var a=this;var b=a.propertyId?"/user/json/"+a.propertyId:"/user/json";page.request({url:b,type:"GET",async:false,offset:{x:0,y:0},success:function(c){a.json=c;if(a.json.users.length===1){page.fox.message({title:"What's this page for?",message:"Give access to other users 							so that they can help 							you manage your properties on Rentfox.							<br /><br />							<em>Note: This page is not for storing tenant information. 							If you are looking for tenants, use the search box or add tenants to leases.</em>"})}}});a.initUserCreate().initUserList().initUserEdit();$("#activation-link").live("click",function(){this.select()});return a};Users.prototype.initUserCreate=function(){var b=this;$("#create-phone").mask("(999) 999-9999");var a=b.json.me.type=="admin"?"block":"none";$("#createUserRoleSection,#updateUserRoleSection").css({display:a});$("#createNewUser").unbind().bind("click",function(){page.fox.dock();$(".userbox").css({display:"none"});$("#createBox input").val("");$("#create-admin").attr("checked",false);$("#createBox").css({display:"block"});$("#userList li").removeClass("on");$("#create-fname").focus()});$("#closeCreateBox, #cancelCreateBox").unbind().bind("click",function(){$(".userbox").css({display:"none"})});$("#createUserButton").unbind().bind("click",function(){var c=$("#create-admin").attr("checked")?1:0;page.request({url:"/user/create",request:{propertyId:b.propertyId,fname:$("#create-fname").val(),lname:$("#create-lname").val(),email:$("#create-email").val(),phone:$("#create-phone").val(),created_by:b.json.me.id,admin:c},offset:{x:200,y:0},success:function(e){b.currentUserId=e.currentUserId;b.displayUser().init();if(!c){$("#addProperties").click()}}})});$("#createBox input").unbind().bind("keypress",function(f){var c=f.keyCode||f.which;if(c==13){$("#createUserButton").click()}});return b};Users.prototype.initUserEdit=function(){var a=this;$("#closeDisplayBox").unbind().bind("click",function(){$(".userbox").css({display:"none"});$("#userList li").removeClass("on")});$("#update-phone").mask("(999) 999-9999");$("#editBasicInfo").unbind().bind("click",function(){var b=a.currentUser.type=="admin"?true:false;$("#update-fname").val(a.currentUser.first_name);$("#update-lname").val(a.currentUser.last_name);$("#update-email").val(a.currentUser.email);$("#update-phone").val(a.currentUser.phone);$("#update-admin").attr("checked",b);$("#editorName").text(a.currentUser.first_name+" "+a.currentUser.last_name);$(".userbox").css({display:"none"});$("#editBox").css({display:"block"})});$("#cancelEditBox").unbind().bind("click",function(){$(".userbox").css({display:"none"});$("#displayBox").css({display:"block"})});$("#saveUserButton").unbind().bind("click",function(){var b=$("#update-admin").attr("checked")?1:0;page.request({url:"/user/save",request:{userId:a.currentUserId,fname:$("#update-fname").val(),lname:$("#update-lname").val(),email:$("#update-email").val(),phone:$("#update-phone").val(),propertyId:a.propertyId,admin:b},offset:{x:200,y:0},success:function(c){a.json=c;a.generateUserList(c.users).displayUser()}})});$("#editBox input").unbind().bind("keypress",function(c){var b=c.keyCode||c.which;if(b==13){$("#saveUserButton").click()}});$("#propertyList li input").live("click",function(){if($(this).is(":checked")){$(this).parent().addClass("on")}else{$(this).parent().removeClass("on")}});$("#resendActivationEmail").unbind().bind("click",function(){page.request({url:"/user/resendActivationLink",request:{userId:a.currentUser.id},success:function(b){page.fox.center().message({title:"Success!",message:"You have re-sent an activation link to "+a.currentUser.email+"."})}})});$("#deleteUser").unbind().bind("click",function(){var b=a.currentUser.first_name+" "+a.currentUser.last_name;page.fox.confirm({message:"Are you sure you want to delete "+b+"?",confirmButtonText:"Yes, please delete",success:function(){page.request({url:"/user/delete",request:{userId:a.currentUserId,propertyId:a.propertyId},success:function(c){$(".userbox").css({display:"none"});a.json=c;a.generateUserList(c.users);page.fox.center().message({title:"Success!",message:"You have deleted "+b+"."})}})}})});$("#addProperties").unbind().bind("click",function(){page.fox.center({x:0,y:-100}).display({url:"addPropertiesToUser.html",callback:function(){var b="";var c=0;$.each(a.json.properties,function(e,f){if($.inArray(f.id,a.currentUserPropertyIds)===-1){b+='<li><label><input type="checkbox" id="assign_'+f.id+'" /> '+f.name+"</label></li>";c++}});$("#assignPropertyList").html(b);if(!c){$("#assignPropertyList").replaceWith("<p>There are currently no properties to add to this user.</p>                		<p>There could be a couple reasons for this.  Perhaps you have already added all properties for this user                		or you do not have access to the properties you are trying to add.</p>");$("#addPropertiesButton,#addPropertiesCancel").remove()}$("#addPropertiesButton").unbind().bind("click",function(){var e=[];$("#assignPropertyList input:checked").each(function(){var f=this.id;e.push(f.replace("assign_",""))});page.request({url:"/user/assignProperties",request:{userId:a.currentUserId,otherUserId:a.currentUser.id,propertyId:a.propertyId,propList:e.join(",")},success:function(f){a.displayUser().generateUserList(f.users)}})})}})});$("#removeProperties").unbind().bind("click",function(){page.fox.center({x:0,y:-100}).display({url:"removePropertiesFromUser.html",callback:function(){var b="";var c=0;if(!a.myPropertyIds){a.myPropertyIds=[];$.each(a.json.properties,function(e,f){a.myPropertyIds.push(f.id)})}$.each(a.currentUserProperties,function(e,f){if($.inArray(f.id,a.myPropertyIds)>=0){b+='<li><label><input type="checkbox" id="unassign_'+f.id+'" /> '+f.name+"</label></li>";c++}});$("#removePropertyList").html(b);if(!c){$("#removePropertyList").replaceWith("<p>There are no properties to remove from this user.</p>                		<p>Keep in mind that you may only remove properties that you have access to yourself.");$("#removePropertiesButton,#removePropertiesCancel").remove()}$("#removePropertiesButton").unbind().bind("click",function(){var e=[];$("#removePropertyList input:checked").each(function(){var f=this.id;e.push(f.replace("unassign_",""))});page.request({url:"/user/unassignProperties",request:{userId:a.currentUserId,otherUserId:a.currentUser.id,propertyId:a.propertyId,propList:e.join(",")},success:function(f){a.displayUser().generateUserList(f.users)}})})}})});return a};Users.prototype.initUserList=function(){var a=this;a.generateUserList(a.json.users).generatePropertyDropDown(a.json.properties);a.resizeUserList();$(window).resize(function(){a.resizeUserList()});$("#userList li:not(.on)").live("click",function(){a.currentUserId=this.id;$("#userList li").removeClass("on");$(this).addClass("on");a.displayUser()});$("#propertyList").unbind().bind("change",function(){var c=$("option:selected",this).attr("id");var b=c==a.propertyId?false:true;if(b){var e=c?"/users/"+c:"/users";location.href=e}});return a};Users.prototype.displayUser=function(){var a=this;page.request({url:"/user/getManager",request:{userId:a.currentUserId},offset:{x:0,y:0},success:function(e){$(".display-name").text(e.first_name+" "+e.last_name);$(".display-email").text(e.email);$(".display-fname").text(e.first_name);$(".display-phone").text(e.phone);if(!e.username){$("#activation").css({display:"block"});$("#activation-link").val(e.activation_link);$("#activation-last-sent").text(e.activation_sent+" ago")}else{$("#activation").css({display:"none"})}a.currentUserProperties=e.properties;a.currentUserPropertyIds=[];if(e.type=="admin"){$("#userPropertyList").text("Admins have access to all properties.")}else{if(e.properties.length){var h="<ul>";$.each(e.properties,function(j,k){h+="<li>"+k.name+"</li>";a.currentUserPropertyIds.push(k.id)});h+="</ul>";$("#userPropertyList").html(h)}else{$("#userPropertyList").text(e.first_name+" has no access to any properties.")}}var i=[];var c=a.json.me.type=="admin"&&e.type=="manager"||a.json.me.id==e.created_by||a.json.me.created_by=="rentfox"||a.json.me.id==e.id;if(c){i.push("editBasicInfo");i.push("deleteUser");if(e.type=="manager"){i.push("addProperties");i.push("removeProperties")}}a.generateMoremenu(i);$(".userbox").css({display:"none"});$("#displayBox").css({display:"block"});a.currentUser=e;var g=a.json.me.id===a.currentUser.id?"none":"block";$("#updateUserRoleSection").css({display:g});var b=e.properties.length,f=b===1?"1 property":b+" properties";$("#stats-user-total-properties").text(f);$("#stats-user-created").text(e.created)}});return a};Users.prototype.generateMoremenu=function(a){$("#userMoremenu li").css({display:"none"});if(a.length){$("#userMoremenu").css({display:"block"});$.each(a,function(b,c){$("#"+c).css({display:"block"})})}else{$("#userMoremenu").css({display:"none"})}};Users.prototype.resizeUserList=function(){var a=this;$("#userList").height($(window).height()-150);return a};Users.prototype.generateUserList=function(c){var a=this;var b=[];$.each(c,function(h,e){var f=e.type=="admin"?"[A] "+e.name:e.name;var g=e.id==a.currentUserId?"on":"";b[h]='<li id="'+e.id+'" class="'+g+'">'+f+"</li>"});$("#userList > ul").html(b.join(""));return a};Users.prototype.generatePropertyDropDown=function(c){var a=this;var b="<option>All Properties</option>";if(c.length){$.each(c,function(e,g){var f=g.id==a.propertyId?'selected="selected"':"";b+='<option id="'+g.id+'" '+f+">"+g.name+"</option>"})}$("#propertyList").html(b);return a};function Contacts(){var a=this;function c(){var e=new ClickMenu;$("#description").elastic();b();$(window).bind("resize",function(){b()});page.request({url:"/contacts/json/all",type:"GET",async:false,success:function(f){a.json=f}});a.initEditBox();if(a.json.contacts.length===0){page.fox.message({title:"What's this page for?",message:"Add contacts that your company 						needs access to, such as handimen, plumbers,						utility companies, locksmiths, etc.  						<br /><br />						I'll hide myself after you add a contact.						<br /><br />						<em>Note: This page is not for storing tenant information. 						If you are looking for tenants, use the search box or add tenants to leases.</em>"})}}function b(){$("#typeList").height($(window).height()-150)}c()}Contacts.prototype.initEditBox=function(){var p=this,i="create",q=0,g="",b="allTypes";a();j();$("#createNewContact").bind("click",function(){page.fox.dock();i="create";o("create");c()});$("#contactBox .close").bind("click",function(){k()});$("#saveContactButton").bind("click",function(){var r=i==="create"?"/contacts/create":"/contacts/update";if(q){g=$("#new-type-label").val()}page.request({url:r,request:{contactId:i==="edit"?p.contactId:"",type:q?$("#new-type-label").val():$("#type option:selected").val(),newtype:q,label:$("#name").val(),address:$("#street").val(),city:$("#city").val(),state:$("#state").val(),zip:$("#zip").val(),phone:$("#phone").val(),email:$("#email").val(),description:$("#description").val()},success:function(s){p.json=s;k();a();c();j()}})});$("#open-create-type").bind("click",function(){e()});$("#close-create-type").bind("click",function(){f()});$("#phone").mask("(999) 999-9999");function a(){var r="";$.each(p.json.contacts,function(s,u){var v=[];if(u.city){v.push(u.city)}if(u.state){v.push(u.state)}if(u.zip){v.push(u.zip)}v=v.join(", ").replace(" ","");if(v.length>0){v+="<br />"}r+='<div class="item" id="'+u.id+'">';r+='<img class="delete" src="/styles/img/ico/delete.png" />';r+='<img class="edit" src="/styles/img/ico/pencil.png" /><p>';r+="<strong>"+u.label+"</strong>";if(u.phone.length>0){r+=u.phone+"<br />"}if(u.email.length>0){r+=u.email+"<br />"}if(u.street.length>0){r+=u.street+"<br />"}r+=v;if(u.description.length>0){r+='<div class="contactDesc">'+u.description+"</div>"}r+="</p></div>"});$("#contactDisplay").html(r);l()}function o(r){$("#formHeader").text(r==="create"?"Create contact":"Edit contact");if(p.json.types.length>0){f();$("#close-create-type").show()}else{e();$("#close-create-type").hide()}$("#contactDisplay").hide();$("#contactBox").show()}function k(){$("#contactDisplay").show();$("#contactBox").hide()}function e(){$("#typeSelect").hide();$("#typeCreate").show();q=1}function f(){$("#typeSelect").show();$("#typeCreate").hide();q=0;n()}function n(){var r="";$.each(p.json.types,function(s,u){r+='<option value="'+u.id+'">'+u.label+"</option>"});$("#type").html(r)}function c(){$("#contactBox input, #contactBox textarea").val("")}function h(u){var s=p.json.contacts;for(var r in s){if(s[r].id===u){return s[r]}}return false}$("#contactDisplay .edit").live("click",function(){o("edit");var s=$(this).parent().attr("id");p.contactId=s;var r=h(s);i="edit";$("#name").val(r.label);$("#phone").val(r.phone);$("#email").val(r.email);$("#street").val(r.street);$("#city").val(r.city);$("#state").val(r.state);$("#zip").val(r.zip);$("#description").val(r.description);$("#type option[value='"+r.typeid+"']").attr("selected","selected")});$("#contactDisplay .delete").live("click",function(){var r=$(this).parent().attr("id");page.fox.confirm({message:"Are you sure you want to delete this contact?",confirmButtonText:"Yes, please delete",success:function(){page.request({url:"/contacts/delete",request:{contactId:r},success:function(s){p.json=s;a()}})}})});function l(){var r="";r+='<li class="typeLabel" id="allTypes">All Contacts</li>';$.each(p.json.types,function(s,u){r+='<li class="typeLabel" id="'+u.id+'">'+u.label+"</li>"});$("#typeWrap").html(r)}$(".typeLabel").live("click",function(){page.fox.dock();b=$(this).attr("id");j();k()});function j(){$("#typeList li").removeClass("on");var s="";s+='<div class="opts"><div class="clickmenu"><div class="wrap">';s+='<label></label><div class="options"><ul><li class="rename" id="typeRename">Rename</li>';s+='<li class="delete" id="typeDelete">Delete</li></ul></div></div></div></div>';if(q==1){$.each(p.json.types,function(u,v){if(v.label==g){b=v.id}});q=0;g="";j()}else{if(b=="allTypes"){a();$("#allTypes").addClass("on")}else{$("#typeList .opts").hide();$("#"+b).addClass("on");$("#"+b).prepend(s);$("#"+b+" .opts").show();var r="";$.each(p.json.contacts,function(u,v){if(v.typeid==b){var w=[];if(v.city){w.push(v.city)}if(v.state){w.push(v.state)}if(v.zip){w.push(v.zip)}w=w.join(", ").replace(" ","");if(w.length>0){w+="<br />"}r+='<div class="item" id="'+v.id+'">';r+='<img class="delete" src="/styles/img/ico/delete.png" />';r+='<img class="edit" src="/styles/img/ico/pencil.png" /><p>';r+="<strong>"+v.label+"</strong>";if(v.phone.length>0){r+=v.phone+"<br />"}if(v.email.length>0){r+=v.email+"<br />"}if(v.street.length>0){r+=v.street+"<br />"}r+=w;if(v.description.length>0){r+='<div class="contactDesc">'+v.description+"</div>"}r+="</p></div>"}});$("#contactDisplay").html(r)}}}$("#typeRename").live("click",function(){var r=$(this).parent().closest("li").attr("id");page.fox.center().display({url:"renameType",callback:function(){j();$("#renameTypeButton").bind("click",function(){page.request({url:"/contacts/renameType",request:{typeId:r,typeLabel:$("#newName").val()},success:function(s){p.json=s;a();j()}})});$("#newName").focus();$("#newName").bind("keypress",function(u){var s=u.keyCode||u.which;if(s==13){$("#renameTypeButton").click()}})}})});$("#typeDelete").live("click",function(){var r=$(this).parent().closest("li").attr("id");page.fox.confirm({message:"Are you sure you want to delete this category?",confirmButtonText:"Yes, please delete",success:function(){page.request({url:"/contacts/deleteType",request:{typeId:r},success:function(s){p.json=s;b="allTypes";j()}})}})});return p};function Search(c){var a=this;a.q=c;a.filter="all";a.limit=10;a.page=1;a.last_page=1;a.find(c,1,"all");b();function b(){$("#search-box").bind("keypress",function(g){var f=g.keyCode||g.which;if(f==13){a.find($(this).val(),1,a.filter)}});$(".filter:not(.on)").live("click",function(g){$(".filter").removeClass("on");$(this).addClass("on");var f=this.id.replace("filter-","");a.find(a.q,1,f)});$("#pagination .first:not(.disabled)").live("click",function(){a.find(a.q,1,a.filter)});$("#pagination .next:not(.disabled)").live("click",function(){a.find(a.q,a.page+1,a.filter)});$("#pagination .prev:not(.disabled)").live("click",function(){a.find(a.q,a.page-1,a.filter)});$("#pagination .last:not(.disabled)").live("click",function(){a.find(a.q,a.last_page,a.filter)})}}Search.prototype.find=function(c,e,b){var a=this;a.q=c;a.filter=b;a.page=e;$("#search-results").hide();page.request({url:"/search/find",type:"GET",request:{q:c,page:e,limit:a.limit,filter:b},success:function(f){a.displayResults(f)}})};Search.prototype.displayResults=function(g){var q=this,f=g.results,k=f.length,h=[],j=g.page,n=g.total,a=n?g.start:n,c=g.end>n?n:g.end,l=$("#search-results").show(),b=q.limit;q.last_page=Math.ceil(n/b);$("#pagination-info").text(a+"-"+c+" of "+n);if(n==0){l.html('<div class="nothing">Sorry, but I was unable to find anything &gt;_&lt;</div>');return}for(var e=0;e<k;e++){var r=f[e],o=r.link?'<a href="'+r.link+'">'+r.title+"</a>":"<h5>"+r.title+"</h5>",p="<p>"+r.description+"</p>";h.push(o+p)}l.html(h.join(""));$("#pagination > .control").addClass("disabled");if(j>1){$("#pagination .first").removeClass("disabled");$("#pagination .prev").removeClass("disabled")}if(j*b<=n){$("#pagination .next").removeClass("disabled");$("#pagination .last").removeClass("disabled")}}(function(a){a.fn.searchsuggest=function(g){var e=this;var f={};f.type=g;f.total=0;f.ready=1;var b=a(this).parent();var c=b.find("input");a(c).bind("keyup",function(k){if(k.keyCode!=40&&k.keyCode!=38&&k.keyCode!=8&&k.keyCode!=13){var j=a(c).val();j=a.trim(j);a(".suggestSearch").remove();if(j.length&&f.ready){f.ready=0;a(b).removeClass("search");i()}}else{h(k.keyCode)}});a(c).blur(function(){a(".suggestSearch").remove()});function h(o){if(o==40){var l=a(".suggestSearch div:last");if(!l.hasClass("on")){a(".suggestSearch div.on").removeClass("on").next().addClass("on")}if(!a(".suggestSearch div.on").length){a(".suggestSearch div:first").addClass("on")}}else{if(o==38){var l=a(".suggestSearch div:first");if(!l.hasClass("on")){a(".suggestSearch div.on").removeClass("on").prev().addClass("on")}else{a(".suggestSearch div.on").removeClass("on")}}else{if(o==8){a(".suggestSearch").remove();a(b).removeClass("search");var n=a(c).val();n=a.trim(n);if(f.ready&&n.length){f.ready=0;i()}else{f.ready=1}}else{if(o==13){var k=a(".suggestSearch div.on");var j=k.removeClass("on").attr("class");var r=k.attr("id");var p=k.text();f.curId=r;f.curType=j;a(c).val(p);a(".suggestSearch").remove();b.removeClass().addClass("search field").addClass(j).attr("id",r)}}}}}a(".suggestSearch div").live("mouseover",function(){a(".suggestSearch div").removeClass("on");a(this).addClass("on")});var i=function(){var k=a(c).val();k=a.trim(k);if(k.length){a.ajax({url:"/search/find",type:"GET",data:"q="+k+"&page="+1+"&limit="+6+"&filter="+f.type,dataType:"json",async:true,success:function(l){e.json=l;f.ready=1;j()}})}function j(){var l="";a.each(e.json.results,function(n,o){l+='<div id="'+o.id+'" class="'+o.type+'">'+o.title+"</div>"});if(l){a(b).append('<div class="suggestSearch"></div>');a(".suggestSearch").html(l);a(".suggestSearch div:first").addClass("on");f.total=a(".suggestSearch div").length}}a(".suggestSearch div").live("mousedown",function(){var n=a(".suggestSearch div.on");var l=n.removeClass("on").attr("class");var p=n.attr("id");var o=n.text();f.curId=p;f.curType=l;a(this).parents().siblings("input").val(o);b.removeClass().addClass("search field").addClass(l).attr("id",p);a(".suggestSearch").remove();return false})};return e}})(jQuery);function AccountManage(){var b=this;var a={editName:'<a class="mini button cancel" id="cancelName"><span>Cancel</span></a>			<a class="mini button save" id="saveName"><span>Save</span></a>			<input type="text" class="small" id="update-fname">			<input type="text" class="small" id="update-lname">',editEmail:'<a class="mini button cancel" id="cancelEmail"><span>Cancel</span></a>			<a class="mini button save" id="saveEmail"><span>Save</span></a>			<input type="text" id="update-email">',editPhone:'<a class="mini button cancel" id="cancelPhone"><span>Cancel</span></a>			<a class="mini button save" id="savePhone"><span>Save</span></a>			<input type="text" id="update-phone">'};function e(){page.request({url:"/account/getLoggedInUser",type:"GET",async:false,success:function(f){b.me=f;b.refreshUser()}});$("#displayUsername").text(b.me.username);$(".item > span").live("click",function(){var f=this.id;$(this).parent().html(a[f]);$("#update-fname").val(b.me.first_name);$("#update-lname").val(b.me.last_name);$("#update-email").val(b.me.email);$("#update-phone").val(b.me.phone);$("#update-phone").mask("(999) 999-9999")});$("a.cancel").live("click",function(){var g=this.id.replace("cancel","edit");var i=this.id.replace("cancel","");var f=b.me[i.toLowerCase()]||"[enter "+i.toLowerCase()+"]";var h='<span id="'+g+'">'+f+"</span>";$(this).parent().html(h)});$(".mini.button.save").live("click",function(){b.saveUser(this.id)});$("#pwLink").bind("click",function(){page.fox.center().display({url:"resetPassword",callback:function(){$("#resetPasswordButton").bind("click",function(){page.request({url:"/account/resetPassword",request:{username:b.me.username,old_password:$("#oldPassword").val(),new_password:$("#newPassword").val(),password_secret:$("#passwordSecret").val()},success:function(f){page.fox.center().message({title:"Success!",message:"You have reset your password."})}})});$("#oldPassword").focus();$("#oldPassword, #newPassword").bind("keypress",function(g){var f=g.keyCode||g.which;if(f==13){$("#resetPasswordButton").click()}})}})});$("#deleteAccount").bind("click",function(){if(b.me.created_by=="rentfox"){page.fox.center().message({title:"NOOOooOOoooooo...!",message:"Dear "+b.me.first_name+',<br /><br />						We are sorry to hear that you want to delete your account.<br /><br /> 						Since you are the superuser and owner of this account, 						you must either give superuser access to another person within your company						or delete the company account.<br /><br />						You may do so from the <a href="/company">company page</a>.'})}else{c()}})}function c(){page.fox.confirm({message:"We are very sorry to hear that you want to delete your account. 				Are you absolutely sure you want to do this?",confirmButtonText:"Yes, please delete",success:function(){page.fox.center().display({url:"deleteUser",callback:function(){$("#password").focus();$("#password").bind("keypress",function(g){var f=g.keyCode||g.which;if(f==13){$("#deleteUserButton").click()}});$("#deleteUserButton").bind("click",function(){page.request({url:"/account/delete",request:{password:$("#password").val()},success:function(f){location.href="/signout"}})})}})}})}e()}AccountManage.prototype.saveUser=function(f){var c=this,g=c.me.first_name,b=c.me.last_name,e=c.me.email,a=c.me.phone!==null?c.me.phone:"";switch(f){case"saveName":g=$("#update-fname").val();b=$("#update-lname").val();break;case"saveEmail":e=$("#update-email").val();break;case"savePhone":a=$("#update-phone").val();break}page.request({url:"/account/save",request:{userId:c.me.id,fname:g,lname:b,email:e,phone:a},success:function(k){c.me=k;var i=f.replace("save","edit");var l=f.replace("save","");var h=c.me[l.toLowerCase()]||"[enter "+l.toLowerCase()+"]";var j='<span id="'+i+'">'+h+"</span>";$("#"+f).parent().html(j);c.refreshUser()}});return c};AccountManage.prototype.refreshUser=function(){var a=this;var e=a.me.name.replace(" ","");var c=a.me.first_name||a.me.last_name||"No-Name";$("#editName").text(e?a.me.name:"[enter name]");$("#editEmail").text(a.me.email||"[enter email]");$("#editPhone").text(a.me.phone||"[enter phone]");$("#managerFirstName").text(c);if(a.me.type=="admin"){$("#manages").text(c+" has access to all properties.")}else{if(a.me.properties.length){var b="";$.each(a.me.properties,function(f,g){b+='<a href="/property/view/'+g.id+'">'+g.name+"</a>"});$("#myProperties").html(b);$("#manages").text(c+" manages:")}else{$("#manages").text(c+" has no access to any properties.")}}return a};function CompanyManage(){var b=this;var a={editName:'<a class="mini button cancel" id="cancelName"><span>Cancel</span></a>			<a class="mini button save" id="saveName"><span>Save</span></a>			<input type="text" id="update-name">',editStreet:'<a class="mini button cancel" id="cancelStreet"><span>Cancel</span></a>			<a class="mini button save" id="saveStreet"><span>Save</span></a>			<input type="text"  id="update-street">',editLocation:'<a class="mini button cancel" id="cancelLocation"><span>Cancel</span></a>			<a class="mini button save" id="saveLocation"><span>Save</span></a>			<input type="text" id="update-city">,			<input type="text" class="mini" id="update-state">,			<input type="text" class="small" id="update-zip">',editEmail:'<a class="mini button cancel" id="cancelEmail"><span>Cancel</span></a>			<a class="mini button save" id="saveEmail"><span>Save</span></a>			<input type="text" id="update-email">',editPhone:'<a class="mini button cancel" id="cancelPhone"><span>Cancel</span></a>			<a class="mini button save" id="savePhone"><span>Save</span></a>			<input type="text" id="update-phone">',};function e(){page.request({url:"/company/getInfo",type:"GET",async:false,success:function(f){b.co=f;b.refreshCompany()}});$("#companyManage").addClass("superuser");$(".item > span").live("click",function(){var f=this.id;$(this).parent().html(a[f]);$("#update-name").val(b.co.name);$("#update-email").val(b.co.email);$("#update-phone").val(b.co.phone);$("#update-phone").mask("(999) 999-9999");$("#update-street").val(b.co.street);$("#update-city").val(b.co.city);$("#update-state").val(b.co.state);$("#update-zip").val(b.co.zip)});$("a.cancel").live("click",function(){var g=this.id.replace("cancel","edit");var i=this.id.replace("cancel","");var f=b.co[i.toLowerCase()]||"[enter "+i.toLowerCase()+"]";var h='<span id="'+g+'">'+f+"</span>";$(this).parent().html(h)});$(".mini.button.save").live("click",function(){b.saveCompany(this.id)});$("#switchSuperuser").bind("click",function(){if(!b.companyUsers){c()}if(b.companyUsers.length){b.switchSuperuser()}else{b.declineSuperuserSwitch()}});$("#deleteAccount").bind("click",function(){page.fox.confirm({message:"We are very sorry to hear that you want to delete your company. 					Are you absolutely sure you want to do this?",confirmButtonText:"Yes, please delete",success:function(){page.fox.center().display({url:"deleteCompany",callback:function(){$("#password").focus();$("#password").bind("keypress",function(g){var f=g.keyCode||g.which;if(f==13){$("#deleteCompanyButton").click()}});$("#deleteCompanyButton").bind("click",function(){page.request({url:"/company/delete",request:{password:$("#password").val()},success:function(f){location.href="/signout"}})})}})}})})}function c(){page.request({url:"/company/getCompanyActiveUsers",type:"GET",async:false,success:function(f){b.companyUsers=f}})}e()}CompanyManage.prototype.declineSuperuserSwitch=function(){page.fox.center().message({title:"Oops!",message:'It appears that you are the only activated user in this company. 			You cannot give access to somebody else unless there is another activated user.<br /><br /> 			You may create new users from the <a href="/users">users page</a>.<br /><br />			Keep in mind they will need to be activated 			before you can transfer superuser priviledges.'})};CompanyManage.prototype.switchSuperuser=function(){var a=this;page.fox.confirm({message:"Once you give away superuser priviledges to someone else, you will no longer have control over this page.<br /><br /> 			Are you absolutely sure you want to do this?",confirmButtonText:"Yes, continue",success:function(){page.fox.center().display({url:"switchSuperuser",callback:function(){var b=[];$.each(a.companyUsers,function(e,c){b[e]='<option id="'+c.id+'">'+c.name+"</option>"});$("#userlist").html(b.join(""));$("#switchSuperuserButton").bind("click",function(){page.request({url:"/company/switchSuperuser",request:{managerId:$("#userlist option:selected").attr("id")},success:function(c){location.href="/company"}})})}})}})};CompanyManage.prototype.saveCompany=function(i){var j=this,b=j.co.name,h=j.co.email!==null?j.co.email:"",g=j.co.phone!==null?j.co.phone:"",e=j.co.street!==null?j.co.street:"",f=j.co.city!==null?j.co.city:"",a=j.co.state!==null?j.co.state:"",c=j.co.zip!==null?j.co.zip:"";switch(i){case"saveName":b=$("#update-name").val();break;case"saveEmail":h=$("#update-email").val();break;case"savePhone":g=$("#update-phone").val();break;case"saveStreet":e=$("#update-street").val();break;case"saveLocation":f=$("#update-city").val();a=$("#update-state").val();c=$("#update-zip").val();break}page.request({url:"/company/save",request:{name:b,street:e,city:f,state:a,zip:c,email:h,phone:g},success:function(o){j.co=o;var l=i.replace("save","edit");var p=i.replace("save","");var k=j.co[p.toLowerCase()]||"[enter "+p.toLowerCase()+"]";var n='<span id="'+l+'">'+k+"</span>";$("#"+i).parent().html(n);$("#company-name").text(j.co.name);j.refreshCompany()}});return j};CompanyManage.prototype.refreshCompany=function(){var a=this;$("#editName").text(a.co.name);$("#editEmail").text(a.co.email||"[enter email]");$("#editPhone").text(a.co.phone||"[enter phone]");$("#editStreet").text(a.co.street||"[enter street]");$("#editLocation").text(a.co.location||"[enter city, state, zip]");return a};function Help(){}function UnitView(b){var a=this;a.propertyId=false;a.currentTenant=null;if(b.propertyId){a.propertyId=b.propertyId}if(b.unitId){a.unitId=b.unitId}a.init();return a}UnitView.prototype.init=function(){var a=this;page.request({url:"/unit/json/"+a.unitId,type:"GET",async:false,success:function(b){a.unit=b}});a.prop=new Property({propertyId:a.propertyId});a.property=a.prop.getProperty();if(a.property.type==="multi"){a.unitscroller=new UnitScroller({property:a.property,clickUnit:function(b,f){var g=f.attr("id");var e=f.text();var c=a.getUnit(g);location.href=g}});a.unitscroller.initListItems({eachUnit:function(c){var b=a.getUnit(c.attr("id"));if(!b.floorPlan.id){c.addClass("noFloorPlan")}else{if(b.id==a.unitId){c.addClass("on")}}}});if(a.unitId){a.unitscroller.scrollToUnit(a.unitId)}}a.picViewer=new PicViewer("#unitPicViewer");a.moduleOn("pulse").navSetup().refreshUnit().pulseSetup().unitSetup().tenantSetup().leaseSetup().transactionSetup();return a};UnitView.prototype.refreshUnit=function(){var l=this;$("#leaseModule .view, #cancelLeaseEditor, #leaseStatus, #tenants, #noTenants").css({display:"none"});$("#leaseStatus").removeClass("red,orange");if(l.unit.lease){$("#leaseDisplayMode,#cancelLeaseEditor").css({display:"block"});$("#displayLeaseTitle").text(l.unit.lease.status);$("#displayContractStart").text(l.unit.lease.start);$("#displayContractEnd").text(l.unit.lease.up);$("#displayMoveout").html('<a id="setMoveOutDate" class="link">'+l.unit.lease.out+"</a>");$("#displayRentDue").html("$"+l.unit.lease.rent+" due every "+dayStemmer(l.unit.lease.due.toString()));if(parseInt(l.unit.lease.due)>28){$("#displayRentDue").append("<div>Months with less than "+l.unit.lease.due+" days will have a due date on the last day of the month.</div>")}var k=parseInt(l.unit.lease.interval)===1?"each day late":"only once";$("#displayLateRule").html("$"+l.unit.lease.lateCharge+" charged "+k+" <span>"+l.unit.lease.gracePeriod+" days grace period</span>");var h=l.unit.lease.depositPaid?l.unit.lease.deposit:"0 <span>$"+l.unit.lease.deposit+" owed.</span>";$("#displayDeposit").html("$"+h);if(l.unit.lease.up==="No date set"){$("#lease-m2m").attr("checked",true);$("#contractDates").hide()}else{$("#lease-m2m").attr("checked",false);$("#contractDates").show()}$("#lease-start").val(l.unit.lease.editStart);$("#lease-end").val(l.unit.lease.editUp);l.unit.lease.out=="No date set"?$("#m2mafter").attr("checked","checked"):$("#m2mafter").removeAttr("checked");$("#lease-rent").val(l.unit.lease.rent);$('#lease-rent-due option[value="'+l.unit.lease.due+'"]').attr("selected","selected");$("#lease-deposit").val(l.unit.lease.deposit);$("#lease-depositPaid").attr("checked",l.unit.lease.depositPaid);$("#lease-lateFee").val(l.unit.lease.lateCharge);$('#lease-lateFee-interval option[value="'+l.unit.lease.interval+'"]').attr("selected","selected");$("#lease-grace").val(l.unit.lease.gracePeriod);var c=[],g=l.unit.lease.tenants?l.unit.lease.tenants:[],e=g.length;for(var b=0;b<e;b++){var a=g[b].id;c.push(['<li id="',a,'"><a class="link" href="/tenant/view/',a,'">',g[b].name,'</a> <img src="/styles/img/ico/x.png" alt="Remove tenant from lease" />',"</li>"].join(""))}$("#leaseTenants").html(c.join(""))}else{$("#leaseEditMode").css({display:"block"})}if(!l.unit.currentLease){$("#leaseStatus").addClass("red").css({display:"block"}).html('<a class="mini button" id="createLeaseButton"><span><img src="/styles/img/ico/lease_add.png" />Create new lease</span></a>Vacant Unit');$("#noTenants").css({display:"block"})}else{if(l.unit.tenants){l.renderTenants()}else{$("#noTenants").css({display:"block"});$("#leaseStatus").addClass("orange").css({display:"block"}).html('<a class="mini button" id="addTenantButton"><span><img src="/styles/img/ico/user_add.png" />Add Tenant</span></a>There are no tenants currently in the unit.')}}var c=['<option id="resetUnit">Select leases</option>'],j=l.unit.leases,e=j.length;for(b=0;b<e;b++){var a=j[b].id,f=j[b].display;if(l.unit.lease&&a===l.unit.lease.id){f=l.unit.lease.start+" - "+l.unit.lease.out}c.push(['<option id="',a,'">',f,"</option>"].join(""))}$("#allLeasesDropdown").html(c.join()).children('option[id="'+l.unit.lease.id+'"]').attr("selected","selected");$("#allLeasesDropdown").unbind("change").bind("change",function(){var i=$("#allLeasesDropdown option:selected").attr("id");if(i==="resetUnit"){page.request({url:"/unit/json/"+l.unitId,type:"GET",async:false,success:function(n){l.unit=n;l.refreshUnit();l.clearForm()}})}else{page.request({url:"/lease/json/"+i,type:"GET",async:false,success:function(n){l.unit.lease=n;l.refreshUnit()}})}});return l};UnitView.prototype.renderTenants=function(){var a=this;var f=a.unit.tenants;var e="";var c="";for(var b=0;b<f.length;b++){e+='<div class="person" id="'+f[b].id+'">			<div class="pic">				<div class="thumb user"><span class="frame"><img src="" /></span></div>			</div>			<dl>				<dt><a href="/tenant/view/'+f[b].id+'">'+f[b].name+"</a></dt>				<dd>"+f[b].email+"</dd>				<dd>"+f[b].phone+"</dd>			</dl>		</div>";c+='<li alt="'+f[b].id+'">'+f[b].name+"</li>"}$("#people").html(e);$("#tenantList").html(c);$("#tenants").css({display:"block"});a.tenantOn($("#tenantList li:first").addClass("on").attr("alt"))};UnitView.prototype.getUnit=function(c){var a=this;for(var b in a.property.units){if(a.property.units[b].id==c){return a.property.units[b]}}return false};UnitView.prototype.navSetup=function(){var a=this;$("#pulseNav").bind("click",function(){a.moduleOn("pulse")});$("#unitNav").bind("click",function(){a.moduleOn("unit")});$("#leaseNav").bind("click",function(){a.moduleOn("lease")});$("#transactionsNav").bind("click",function(){a.moduleOn("transactions")});return a};UnitView.prototype.pulseSetup=function(){var a=this;optlist=$("#unit-pulse-options > li"),unitid=a.unitId;a.pulse=new Pulse("#unit-pulse");page.request({url:"/pulse/get",request:{unitid:unitid},success:function(b){a.pulse.refresh(b)}});optlist.bind("click",function(){var c=$(this),e=c.attr("rel"),b=c.text();optlist.removeClass("on");c.addClass("on");page.request({url:"/pulse/get",request:{type:e,unitid:unitid},success:function(f){$("#unit-pulse-label").text(b);a.pulse.refresh(f)}})});return a};UnitView.prototype.unitSetup=function(){var b=this,f=b.unitId,e=b.picViewer,a={errors:[]},c=b.unit.floorplan;floorplanHtml="";if(c){floorplanHtml+="<dd>"+c.sqft+" sqft, "+c.beds+" bed / "+c.baths+" bath</dd>"}$("#unitNav dl").append(floorplanHtml);page.request({url:"/unit/photos",type:"GET",request:{unitid:f},success:function(g){e.setup(g)}});$("#unitPicViewer").filedrop({url:"/unit/uploadPhoto",data:{unitid:f},error:function(h,g){switch(h){case"BrowserNotSupported":a.errors.push({selector:"",message:"Your browser does not support drag and drop uploading.  Currently only Firefox 3.6+ supports this feature. Please use the upload button instead."});page.errors.prompt(a);break;case"TooManyFiles":a.errors.push({selector:"",message:"Too many files. You can only upload 25 files at a time."});page.errors.prompt(a);break;case"FileTooLarge":a.errors.push({selector:"",message:g.name+" is too large. Please keep each photo under 20MB."});page.errors.prompt(a);break;default:break}},maxfilesize:20,dragOver:function(){e.activateDropzone()},dragLeave:function(){e.deactivateDropzone()},docOver:function(){e.showDropzone()},docLeave:function(){e.hideDropzone()},drop:function(){e.hideDropzone();a.errors=[]},uploadStarted:function(j,h,g){page.ajaxStart()},uploadFinished:function(j,h,g,k){page.ajaxStop();if(g[0].errors){a.errors.push({selector:"",message:h.name+" failed to upload. "+g[0].errors[0].message});page.errors.prompt(a);return false}else{e.addPhoto(g[0])}}});new AjaxUpload("#unitPicViewer-upload",{action:"/unit/uploadPhoto",onSubmit:function(g,h){page.ajaxStart()},data:{unitid:f},responseType:"json",onComplete:function(h,g){page.ajaxStop();if(g.errors){page.errors.prompt(g)}else{e.addPhoto(g)}}});$("#unitPicViewer-delete").bind("click",function(){var g=e.photos[e.photoIndex],h=g?g.id:false;if(h){page.fox.confirm({message:"Are you sure you want to delete this photo?",confirmButtonText:"Delete photo",success:function(){page.request({url:"/unit/removePhoto",request:{photoid:h},success:function(i){e.removePhoto()}})}})}else{page.fox.message({title:"Oops!",message:"The photo you are trying to delete does not exist."})}});$("#edit-floorplan-link").bind("click",function(){location.href="/property/setup/"+b.propertyId+"/"+f});$("#floorplan-img").bind("click",function(){var g=$(this).attr("src").replace("-thumb","");page.previewModal.show(g)});return b};UnitView.prototype.leaseSetup=function(){var a=this;$("#createLeaseButton").live("click",function(){$("#leaseNav").click();$("#leaseDisplayMode").hide();$("#leaseEditMode").show();a.clearForm()});$("#createLease").bind("click",function(){var b=a.unit.lease;$("#leaseDisplayMode").hide();$("#leaseEditMode").show();a.unit.lease=0;a.clearForm();$("#cancelLeaseEditor").bind("mousedown",function(){a.unit.lease=b;a.refreshUnit();$("#cancelLeaseEditor").unbind("mousedown").trigger("click")})});$("#addTenant,#addTenantButton,#addTenantToLeaseButton").live("click",function(){location.href="/tenant/add/"+a.unit.currentLease.id});$("#editLease").bind("click",function(){a.showLeaseEditor()});$("#saveLease").bind("click",function(){var b=!a.unit.lease?"/lease/create":"/lease/save";page.request({url:b,request:{unitId:a.unitId,leaseId:a.unit.lease.id,m2m:$("#lease-m2m").attr("checked"),startdate:$("#lease-start").val(),enddate:$("#lease-end").val(),m2m_after:$("#m2mafter").attr("checked"),prev_paid:$("#prevPaid").attr("checked"),rent:$("#lease-rent").val(),due:$("#lease-rent-due option:selected").val(),deposit:$("#lease-deposit").val(),deposit_paid:$("#lease-depositPaid").attr("checked"),latecharge:$("#lease-lateFee").val(),interval:$("#lease-lateFee-interval option:selected").val(),graceperiod:$("#lease-grace").val(),},offset:{x:200,y:0},success:function(c){if(a.unit.lease.id){a.unit.lease=c}else{a.unit=c}a.hideLeaseEditor().refreshUnit()}})});$("#cancelLeaseEditor").bind("click",function(){a.hideLeaseEditor()});$("#lease-m2m").bind("click",function(){if($(this).is(":checked")){$("#contractDates").slideUp("fast")}else{$("#contractDates").slideDown("fast")}});$("#setMoveOutDate").live("click",function(){page.fox.center().display({url:"endLease",callback:function(){new Datepicker("#moveOutDateInput","days");$("#moveOutDateInput").mask("99/99/9999");$("#endLeaseButton").bind("click",function(){page.request({url:"/lease/endLease",request:{leaseid:a.unit.lease.id,unitId:a.unitId,moveOutDate:$("#moveOutDateInput").val()},success:function(b){a.unit.lease=b;a.refreshUnit()}})})}})});$("#deleteLease").bind("click",function(){page.fox.confirm({message:"Are you sure you want to delete this lease?  You will lose access to this lease forever.",confirmButtonText:"Yes, please delete",success:function(){page.request({url:"/lease/delete",request:{leaseid:a.unit.lease.id,unitId:a.unitId},success:function(b){location.reload()}})}})});$("#leaseTenants > li > img").live("click",function(f){var c=a.unit.lease,b=$(this).parent().attr("id");page.fox.confirm({message:"Are you sure you want to remove this tenant from the lease?",confirmButtonText:"Yes, please remove",success:function(){page.request({url:"/tenant/removeFromLease",request:{tenantId:b,leaseId:a.unit.lease.id,unitId:a.unitId},success:function(e){var g=e.lease.tenants;a.unit=e;a.unit.lease=c;a.unit.lease.tenants=g;a.refreshUnit()}})}})});$("#lease-start, #lease-end").mask("99/99/9999");new Datepicker("#lease-start");new Datepicker("#lease-end");return a};UnitView.prototype.transactionSetup=function(){var b=this;$("#billResidentsButton").bind("click",function(){b.showBillResidents()});$("#payResidentsButton").bind("click",function(){b.showPayResidents()});$("#transactionsModule .action .cancel").bind("click",function(){b.hideBillPayForms()});new Datepicker("#billDueDate");var g=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];if(b.unit.transactions.length){var e=b.unit.transactions[0];var a="";a+="<dd>"+e.amount;e.amount.indexOf("-")==-1?a+=" paid on ":a+=" returned on ";a+=g[e.month-1]+" "+e.day+", "+e.year+"</dd>";$("#transactionsNav dl").append(a)}else{$("#transactionsNav dl").append("<dd>No transaction records</dd>")}f(b.unit.transactions);var c=$("#transaction-options > li");c.bind("click",function(){var j=$(this),i=j.attr("type"),h=j.text();c.removeClass("on");j.addClass("on");page.request({url:"/reports/get",request:{type:i,unitId:b.unitId},success:function(k){$("#transaction-label").text(h);f(k)}})});function f(h){var i="";$.each(h,function(j,k){k.amount.indexOf("-")==-1?i+='<div class="row plus">':i+='<div class="row minus">';i+='<div class="date">'+g[k.month-1]+" "+k.day+", "+k.year+"</div>";i+='<div class="type">'+k.type+"</div>";i+='<div class="amount">'+k.amount+"</div></div>"});if(!i){i+='<div class="nothing">No transaction records</div>'}$("#transactionsModule #transactionList").html(i)}return b};UnitView.prototype.showBillResidents=function(){var a=this;$("#transactionsModule .action, #transactionsDisplay").css({display:"none"});$("#billResidents").css({display:"block"});$("#billMessage").unbind().elastic();return a};UnitView.prototype.showPayResidents=function(){var a=this;$("#transactionsModule .action, #transactionsDisplay").css({display:"none"});$("#payResidents").css({display:"block"});$("#payMessage").unbind().elastic();return a};UnitView.prototype.hideBillPayForms=function(){var a=this;$("#transactionsModule .action").css({display:"none"});$("#transactionsDisplay").css({display:"block"});return a};UnitView.prototype.showLeaseEditor=function(){var a=this;$("#prevPaidBox").remove();$("#leaseModule .view").css({display:"none"});$("#leaseEditMode").css({display:"block"});return a};UnitView.prototype.hideLeaseEditor=function(){var a=this;$("#leaseModule .view").css({display:"none"});$("#leaseDisplayMode").css({display:"block"});return a};UnitView.prototype.moduleOn=function(b){var a=this;$("#unitViewNav > li").removeClass("on");$(".module").css({display:"none"});switch(b){case"unit":$("#unitNav").addClass("on");$("#unitModule").css({display:"block"});break;case"lease":$("#leaseNav").addClass("on");$("#leaseModule").css({display:"block"});break;case"transactions":$("#transactionsNav").addClass("on");$("#transactionsModule").css({display:"block"});break;default:$("#pulseNav").addClass("on");$("#pulseModule").css({display:"block"})}return a};UnitView.prototype.tenantSetup=function(){var a=this;$("#tenantList > li").live("click",function(){$("#tenantList > li").removeClass("on");$(this).addClass("on");var b=$(this).attr("alt");a.tenantOn(b)});$("#editTenant").bind("click",function(){location.href="/tenant/view/"+a.currentTenant});$("#removeTenant").bind("click",function(){page.fox.confirm({message:"Are you sure you want to remove this tenant from the lease?",confirmButtonText:"Yes, please remove",success:function(){page.request({url:"/tenant/removeFromLease",request:{tenantId:a.currentTenant,leaseId:a.unit.lease.id,unitId:a.unitId},success:function(b){a.unit=b;a.refreshUnit()}})}})});return a};UnitView.prototype.tenantOn=function(b){var a=this;$("#tenants .person").css({display:"none"});$("#"+b).css({display:"block"});a.currentTenant=b;return a};UnitView.prototype.clearForm=function(){$("#leaseEditMode input").val("")};function TenantAdd(b){var a=this;a.leaseId=b?b.leaseId:0;a.init();return a}TenantAdd.prototype.init=function(){var a=this;a.initCreateForm();return a};TenantAdd.prototype.initCreateForm=function(){var a=this;$("#createForm input").bind("keypress",function(c){var b=c.keyCode||c.which;if(b==13){$("#continueCreateTenant").click()}});$("#continueCreateTenant").bind("click",function(){page.request({url:"/tenant/exists",request:{fname:$("#fname").val(),lname:$("#lname").val(),email:$("#email").val(),phone:$("#phone").val(),dob:"",ssn:"",leaseId:a.leaseId},offset:{x:-270,y:0},success:function(b){if(b.match){a.showMatches(b.tenants)}else{location.href="/tenant/view/"+b.id}}})});$("#phone").mask("(999) 999-9999");return a};TenantAdd.prototype.showMatches=function(b){var a=this;$("#noMatchButton").bind("click",function(){page.request({url:"/tenant/create",request:{fname:$("#fname").val(),lname:$("#lname").val(),email:$("#email").val(),phone:"",dob:"",ssn:"",leaseId:a.leaseId},success:function(c){location.href="/tenant/view/"+c.id}})});$.each(b,function(f,g){var c="Does not belong to any unit.";if(g.unit){c=g.unit.display}var e=[];e[0]='<div class="tenant"><a class="button existingTenant" id="'+g.id+'"><span>This one</span></a><div class="person"><div class="pic"><div class="thumb"><span class="frame">';if(g.photo){e[1]='<img src="'+g.photo+'" />'}e[2]="</span></div></div><dl><dt>"+g.name+"</dt><dd>"+g.email+"</dd><dd>"+c+"</dd></dl></div></div>";$("#tenantMatchList").append(e.join(""));page.thumbnail.init()});$(".existingTenant").bind("click",function(){var c=$(this).attr("id");page.request({url:"/tenant/addLease",request:{tenantId:c,leaseId:a.leaseId},success:function(e){location.href="/tenant/view/"+e.tenantId}})});$("#createForm").css({display:"none"});$("#tenantMatches").css({display:"block"});return a};function TenantView(b){var a=this;page.request({url:"/tenant/json/"+b.tenantId,async:false,request:{tenantId:b.tenantId},success:function(c){a.tenant=c;a.init()}});return a}TenantView.prototype.init=function(){var a=this;a.refreshData().initForms();return a};TenantView.prototype.initForms=function(){var a=this;a.bindUpdateDelete();$("#addContact").bind("click",function(){a.openEditor("contact",$("#contactButton"),"create");$("#contactEditor input").val("");page.inputText.reset()});$("#cancelContact").bind("click",function(){a.closeEditor("contact")});$("#saveContact").bind("click",function(){a.saveContact()});$("#contactEditor input").bind("keypress",function(c){var b=c.keyCode||c.which;if(b==13){$("#saveContact").click()}});$("#addResidence").bind("click",function(){a.openEditor("residence",$("#residenceButton"),"create");$("#residenceEditor input").val("");page.inputText.reset()});$("#cancelResidence").bind("click",function(){a.closeEditor("residence")});$("#saveResidence").bind("click",function(){a.saveResidence()});$("#residenceEditor input").bind("keypress",function(c){var b=c.keyCode||c.which;if(b==13){$("#saveResidence").click()}});$("#editTenantInfo").bind("click",function(){a.openEditor("tenant",$("#tenantInfoDisplay"))});$("#cancelTenantInfo").bind("click",function(){a.closeEditor("tenant")});$("#saveTenantInfo").bind("click",function(){a.saveTenantInfo()});$("#tenantInfoEditor input").bind("keypress",function(c){var b=c.keyCode||c.which;if(b==13){$("#saveTenantInfo").click()}});new Datepicker("#residenceStart");new Datepicker("#residenceEnd");$("#tenantPhone, #emergencyPhone, #residenceLandlordPhone").mask("(999) 999-9999");$("#tenantDOB, #residenceStart, #residenceEnd").mask("99/99/9999");$("#tenantSSN").mask("999-99-9999");return a};TenantView.prototype.bindUpdateDelete=function(){var a=this;$("#emergencyContacts p.item > img.edit").unbind("click").bind("click",function(){a.openEditor("contact",$(this).parent(),"save")});$("#emergencyContacts .delete").unbind().bind("click",function(){var b=$(this).parent().attr("id");page.fox.confirm({message:"Are you sure you want to delete this emergency contact?",confirmButtonText:"Yes, please delete",success:function(){page.request({url:"/tenant/deleteContact",request:{contactId:b,tenantId:a.tenant.id},offset:{x:-270,y:0},success:function(c){a.tenant=c;a.refreshData()}})}});return false});$("#previousResidences p.item > img.edit").unbind("click").bind("click",function(){a.openEditor("residence",$(this).parent(),"save")});$("#previousResidences .delete").unbind().bind("click",function(){var b=$(this).parent().attr("id");page.fox.confirm({message:"Are you sure you want to delete this previous residence?",confirmButtonText:"Yes, please delete",success:function(){page.request({url:"/tenant/deleteResidence",request:{residenceId:b,tenantId:a.tenant.id},offset:{x:-270,y:0},success:function(c){a.tenant=c;a.refreshData()}})}});return false});return a};TenantView.prototype.openEditor=function(c,f,b){var a=this;a.currentOperation=b;if(c=="contact"){var e=$("#contactEditor");if(a.currentContactItem){a.currentContactItem.css({display:"block"})}a.currentContactItem=f;if(b=="save"){a.populateContactEditor()}}else{if(c=="residence"){var e=$("#residenceEditor");if(a.currentResidenceItem){a.currentResidenceItem.css({display:"block"})}a.currentResidenceItem=f;if(b=="save"){a.populateResidenceEditor()}}else{var e=$("#tenantInfoEditor");a.populateTenantEditor()}}e.insertAfter(f).css({display:"block"});f.css({display:"none"});return a};TenantView.prototype.closeEditor=function(b){var a=this;if(b=="contact"){var e=$("#contactEditor");var c=a.currentContactItem;a.currentContactItem=0}else{if(b=="residence"){var e=$("#residenceEditor");var c=a.currentResidenceItem;a.currentResidenceItem=0}else{var e=$("#tenantInfoEditor");var c=$("#tenantInfoDisplay")}}e.css({display:"none"});c.css({display:"block"});return a};TenantView.prototype.saveTenantInfo=function(){var a=this;page.inputText.clear();page.request({url:"/tenant/updateTenant",request:{tenantId:a.tenant.id,fname:$("#tenantFname").val(),lname:$("#tenantLname").val(),phone:$("#tenantPhone").val(),email:$("#tenantEmail").val(),dob:$("#tenantDOB").val(),ssn:$("#tenantSSN").val()},offset:{x:0,y:0},success:function(b){a.tenant=b;a.closeEditor("tenant").refreshData()}});page.inputText.reset();return a};TenantView.prototype.saveContact=function(){var a=this;var b=0;if(a.currentOperation=="save"){b=a.currentContactItem.attr("id")}page.inputText.clear();page.request({url:"/tenant/saveContact",offset:{x:250,y:0},request:{contactId:b,tenantId:a.tenant.id,name:$("#emergencyName").val(),phone:$("#emergencyPhone").val(),relationship:$("#emergencyRelationship").val()},success:function(c){a.tenant=c;a.closeEditor("contact").refreshData()}});page.inputText.reset();return a};TenantView.prototype.saveResidence=function(){var a=this;var b=0;if(a.currentOperation=="save"){b=a.currentResidenceItem.attr("id")}page.inputText.clear();page.request({url:"/tenant/saveResidence",request:{residenceId:b,tenantId:a.tenant.id,startdate:$("#residenceStart").val(),enddate:$("#residenceEnd").val(),street:$("#residenceStreet").val(),city:$("#residenceCity").val(),state:$("#residenceState").val(),landlordname:$("#residenceLandlord").val(),landlordphone:$("#residenceLandlordPhone").val(),landlordemail:$("#residenceLandlordEmail").val(),reason:$("#residenceReasonLeaving").val()},offset:{x:-100,y:-50},success:function(c){a.tenant=c;a.closeEditor("residence").refreshData()}});page.inputText.reset();return a};TenantView.prototype.refreshData=function(){var a=this;$("#personalName").text(a.tenant.firstname+" "+a.tenant.lastname);$("#personalEmail").text(a.tenant.email);$("#personalPhone").text(a.tenant.phone);$("#personalDOB").text(a.tenant.dob);if(a.tenant.ssn){$("#personalSSN").text("SSN: "+a.tenant.ssn)}else{$("#personalSSN").text("")}$("#contactEditor").insertAfter($("#contactButton"));$("#residenceEditor").insertAfter($("#residenceButton"));var b="";$.each(a.tenant.contacts,function(c,e){b+='<p class="item" id="'+e.id+'">';b+='<img class="delete" src="/styles/img/ico/delete.png" /><img class="edit" src="/styles/img/ico/pencil.png" />';b+=e.name+"<br />"+e.phone+"<br />"+e.relationship+"</em></p>"});$("#contactList").html(b);b="";$.each(a.tenant.residences,function(c,e){b+='<p class="item" id="'+e.id+'">';b+='<img class="delete" src="/styles/img/ico/delete.png" /><img class="edit" src="/styles/img/ico/pencil.png" />';b+=e.started+" - "+e.ended+"<br />";b+=e.street+"<br />"+e.city+", "+e.state+"<br />";if(e.landlord){b+=e.landlord+" (landlord)<br />"}if(e.landlordPhone){b+=e.landlordPhone+"<br />"}if(e.landlordEmail){b+=e.landlordEmail+"<br />"}if(e.reason){b+='<em>"'+e.reason+'"</em></p>'}});$("#residenceList").html(b);a.bindUpdateDelete();return a};TenantView.prototype.populateTenantEditor=function(){var a=this;$("#tenantFname").val(a.tenant.firstname);$("#tenantLname").val(a.tenant.lastname);$("#tenantEmail").val(a.tenant.email);$("#tenantPhone").val(a.tenant.phone);$("#tenantDOB").val(a.tenant.dob);$("#tenantSSN").val(a.tenant.ssn);page.inputText.reset();return a};TenantView.prototype.populateContactEditor=function(){var b=this;var c=b.currentContactItem.attr("id");var a=b.getContactById(c);$("#emergencyName").val(a.name);$("#emergencyPhone").val(a.phone);$("#emergencyRelationship").val(a.relationship);page.inputText.reset();return b};TenantView.prototype.populateResidenceEditor=function(){var a=this;var c=a.currentResidenceItem.attr("id");var b=a.getResidenceById(c);$("#residenceStart").val(b.started);$("#residenceEnd").val(b.ended);$("#residenceStreet").val(b.street);$("#residenceCity").val(b.city);$("#residenceState").val(b.state);$("#residenceLandlord").val(b.landlord);$("#residenceLandlordPhone").val(b.landlordPhone);$("#residenceLandlordEmail").val(b.landlordEmail);$("#residenceReasonLeaving").val(b.reason);page.inputText.reset();return a};TenantView.prototype.getContactById=function(c){var a=this;for(var b in a.tenant.contacts){if(a.tenant.contacts[b].id==c){return a.tenant.contacts[b]}}return false};TenantView.prototype.getResidenceById=function(b){var a=this;for(var c in a.tenant.residences){if(a.tenant.residences[c].id==b){return a.tenant.residences[c]}}return false};function UnitScroller(b){var a=this;a.container=$("#unitScroller > .scrollFrame");a.list=$("#unitScroller > .scrollFrame > ul");a.listH=$("#unitScroller > .scrollFrame > ul > li").length*30;a.filterBox=$("#unitScroller > .manualInput > input");a.unitSlider=$("#unitScroller > .controls > .slider");a.clickable=true;a.property=b.property;a.clickUnit=b.clickUnit;a.stopTop=0;a.init()}UnitScroller.prototype.init=function(){var a=this;a.initListItems().loadUnits().setFrameHeight().flickIt();$(window).bind("resize",function(){a.setFrameHeight()});a.filterBox.bind("keyup",function(){a.filterUnits()});a.list.disableTextSelect();return a};UnitScroller.prototype.initSlider=function(){var a=this;a.unitSlider.slider("destroy").slider({orientation:"vertical",min:a.frameH,max:a.listH,value:a.listH,animate:true,stop:function(b,c){a.scroll=0-(a.listH-$(this).slider("value"));a.list.animate({top:a.scroll})}});if(a.listH<=a.frameH){a.unitSlider.css({display:"none"})}else{a.unitSlider.css({display:"block"})}return a};UnitScroller.prototype.filterUnits=function(){var a=this;a.listH=0;if(a.filterBox.attr("value")!=""){a.listItems.css({display:"none"});a.listItems.each(function(b,c){if($(this).text().toUpperCase().match(a.filterBox.attr("value").toUpperCase())){$(this).css({display:"block"});a.listH+=30}})}else{a.listItems.css({display:"block"});a.listH=a.listItems.size()*30}a.list.animate({top:0});a.initUnitDrag().initSlider();return a};UnitScroller.prototype.initUnitDrag=function(){var a=this;a.list.unbind().draggable({axis:"y",distance:5,start:function(b,c){a.timestamp=new Date();a.startTime=a.timestamp.getTime();a.clickable=false;a.startTop=$(this).position().top},stop:function(b,c){a.timestamp=new Date();a.stopTime=a.timestamp.getTime();a.timeDiff=(a.stopTime-a.startTime)/1000;a.stopTop=$(this).position().top;a.dragDistance=a.stopTop-a.startTop;if(a.dragDistance<0){a.dragDistance*=-1;a.dragDirection="up"}else{a.dragDirection="down"}a.scrollRate=a.dragDistance/a.timeDiff;a.flickIt()}});return a};UnitScroller.prototype.flickIt=function(){var a=this;a.fromTop=-a.listH+a.frameH;if(a.stopTop>0||a.listH<=a.frameH){a.list.animate({top:0});a.unitSlider.slider("value",a.listH);return}if(a.stopTop<a.fromTop){a.list.animate({top:a.fromTop});a.unitSlider.slider("value",a.frameH);return}if(a.timeDiff<(0.1+a.listItems.size()/5000)){if(a.timeDiff>0.1){if(a.dragDistance<100){a.unitSlider.slider("value",a.listH+a.stopTop);return}}if(a.dragDirection=="up"){a.scroll=a.stopTop-a.listH*0.2}else{a.scroll=a.stopTop+a.listH*0.2}if(a.scroll>0){a.list.animate({top:a.scroll/13});a.list.animate({top:0});a.unitSlider.slider("value",a.listH);return}if(a.scroll<a.fromTop){a.list.animate({top:a.fromTop+(a.scroll/13)});a.list.animate({top:a.fromTop});a.unitSlider.slider("value",a.frameH);return}a.list.animate({top:a.scroll});a.unitSlider.slider("value",a.listH+a.scroll)}else{a.unitSlider.slider("value",a.listH+a.stopTop)}return a};UnitScroller.prototype.setFrameHeight=function(){var a=this;a.frameH=$(window).height()-230;a.unitSlider.css("height",a.frameH-10);a.container.css("height",a.frameH);a.initUnitDrag().initSlider();if(a.listH<a.frameH&&a.filterBox.attr("value")=="filter"){a.filterBox.css({display:"none"})}else{a.filterBox.css({display:"block"})}return a};UnitScroller.prototype.loadUnits=function(e){var a=this;var c=new Array();a.listItems.remove();for(var b in a.property.units){if(e){if(e.currentUnit==a.property.units[b].id){c[b]='<li class="on" id='+a.property.units[b].id+">"+a.property.units[b].label+"</li>"}else{c[b]="<li id="+a.property.units[b].id+">"+a.property.units[b].label+"</li>"}}else{c[b]="<li id="+a.property.units[b].id+">"+a.property.units[b].label+"</li>"}}a.list.html(c.join(""));a.listH=c.length*30;if(a.listH<a.frameH){a.filterBox.css({display:"none"})}else{a.filterBox.css({display:"block"})}a.initUnitDrag().initSlider();a.listItems=$("#unitScroller > .scrollFrame > ul > li");return a};UnitScroller.prototype.initListItems=function(b){var a=this;a.listItems=$("#unitScroller > .scrollFrame > ul > li");if(a.clickUnit){a.listItems.unbind().bind("click",function(){if(a.clickable){a.clickUnit(a.listItems,$(this))}a.clickable=true})}if(b){if(b.eachUnit){a.listItems.each(function(){b.eachUnit($(this))})}if(b.allUnits){b.allUnits(a.listItems)}}return a};UnitScroller.prototype.scrollToUnit=function(c){var b=this;var a=$("#"+c).position().top-b.frameH/2+30;var e=b.listH-a;if(b.frameH>e){b.list.css({top:(b.listH-b.frameH)*-1});b.unitSlider.slider("value",b.frameH)}else{if(a>b.frameH){b.list.css({top:a*-1});b.unitSlider.slider("value",b.listH-a)}}return b};function PreviewModal(){var a=this;this.modal=$("#previewModal");this.img=$("#previewModal img");$("#previewModal .close").bind("click",function(){a.modal.hide()})}PreviewModal.prototype.show=function(b){var a=this;this.modal.show();this.img.show().attr("src",b)};PreviewModal.prototype.hide=function(){this.modal.hide();this.img.hide().attr("src","")};jQuery.extend({historyCurrentHash:undefined,historyCallback:undefined,historyIframeSrc:undefined,historyNeedIframe:jQuery.browser.msie&&(jQuery.browser.version<8||document.documentMode<8),historyInit:function(f,e){jQuery.historyCallback=f;if(e){jQuery.historyIframeSrc=e}var c=location.hash.replace(/\?.*$/,"");jQuery.historyCurrentHash=c;if(jQuery.historyNeedIframe){if(jQuery.historyCurrentHash==""){jQuery.historyCurrentHash="#"}jQuery("body").prepend('<iframe id="jQuery_history" style="display: none;" src="javascript:false;"></iframe>');var a=jQuery("#jQuery_history")[0];var b=a.contentWindow.document;b.open();b.close();b.location.hash=c}else{if(jQuery.browser.safari){jQuery.historyBackStack=[];jQuery.historyBackStack.length=history.length;jQuery.historyForwardStack=[];jQuery.lastHistoryLength=history.length;jQuery.isFirst=true}}if(c){jQuery.historyCallback(c.replace(/^#/,""))}setInterval(jQuery.historyCheck,100)},historyAddHistory:function(a){jQuery.historyBackStack.push(a);jQuery.historyForwardStack.length=0;this.isFirst=true},historyCheck:function(){if(jQuery.historyNeedIframe){var a=jQuery("#jQuery_history")[0];var e=a.contentDocument||a.contentWindow.document;var g=e.location.hash.replace(/\?.*$/,"");if(g!=jQuery.historyCurrentHash){location.hash=g;jQuery.historyCurrentHash=g;jQuery.historyCallback(g.replace(/^#/,""))}}else{if(jQuery.browser.safari){if(jQuery.lastHistoryLength==history.length&&jQuery.historyBackStack.length>jQuery.lastHistoryLength){jQuery.historyBackStack.shift()}if(!jQuery.dontCheck){var b=history.length-jQuery.historyBackStack.length;jQuery.lastHistoryLength=history.length;if(b){jQuery.isFirst=false;if(b<0){for(var c=0;c<Math.abs(b);c++){jQuery.historyForwardStack.unshift(jQuery.historyBackStack.pop())}}else{for(var c=0;c<b;c++){jQuery.historyBackStack.push(jQuery.historyForwardStack.shift())}}var f=jQuery.historyBackStack[jQuery.historyBackStack.length-1];if(f!=undefined){jQuery.historyCurrentHash=location.hash.replace(/\?.*$/,"");jQuery.historyCallback(f)}}else{if(jQuery.historyBackStack[jQuery.historyBackStack.length-1]==undefined&&!jQuery.isFirst){if(location.hash){var g=location.hash;jQuery.historyCallback(location.hash.replace(/^#/,""))}else{var g="";jQuery.historyCallback("")}jQuery.isFirst=true}}}}else{var g=location.hash.replace(/\?.*$/,"");if(g!=jQuery.historyCurrentHash){jQuery.historyCurrentHash=g;jQuery.historyCallback(g.replace(/^#/,""))}}}},historyLoad:function(c){var e;c=decodeURIComponent(c.replace(/\?.*$/,""));e="#"+c;location.hash=e;jQuery.historyCurrentHash=e;if(jQuery.historyNeedIframe){var a=jQuery("#jQuery_history")[0];var b=a.contentWindow.document;b.open();b.close();b.location.hash=e;jQuery.lastHistoryLength=history.length;jQuery.historyCallback(c)}else{jQuery.historyCallback(c)}}});(function(){function log(){if(typeof(console)!="undefined"&&typeof(console.log)=="function"){Array.prototype.unshift.call(arguments,"[Ajax Upload]");console.log(Array.prototype.join.call(arguments," "))}}function addEvent(el,type,fn){if(el.addEventListener){el.addEventListener(type,fn,false)}else{if(el.attachEvent){el.attachEvent("on"+type,function(){fn.call(el)})}else{throw new Error("not supported or DOM not loaded")}}}function addResizeEvent(fn){var timeout;addEvent(window,"resize",function(){if(timeout){clearTimeout(timeout)}timeout=setTimeout(fn,100)})}if(document.documentElement.getBoundingClientRect){var getOffset=function(el){var box=el.getBoundingClientRect();var doc=el.ownerDocument;var body=doc.body;var docElem=doc.documentElement;var clientTop=docElem.clientTop||body.clientTop||0;var clientLeft=docElem.clientLeft||body.clientLeft||0;var zoom=1;if(body.getBoundingClientRect){var bound=body.getBoundingClientRect();zoom=(bound.right-bound.left)/body.clientWidth}if(zoom>1){clientTop=0;clientLeft=0}var top=box.top/zoom+(window.pageYOffset||docElem&&docElem.scrollTop/zoom||body.scrollTop/zoom)-clientTop,left=box.left/zoom+(window.pageXOffset||docElem&&docElem.scrollLeft/zoom||body.scrollLeft/zoom)-clientLeft;return{top:top,left:left}}}else{var getOffset=function(el){var top=0,left=0;do{top+=el.offsetTop||0;left+=el.offsetLeft||0;el=el.offsetParent}while(el);return{left:left,top:top}}}function getBox(el){var left,right,top,bottom;var offset=getOffset(el);left=offset.left;top=offset.top;right=left+el.offsetWidth;bottom=top+el.offsetHeight;return{left:left,right:right,top:top,bottom:bottom}}function addStyles(el,styles){for(var name in styles){if(styles.hasOwnProperty(name)){el.style[name]=styles[name]}}}function copyLayout(from,to){var box=getBox(from);addStyles(to,{position:"absolute",left:box.left+"px",top:box.top+"px",width:from.offsetWidth+"px",height:from.offsetHeight+"px"})}var toElement=(function(){var div=document.createElement("div");return function(html){div.innerHTML=html;var el=div.firstChild;return div.removeChild(el)}})();var getUID=(function(){var id=0;return function(){return"ValumsAjaxUpload"+id++}})();function fileFromPath(file){return file.replace(/.*(\/|\\)/,"")}function getExt(file){return(-1!==file.indexOf("."))?file.replace(/.*[.]/,""):""}function hasClass(el,name){var re=new RegExp("\\b"+name+"\\b");return re.test(el.className)}function addClass(el,name){if(!hasClass(el,name)){el.className+=" "+name}}function removeClass(el,name){var re=new RegExp("\\b"+name+"\\b");el.className=el.className.replace(re,"")}function removeNode(el){el.parentNode.removeChild(el)}window.AjaxUpload=function(button,options){this._settings={action:"upload.php",name:"userfile",data:{},autoSubmit:true,responseType:false,hoverClass:"hover",focusClass:"focus",disabledClass:"disabled",onChange:function(file,extension){},onSubmit:function(file,extension){},onComplete:function(file,response){}};for(var i in options){if(options.hasOwnProperty(i)){this._settings[i]=options[i]}}if(button.jquery){button=button[0]}else{if(typeof button=="string"){if(/^#.*/.test(button)){button=button.slice(1)}button=document.getElementById(button)}}if(!button||button.nodeType!==1){throw new Error("Please make sure that you're passing a valid element")}if(button.nodeName.toUpperCase()=="A"){addEvent(button,"click",function(e){if(e&&e.preventDefault){e.preventDefault()}else{if(window.event){window.event.returnValue=false}}})}this._button=button;this._input=null;this._disabled=false;this.enable();this._rerouteClicks()};AjaxUpload.prototype={setData:function(data){this._settings.data=data},disable:function(){addClass(this._button,this._settings.disabledClass);this._disabled=true;var nodeName=this._button.nodeName.toUpperCase();if(nodeName=="INPUT"||nodeName=="BUTTON"){this._button.setAttribute("disabled","disabled")}if(this._input){this._input.parentNode.style.visibility="hidden"}},enable:function(){removeClass(this._button,this._settings.disabledClass);this._button.removeAttribute("disabled");this._disabled=false},_createInput:function(){var self=this;var input=document.createElement("input");input.setAttribute("type","file");input.setAttribute("name",this._settings.name);addStyles(input,{position:"absolute",right:0,margin:0,padding:0,fontSize:"480px",fontFamily:"sans-serif",cursor:"pointer"});var div=document.createElement("div");addStyles(div,{display:"block",position:"absolute",overflow:"hidden",margin:0,padding:0,opacity:0,direction:"ltr",zIndex:2147483583});if(div.style.opacity!=="0"){if(typeof(div.filters)=="undefined"){throw new Error("Opacity not supported by the browser")}div.style.filter="alpha(opacity=0)"}addEvent(input,"change",function(){if(!input||input.value===""){return}var file=fileFromPath(input.value);if(false===self._settings.onChange.call(self,file,getExt(file))){self._clearInput();return}if(self._settings.autoSubmit){self.submit()}});addEvent(input,"mouseover",function(){addClass(self._button,self._settings.hoverClass)});addEvent(input,"mouseout",function(){removeClass(self._button,self._settings.hoverClass);removeClass(self._button,self._settings.focusClass);input.parentNode.style.visibility="hidden"});addEvent(input,"focus",function(){addClass(self._button,self._settings.focusClass)});addEvent(input,"blur",function(){removeClass(self._button,self._settings.focusClass)});div.appendChild(input);document.body.appendChild(div);this._input=input},_clearInput:function(){if(!this._input){return}removeNode(this._input.parentNode);this._input=null;this._createInput();removeClass(this._button,this._settings.hoverClass);removeClass(this._button,this._settings.focusClass)},_rerouteClicks:function(){var self=this;addEvent(self._button,"mouseover",function(){if(self._disabled){return}if(!self._input){self._createInput()}var div=self._input.parentNode;copyLayout(self._button,div);div.style.visibility="visible"})},_createIframe:function(){var id=getUID();var iframe=toElement('<iframe src="javascript:false;" name="'+id+'" />');iframe.setAttribute("id",id);iframe.style.display="none";document.body.appendChild(iframe);return iframe},_createForm:function(iframe){var settings=this._settings;var form=toElement('<form method="post" enctype="multipart/form-data"></form>');form.setAttribute("action",settings.action);form.setAttribute("target",iframe.name);form.style.display="none";document.body.appendChild(form);for(var prop in settings.data){if(settings.data.hasOwnProperty(prop)){var el=document.createElement("input");el.setAttribute("type","hidden");el.setAttribute("name",prop);el.setAttribute("value",settings.data[prop]);form.appendChild(el)}}return form},_getResponse:function(iframe,file){var toDeleteFlag=false,self=this,settings=this._settings;addEvent(iframe,"load",function(){if(iframe.src=="javascript:'%3Chtml%3E%3C/html%3E';"||iframe.src=="javascript:'<html></html>';"){if(toDeleteFlag){setTimeout(function(){removeNode(iframe)},0)}return}var doc=iframe.contentDocument?iframe.contentDocument:window.frames[iframe.id].document;if(doc.readyState&&doc.readyState!="complete"){return}if(doc.body&&doc.body.innerHTML=="false"){return}var response;if(doc.XMLDocument){response=doc.XMLDocument}else{if(doc.body){response=doc.body.innerHTML;if(settings.responseType&&settings.responseType.toLowerCase()=="json"){if(doc.body.firstChild&&doc.body.firstChild.nodeName.toUpperCase()=="PRE"){doc.normalize();response=doc.body.firstChild.firstChild.nodeValue}if(response){response=eval("("+response+")")}else{response={}}}}else{response=doc}}settings.onComplete.call(self,file,response);toDeleteFlag=true;iframe.src="javascript:'<html></html>';"})},submit:function(){var self=this,settings=this._settings;if(!this._input||this._input.value===""){return}var file=fileFromPath(this._input.value);if(false===settings.onSubmit.call(this,file,getExt(file))){this._clearInput();return}var iframe=this._createIframe();var form=this._createForm(iframe);removeNode(this._input.parentNode);removeClass(self._button,self._settings.hoverClass);removeClass(self._button,self._settings.focusClass);form.appendChild(this._input);form.submit();removeNode(form);form=null;removeNode(this._input);this._input=null;this._getResponse(iframe,file);this._createInput()}}})();(function(b){var a=function(){var c={},p={years:"datepickerViewYears",months:"datepickerViewMonths",days:"datepickerViewDays"},l={wrapper:'<div class="datepicker"><div class="datepickerBorderT" /><div class="datepickerBorderB" /><div class="datepickerBorderL" /><div class="datepickerBorderR" /><div class="datepickerBorderTL" /><div class="datepickerBorderTR" /><div class="datepickerBorderBL" /><div class="datepickerBorderBR" /><div class="datepickerContainer"><table cellspacing="0" cellpadding="0"><tbody><tr></tr></tbody></table></div></div>',head:["<td>",'<table cellspacing="0" cellpadding="0">',"<thead>","<tr>",'<th class="datepickerGoPrev"><a href="#"><span><%=prev%></span></a></th>','<th colspan="6" class="datepickerMonth"><a href="#"><span></span></a></th>','<th class="datepickerGoNext"><a href="#"><span><%=next%></span></a></th>',"</tr>",'<tr class="datepickerDoW">',"<th><span><%=week%></span></th>","<th><span><%=day1%></span></th>","<th><span><%=day2%></span></th>","<th><span><%=day3%></span></th>","<th><span><%=day4%></span></th>","<th><span><%=day5%></span></th>","<th><span><%=day6%></span></th>","<th><span><%=day7%></span></th>","</tr>","</thead>","</table></td>"],space:'<td class="datepickerSpace"><div></div></td>',days:['<tbody class="datepickerDays">',"<tr>",'<th class="datepickerWeek"><a href="#"><span><%=weeks[0].week%></span></a></th>','<td class="<%=weeks[0].days[0].classname%>"><a href="#"><span><%=weeks[0].days[0].text%></span></a></td>','<td class="<%=weeks[0].days[1].classname%>"><a href="#"><span><%=weeks[0].days[1].text%></span></a></td>','<td class="<%=weeks[0].days[2].classname%>"><a href="#"><span><%=weeks[0].days[2].text%></span></a></td>','<td class="<%=weeks[0].days[3].classname%>"><a href="#"><span><%=weeks[0].days[3].text%></span></a></td>','<td class="<%=weeks[0].days[4].classname%>"><a href="#"><span><%=weeks[0].days[4].text%></span></a></td>','<td class="<%=weeks[0].days[5].classname%>"><a href="#"><span><%=weeks[0].days[5].text%></span></a></td>','<td class="<%=weeks[0].days[6].classname%>"><a href="#"><span><%=weeks[0].days[6].text%></span></a></td>',"</tr>","<tr>",'<th class="datepickerWeek"><a href="#"><span><%=weeks[1].week%></span></a></th>','<td class="<%=weeks[1].days[0].classname%>"><a href="#"><span><%=weeks[1].days[0].text%></span></a></td>','<td class="<%=weeks[1].days[1].classname%>"><a href="#"><span><%=weeks[1].days[1].text%></span></a></td>','<td class="<%=weeks[1].days[2].classname%>"><a href="#"><span><%=weeks[1].days[2].text%></span></a></td>','<td class="<%=weeks[1].days[3].classname%>"><a href="#"><span><%=weeks[1].days[3].text%></span></a></td>','<td class="<%=weeks[1].days[4].classname%>"><a href="#"><span><%=weeks[1].days[4].text%></span></a></td>','<td class="<%=weeks[1].days[5].classname%>"><a href="#"><span><%=weeks[1].days[5].text%></span></a></td>','<td class="<%=weeks[1].days[6].classname%>"><a href="#"><span><%=weeks[1].days[6].text%></span></a></td>',"</tr>","<tr>",'<th class="datepickerWeek"><a href="#"><span><%=weeks[2].week%></span></a></th>','<td class="<%=weeks[2].days[0].classname%>"><a href="#"><span><%=weeks[2].days[0].text%></span></a></td>','<td class="<%=weeks[2].days[1].classname%>"><a href="#"><span><%=weeks[2].days[1].text%></span></a></td>','<td class="<%=weeks[2].days[2].classname%>"><a href="#"><span><%=weeks[2].days[2].text%></span></a></td>','<td class="<%=weeks[2].days[3].classname%>"><a href="#"><span><%=weeks[2].days[3].text%></span></a></td>','<td class="<%=weeks[2].days[4].classname%>"><a href="#"><span><%=weeks[2].days[4].text%></span></a></td>','<td class="<%=weeks[2].days[5].classname%>"><a href="#"><span><%=weeks[2].days[5].text%></span></a></td>','<td class="<%=weeks[2].days[6].classname%>"><a href="#"><span><%=weeks[2].days[6].text%></span></a></td>',"</tr>","<tr>",'<th class="datepickerWeek"><a href="#"><span><%=weeks[3].week%></span></a></th>','<td class="<%=weeks[3].days[0].classname%>"><a href="#"><span><%=weeks[3].days[0].text%></span></a></td>','<td class="<%=weeks[3].days[1].classname%>"><a href="#"><span><%=weeks[3].days[1].text%></span></a></td>','<td class="<%=weeks[3].days[2].classname%>"><a href="#"><span><%=weeks[3].days[2].text%></span></a></td>','<td class="<%=weeks[3].days[3].classname%>"><a href="#"><span><%=weeks[3].days[3].text%></span></a></td>','<td class="<%=weeks[3].days[4].classname%>"><a href="#"><span><%=weeks[3].days[4].text%></span></a></td>','<td class="<%=weeks[3].days[5].classname%>"><a href="#"><span><%=weeks[3].days[5].text%></span></a></td>','<td class="<%=weeks[3].days[6].classname%>"><a href="#"><span><%=weeks[3].days[6].text%></span></a></td>',"</tr>","<tr>",'<th class="datepickerWeek"><a href="#"><span><%=weeks[4].week%></span></a></th>','<td class="<%=weeks[4].days[0].classname%>"><a href="#"><span><%=weeks[4].days[0].text%></span></a></td>','<td class="<%=weeks[4].days[1].classname%>"><a href="#"><span><%=weeks[4].days[1].text%></span></a></td>','<td class="<%=weeks[4].days[2].classname%>"><a href="#"><span><%=weeks[4].days[2].text%></span></a></td>','<td class="<%=weeks[4].days[3].classname%>"><a href="#"><span><%=weeks[4].days[3].text%></span></a></td>','<td class="<%=weeks[4].days[4].classname%>"><a href="#"><span><%=weeks[4].days[4].text%></span></a></td>','<td class="<%=weeks[4].days[5].classname%>"><a href="#"><span><%=weeks[4].days[5].text%></span></a></td>','<td class="<%=weeks[4].days[6].classname%>"><a href="#"><span><%=weeks[4].days[6].text%></span></a></td>',"</tr>","<tr>",'<th class="datepickerWeek"><a href="#"><span><%=weeks[5].week%></span></a></th>','<td class="<%=weeks[5].days[0].classname%>"><a href="#"><span><%=weeks[5].days[0].text%></span></a></td>','<td class="<%=weeks[5].days[1].classname%>"><a href="#"><span><%=weeks[5].days[1].text%></span></a></td>','<td class="<%=weeks[5].days[2].classname%>"><a href="#"><span><%=weeks[5].days[2].text%></span></a></td>','<td class="<%=weeks[5].days[3].classname%>"><a href="#"><span><%=weeks[5].days[3].text%></span></a></td>','<td class="<%=weeks[5].days[4].classname%>"><a href="#"><span><%=weeks[5].days[4].text%></span></a></td>','<td class="<%=weeks[5].days[5].classname%>"><a href="#"><span><%=weeks[5].days[5].text%></span></a></td>','<td class="<%=weeks[5].days[6].classname%>"><a href="#"><span><%=weeks[5].days[6].text%></span></a></td>',"</tr>","</tbody>"],months:['<tbody class="<%=className%>">',"<tr>",'<td colspan="2"><a href="#"><span><%=data[0]%></span></a></td>','<td colspan="2"><a href="#"><span><%=data[1]%></span></a></td>','<td colspan="2"><a href="#"><span><%=data[2]%></span></a></td>','<td colspan="2"><a href="#"><span><%=data[3]%></span></a></td>',"</tr>","<tr>",'<td colspan="2"><a href="#"><span><%=data[4]%></span></a></td>','<td colspan="2"><a href="#"><span><%=data[5]%></span></a></td>','<td colspan="2"><a href="#"><span><%=data[6]%></span></a></td>','<td colspan="2"><a href="#"><span><%=data[7]%></span></a></td>',"</tr>","<tr>",'<td colspan="2"><a href="#"><span><%=data[8]%></span></a></td>','<td colspan="2"><a href="#"><span><%=data[9]%></span></a></td>','<td colspan="2"><a href="#"><span><%=data[10]%></span></a></td>','<td colspan="2"><a href="#"><span><%=data[11]%></span></a></td>',"</tr>","</tbody>"]},h={flat:false,starts:1,prev:"&#9664;",next:"&#9654;",lastSel:false,mode:"single",view:"days",calendars:1,format:"Y-m-d",position:"bottom",eventName:"click",onRender:function(){return{}},onChange:function(){return true},onShow:function(){return true},onBeforeShow:function(){return true},onHide:function(){return true},locale:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekMin:"wk"}},r=function(u){var x=b(u).data("datepicker");var C=b(u);var v=Math.floor(x.calendars/2),K,M,D,L,I=0,G,z,w,A,B,E;C.find("td>table tbody").remove();for(var J=0;J<x.calendars;J++){K=new Date(x.current);K.addMonths(-v+J);E=C.find("table").eq(J+1);switch(E[0].className){case"datepickerViewDays":D=s(K,"B, Y");break;case"datepickerViewMonths":D=K.getFullYear();break;case"datepickerViewYears":D=(K.getFullYear()-6)+" - "+(K.getFullYear()+5);break}E.find("thead tr:first th:eq(1) span").text(D);D=K.getFullYear()-6;M={data:[],className:"datepickerYears"};for(var H=0;H<12;H++){M.data.push(D+H)}B=tmpl(l.months.join(""),M);K.setDate(1);M={weeks:[],test:10};L=K.getMonth();var D=(K.getDay()-x.starts)%7;K.addDays(-(D+(D<0?7:0)));G=-1;I=0;while(I<42){w=parseInt(I/7,10);A=I%7;if(!M.weeks[w]){G=K.getWeekNumber();M.weeks[w]={week:G,days:[]}}M.weeks[w].days[A]={text:K.getDate(),classname:[]};if(L!=K.getMonth()){M.weeks[w].days[A].classname.push("datepickerNotInMonth")}if(K.getDay()==0){M.weeks[w].days[A].classname.push("datepickerSunday")}if(K.getDay()==6){M.weeks[w].days[A].classname.push("datepickerSaturday")}var F=x.onRender(K);var N=K.valueOf();if(F.selected||x.date==N||b.inArray(N,x.date)>-1||(x.mode=="range"&&N>=x.date[0]&&N<=x.date[1])){M.weeks[w].days[A].classname.push("datepickerSelected")}if(F.disabled){M.weeks[w].days[A].classname.push("datepickerDisabled")}if(F.className){M.weeks[w].days[A].classname.push(F.className)}M.weeks[w].days[A].classname=M.weeks[w].days[A].classname.join(" ");I++;K.addDays(1)}B=tmpl(l.days.join(""),M)+B;M={data:x.locale.monthsShort,className:"datepickerMonths"};B=tmpl(l.months.join(""),M)+B;E.append(B)}},f=function(v,F){if(v.constructor==Date){return new Date(v)}var A=v.split(/\W+/);var w=F.split(/\W+/),D,x,E,C,z,u=new Date();for(var B=0;B<A.length;B++){switch(w[B]){case"d":case"e":D=parseInt(A[B],10);break;case"m":x=parseInt(A[B],10)-1;break;case"Y":case"y":E=parseInt(A[B],10);E+=E>100?0:(E<29?2000:1900);break;case"H":case"I":case"k":case"l":C=parseInt(A[B],10);break;case"P":case"p":if(/pm/i.test(A[B])&&C<12){C+=12}else{if(/am/i.test(A[B])&&C>=12){C-=12}}break;case"M":z=parseInt(A[B],10);break}}return new Date(E===undefined?u.getFullYear():E,x===undefined?u.getMonth():x,D===undefined?u.getDate():D,C===undefined?u.getHours():C,z===undefined?u.getMinutes():z,0)},s=function(v,H){var x=v.getMonth();var F=v.getDate();var G=v.getFullYear();var I=v.getWeekNumber();var J=v.getDay();var M={};var K=v.getHours();var z=(K>=12);var D=(z)?(K-12):K;var L=v.getDayOfYear();if(D==0){D=12}var B=v.getMinutes();var E=v.getSeconds();var A=H.split(""),u;for(var C=0;C<A.length;C++){u=A[C];switch(A[C]){case"a":u=v.getDayName();break;case"A":u=v.getDayName(true);break;case"b":u=v.getMonthName();break;case"B":u=v.getMonthName(true);break;case"C":u=1+Math.floor(G/100);break;case"d":u=(F<10)?("0"+F):F;break;case"e":u=F;break;case"H":u=(K<10)?("0"+K):K;break;case"I":u=(D<10)?("0"+D):D;break;case"j":u=(L<100)?((L<10)?("00"+L):("0"+L)):L;break;case"k":u=K;break;case"l":u=D;break;case"m":u=(x<9)?("0"+(1+x)):(1+x);break;case"M":u=(B<10)?("0"+B):B;break;case"p":case"P":u=z?"PM":"AM";break;case"s":u=Math.floor(v.getTime()/1000);break;case"S":u=(E<10)?("0"+E):E;break;case"u":u=J+1;break;case"w":u=J;break;case"y":u=(""+G).substr(2,2);break;case"Y":u=G;break}A[C]=u}return A.join("")},g=function(u){if(Date.prototype.tempDate){return}Date.prototype.tempDate=null;Date.prototype.months=u.months;Date.prototype.monthsShort=u.monthsShort;Date.prototype.days=u.days;Date.prototype.daysShort=u.daysShort;Date.prototype.getMonthName=function(v){return this[v?"months":"monthsShort"][this.getMonth()]};Date.prototype.getDayName=function(v){return this[v?"days":"daysShort"][this.getDay()]};Date.prototype.addDays=function(v){this.setDate(this.getDate()+v);this.tempDate=this.getDate()};Date.prototype.addMonths=function(v){if(this.tempDate==null){this.tempDate=this.getDate()}this.setDate(1);this.setMonth(this.getMonth()+v);this.setDate(Math.min(this.tempDate,this.getMaxDays()))};Date.prototype.addYears=function(v){if(this.tempDate==null){this.tempDate=this.getDate()}this.setDate(1);this.setFullYear(this.getFullYear()+v);this.setDate(Math.min(this.tempDate,this.getMaxDays()))};Date.prototype.getMaxDays=function(){var w=new Date(Date.parse(this)),x=28,v;v=w.getMonth();x=28;while(w.getMonth()==v){x++;w.setDate(x)}return x-1};Date.prototype.getFirstDay=function(){var v=new Date(Date.parse(this));v.setDate(1);return v.getDay()};Date.prototype.getWeekNumber=function(){var v=new Date(this);v.setDate(v.getDate()-(v.getDay()+6)%7+3);var w=v.valueOf();v.setMonth(0);v.setDate(4);return Math.round((w-v.valueOf())/(604800000))+1};Date.prototype.getDayOfYear=function(){var v=new Date(this.getFullYear(),this.getMonth(),this.getDate(),0,0,0);var x=new Date(this.getFullYear(),0,0,0,0,0);var w=v-x;return Math.floor(w/24*60*60*1000)}},j=function(z){var v=b(z).data("datepicker");var B=b("#"+v.id);if(!v.extraHeight){var x=b(z).find("div");v.extraHeight=x.get(0).offsetHeight+x.get(1).offsetHeight;v.extraWidth=x.get(2).offsetWidth+x.get(3).offsetWidth}var A=B.find("table:first").get(0);var w=A.offsetWidth;var u=A.offsetHeight;B.css({width:w+v.extraWidth+"px",height:u+v.extraHeight+"px"}).find("div.datepickerContainer").css({width:w+"px",height:u+"px"})},q=function(C){if(b(C.target).is("span")){C.target=C.target.parentNode}var w=b(C.target);if(w.is("a")){if(w.closest("tbody").hasClass(".datepickerDays")){b("input").DatePickerHide().DatePickerClear()}C.target.blur();if(w.hasClass("datepickerDisabled")){return false}var E=b(this).data("datepicker");var B=w.parent();var v=B.parent().parent().parent();var D=b("table",this).index(v.get(0))-1;var A=new Date(E.current);var z=false;var u=false;if(B.is("th")){if(B.hasClass("datepickerWeek")&&E.mode=="range"&&!B.next().hasClass("datepickerDisabled")){var x=parseInt(B.next().text(),10);A.addMonths(D-Math.floor(E.calendars/2));if(B.next().hasClass("datepickerNotInMonth")){A.addMonths(x>15?-1:1)}A.setDate(x);E.date[0]=(A.setHours(0,0,0,0)).valueOf();A.setHours(23,59,59,0);A.addDays(6);E.date[1]=A.valueOf();u=true;z=true;E.lastSel=false}else{if(B.hasClass("datepickerMonth")){A.addMonths(D-Math.floor(E.calendars/2));switch(v.get(0).className){case"datepickerViewDays":v.get(0).className="datepickerViewMonths";w.find("span").text(A.getFullYear());break;case"datepickerViewMonths":v.get(0).className="datepickerViewYears";w.find("span").text((A.getFullYear()-6)+" - "+(A.getFullYear()+5));break;case"datepickerViewYears":v.get(0).className="datepickerViewDays";w.find("span").text(s(A,"B, Y"));break}}else{if(B.parent().parent().is("thead")){switch(v.get(0).className){case"datepickerViewDays":E.current.addMonths(B.hasClass("datepickerGoPrev")?-1:1);break;case"datepickerViewMonths":E.current.addYears(B.hasClass("datepickerGoPrev")?-1:1);break;case"datepickerViewYears":E.current.addYears(B.hasClass("datepickerGoPrev")?-12:12);break}u=true}}}}else{if(B.is("td")&&!B.hasClass("datepickerDisabled")){switch(v.get(0).className){case"datepickerViewMonths":E.current.setMonth(v.find("tbody.datepickerMonths td").index(B));E.current.setFullYear(parseInt(v.find("thead th.datepickerMonth span").text(),10));E.current.addMonths(Math.floor(E.calendars/2)-D);v.get(0).className="datepickerViewDays";break;case"datepickerViewYears":E.current.setFullYear(parseInt(w.text(),10));v.get(0).className="datepickerViewMonths";break;default:var x=parseInt(w.text(),10);A.addMonths(D-Math.floor(E.calendars/2));if(B.hasClass("datepickerNotInMonth")){A.addMonths(x>15?-1:1)}A.setDate(x);switch(E.mode){case"multiple":x=(A.setHours(0,0,0,0)).valueOf();if(b.inArray(x,E.date)>-1){b.each(E.date,function(F,G){if(G==x){E.date.splice(F,1);return false}})}else{E.date.push(x)}break;case"range":if(!E.lastSel){E.date[0]=(A.setHours(0,0,0,0)).valueOf()}x=(A.setHours(23,59,59,0)).valueOf();if(x<E.date[0]){E.date[1]=E.date[0]+86399000;E.date[0]=x-86399000}else{E.date[1]=x}E.lastSel=!E.lastSel;break;default:E.date=A.valueOf();break}break}u=true;z=true}}if(u){r(this)}if(z){E.onChange.apply(this,k(E))}}return false},k=function(u){var v;if(u.mode=="single"){v=new Date(u.date);return[s(v,u.format),v,u.el]}else{v=[[],[],u.el];b.each(u.date,function(x,z){var w=new Date(z);v[0].push(s(w,u.format));v[1].push(w)});return v}},e=function(){var u=document.compatMode=="CSS1Compat";return{l:window.pageXOffset||(u?document.documentElement.scrollLeft:document.body.scrollLeft),t:window.pageYOffset||(u?document.documentElement.scrollTop:document.body.scrollTop),w:window.innerWidth||(u?document.documentElement.clientWidth:document.body.clientWidth),h:window.innerHeight||(u?document.documentElement.clientHeight:document.body.clientHeight)}},n=function(w,v,u){if(w==v){return true}if(w.contains){return w.contains(v)}if(w.compareDocumentPosition){return !!(w.compareDocumentPosition(v)&16)}var x=v.parentNode;while(x&&x!=u){if(x==w){return true}x=x.parentNode}return false},o=function(A){var u=b("#"+b(this).data("datepickerId"));if(!u.is(":visible")){var B=u.get(0);r(B);var D=u.data("datepicker");D.onBeforeShow.apply(this,[u.get(0)]);var x=b(this).offset();var C=e();var z=x.top;var v=x.left;var w=b.curCSS(B,"display");u.css({visibility:"hidden",display:"block"});j(B);switch(D.position){case"top":z-=B.offsetHeight;break;case"left":v-=B.offsetWidth;break;case"right":v+=this.offsetWidth;break;case"bottom":z+=this.offsetHeight;break}if(z+B.offsetHeight>C.t+C.h){z=x.top-B.offsetHeight}if(z<C.t){z=x.top+this.offsetHeight+B.offsetHeight}if(v+B.offsetWidth>C.l+C.w){v=x.left-B.offsetWidth}if(v<C.l){v=x.left+this.offsetWidth}u.css({visibility:"visible",display:"block",top:z+"px",left:v+"px"});if(D.onShow.apply(this,[u.get(0)])!=false){u.show()}b(document).bind("mousedown",{cal:u,trigger:this},i)}return false},i=function(u){if(u.target!=u.data.trigger&&!n(u.data.cal.get(0),u.target,u.data.cal.get(0))){if(u.data.cal.data("datepicker").onHide.apply(this,[u.data.cal.get(0)])!=false){u.data.cal.hide()}b(document).unbind("mousedown",i)}};return{init:function(u){u=b.extend({},h,u||{});g(u.locale);u.calendars=Math.max(1,parseInt(u.calendars,10)||1);u.mode=/single|multiple|range/.test(u.mode)?u.mode:"single";return this.each(function(){if(!b(this).data("datepicker")){u.el=this;if(u.date.constructor==String){u.date=f(u.date,u.format);u.date.setHours(0,0,0,0)}if(u.mode!="single"){if(u.date.constructor!=Array){u.date=[u.date.valueOf()];if(u.mode=="range"){u.date.push(((new Date(u.date[0])).setHours(23,59,59,0)).valueOf())}}else{for(var x=0;x<u.date.length;x++){u.date[x]=(f(u.date[x],u.format).setHours(0,0,0,0)).valueOf()}if(u.mode=="range"){u.date[1]=((new Date(u.date[1])).setHours(23,59,59,0)).valueOf()}}}else{u.date=u.date.valueOf()}if(!u.current){u.current=new Date()}else{u.current=f(u.current,u.format)}u.current.setDate(1);u.current.setHours(0,0,0,0);var A="datepicker_"+parseInt(Math.random()*1000),w;u.id=A;b(this).data("datepickerId",u.id);var z=b(l.wrapper).attr("id",A).bind("click",q).data("datepicker",u);if(u.className){z.addClass(u.className)}var v="";for(var x=0;x<u.calendars;x++){w=u.starts;if(x>0){v+=l.space}v+=tmpl(l.head.join(""),{week:u.locale.weekMin,prev:u.prev,next:u.next,day1:u.locale.daysMin[(w++)%7],day2:u.locale.daysMin[(w++)%7],day3:u.locale.daysMin[(w++)%7],day4:u.locale.daysMin[(w++)%7],day5:u.locale.daysMin[(w++)%7],day6:u.locale.daysMin[(w++)%7],day7:u.locale.daysMin[(w++)%7]})}z.find("tr:first").append(v).find("table").addClass(p[u.view]);r(z.get(0));if(u.flat){z.appendTo(this).show().css("position","relative");j(z.get(0))}else{z.appendTo(document.body);b(this).bind(u.eventName,o)}}})},showPicker:function(){return this.each(function(){if(b(this).data("datepickerId")){o.apply(this)}})},hidePicker:function(){return this.each(function(){if(b(this).data("datepickerId")){b("#"+b(this).data("datepickerId")).hide()}})},setDate:function(u,v){return this.each(function(){if(b(this).data("datepickerId")){var z=b("#"+b(this).data("datepickerId"));var w=z.data("datepicker");w.date=u;if(w.date.constructor==String){w.date=f(w.date,w.format);w.date.setHours(0,0,0,0)}if(w.mode!="single"){if(w.date.constructor!=Array){w.date=[w.date.valueOf()];if(w.mode=="range"){w.date.push(((new Date(w.date[0])).setHours(23,59,59,0)).valueOf())}}else{for(var x=0;x<w.date.length;x++){w.date[x]=(f(w.date[x],w.format).setHours(0,0,0,0)).valueOf()}if(w.mode=="range"){w.date[1]=((new Date(w.date[1])).setHours(23,59,59,0)).valueOf()}}}else{w.date=w.date.valueOf()}if(v){w.current=new Date(w.mode!="single"?w.date[0]:w.date)}r(z.get(0))}})},getDate:function(u){if(this.size()>0){return k(b("#"+b(this).data("datepickerId")).data("datepicker"))[u?0:1]}},clear:function(){return this.each(function(){if(b(this).data("datepickerId")){var v=b("#"+b(this).data("datepickerId"));var u=v.data("datepicker");if(u.mode!="single"){u.date=[];r(v.get(0))}}})},fixLayout:function(){return this.each(function(){if(b(this).data("datepickerId")){var v=b("#"+b(this).data("datepickerId"));var u=v.data("datepicker");if(u.flat){j(v.get(0))}}})}}}();b.fn.extend({DatePicker:a.init,DatePickerHide:a.hidePicker,DatePickerShow:a.showPicker,DatePickerSetDate:a.setDate,DatePickerGetDate:a.getDate,DatePickerClear:a.clear,DatePickerLayout:a.fixLayout})})(jQuery);(function(){var b={};this.tmpl=function a(f,e){var c=!/\W/.test(f)?b[f]=b[f]||a(document.getElementById(f).innerHTML):new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+f.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');");return e?c(e):c}})();function Datepicker(a,c){var e=false;var b="years";if(c){b=c.view}$(a).DatePicker({date:new Date,format:"m/d/Y",calendars:1,starts:1,view:b,onChange:function(g,f){$(a).val(g);$(".datepickerDays a").bind("click",function(){e=true;$(a).DatePickerHide().DatePickerClear()});$(".datepickerMonth").bind("click",function(){e=false});if(e){$(a).DatePickerHide().DatePickerClear()}$(a).addClass("active")}})}(function(){function jc(a){if(!a||a.constructor!=Array){a=[a]}return a}function Qa(a){return a!==ma&&a!==null}function da(){var a=arguments,b,c;for(b=0;b<a.length;b++){c=a[b];if(Qa(c)){return c}}}function Gb(a,b,c){var d,e="",f=c?"print":"",g=function(i){return V("style",{type:"text/css",media:i?"print":""},null,va.getElementsByTagName("HEAD")[0])};kc||(kc=g());for(d in b){e+=Pb(d)+":"+b[d]+";"}if(Ra){b=va.styleSheets;c&&g(true);for(c=b.length-1;c>=0&&b[c].media!=f;){c--}f=b[c];f.addRule(a,e)}else{kc.appendChild(va.createTextNode(a+" {"+e+"}\n"))}}function H(a,b){a||(a={});for(var c in b){a[c]=b[c]}return a}function Vc(a){Ba=aa(Ba,a);Cc();return Ba}function Ca(a){Qb||(Qb=V(Va));a&&Qb.appendChild(a);Qb.innerHTML=""}function ab(a,b){var c=function(){};c.prototype=new a;H(c.prototype,b);return c}function Hb(a,b){if(typeof a=="string"){return a}else{if(a.linearGradient){var c=b.createLinearGradient.apply(b,a.linearGradient);p(a.stops,function(d){c.addColorStop(d[0],d[1])});return c}}}function V(a,b,c,d,e){a=va.createElement(a);b&&H(a,b);e&&ra(a,{padding:0,border:"none",margin:0});c&&ra(a,c);d&&d.appendChild(a);return a}function ra(a,b){if(Ra){if(b.opacity!==ma){b.filter="alpha(opacity="+b.opacity*100+")"}}H(a.style,b)}function Wc(a,b,c,d){var e=Ba.lang;a=a;var f=isNaN(b=Da(b))?2:b;b=c===ma?e.decimalPoint:c;d=d===ma?e.thousandsSep:d;e=a<0?"-":"";c=parseInt(a=Da(+a||0).toFixed(f))+"";var g=(g=c.length)>3?g%3:0;return e+(g?c.substr(0,g)+d:"")+c.substr(g).replace(/(\d{3})(?=\d)/g,"$1"+d)+(f?b+Da(a-c).toFixed(f).slice(2):"")}function lc(a,b,c){function d(y){return y.toString().replace(/^([0-9])$/,"0$1")}if(!Qa(b)){return"Invalid date"}b=new Date(b*Sa);var e=b[mc](),f=b[nc](),g=b[Ib](),i=b[Rb](),k=b[Sb](),j=Ba.lang,r=j.weekdays;j=j.months;b={a:r[f].substr(0,3),A:r[f],d:d(g),e:g,b:j[i].substr(0,3),B:j[i],m:d(i+1),y:k.toString().substr(2,2),Y:k,H:d(e),I:d(e%12||12),l:e%12||12,M:d(b[oc]()),p:e<12?"AM":"PM",P:e<12?"am":"pm",S:d(b.getSeconds())};for(var v in b){a=a.replace("%"+v,b[v])}return c?a.substr(0,1).toUpperCase()+a.substr(1):a}function Cc(){var a=Ba.global.useUTC;Tb=a?Date.UTC:function(b,c,d,e,f,g){return(new Date(b,c,da(d,1),da(e,0),da(f,0),da(g,0))).getTime()};oc=a?"getUTCMinutes":"getMinutes";mc=a?"getUTCHours":"getHours";nc=a?"getUTCDay":"getDay";Ib=a?"getUTCDate":"getDate";Rb=a?"getUTCMonth":"getMonth";Sb=a?"getUTCFullYear":"getFullYear";Dc=a?"setUTCMinutes":"setMinutes";Ec=a?"setUTCHours":"setHours";pc=a?"setUTCDate":"setDate";Fc=a?"setUTCMonth":"setMonth";Gc=a?"setUTCFullYear":"setFullYear"}function Hc(a){for(var b={x:a.offsetLeft,y:a.offsetTop};a.offsetParent;){a=a.offsetParent;b.x+=a.offsetLeft;b.y+=a.offsetTop;if(a!=va.body&&a!=va.documentElement){b.x-=a.scrollLeft;b.y-=a.scrollTop}}return b}function Xc(a){function b(l,h){var s;h=da(h,true);na(t,"addSeries",{options:l},function(){s=d(l);s.isDirty=true;t.isDirty=true;h&&t.redraw()});return s}function c(){var l=t.isDirty;p(ya,function(h){if(h.isDirty){h.cleanData();h.getSegments();if(h.options.legendType=="point"){l=true}}});Cb=null;if(Ub){p(Ka,function(h){h.setScale()});j();p(Ka,function(h){h.isDirty&&h.redraw()})}p(ya,function(h){h.isDirty&&h.visible&&h.redraw()});if(l){if(Jb&&Jb.renderHTML){Jb.renderHTML(true);Jb.drawGraphics(true)}t.isDirty=false}ub&&ub.resetTracker&&ub.resetTracker();na(t,"redraw")}function d(l){var h=l.type||A.defaultSeriesType,s=bb[h],q=t.hasRendered;if(q){if(Ea&&h=="column"){s=Ic}else{if(!Ea&&h=="bar"){s=Vb}}}h=new s;h.init(t,l);if(!q&&h.inverted){Ea=true}if(h.isCartesian){Ub=h.isCartesian}ya.push(h);return h}function e(){var l=a.loading;if(!vb){vb=V(Va,{className:"highcharts-loading"},H(l.style,{left:ga+F,top:I+F,width:sa+F,height:ka+F,zIndex:10,display:"none"}),oa);V("span",{innerHTML:a.lang.loading},l.labelStyle,vb)}ra(vb,{display:""});Db(vb,{opacity:l.style.opacity},{duration:l.showDuration})}function f(){Db(vb,{opacity:0},{duration:a.loading.hideDuration,complete:function(){ra(vb,{display:"none"})}})}function g(l){var h,s,q;for(h=0;h<Ka.length;h++){if(Ka[h].options.id==l){return Ka[h]}}for(h=0;h<ya.length;h++){if(ya[h].options.id==l){return ya[h]}}for(h=0;h<ya.length;h++){q=ya[h].data;for(s=0;s<q.length;s++){if(q[s].id==l){return q[s]}}}return null}function i(){var l=va.getElementById(qc);if(l){lb=Hc(l)}}function k(){var l=a.xAxis||{},h=a.yAxis||{},s;l=jc(l);p(l,function(q,M){q.index=M;q.isX=true});h=jc(h);p(h,function(q,M){q.index=M});Ka=l.concat(h);t.xAxis=[];t.yAxis=[];Ka=qb(Ka,function(q){s=new Fa(t,q);t[s.isXAxis?"xAxis":"yAxis"].push(s);return s});j()}function j(){A.alignTicks!==false&&p(Ka,function(l){l.adjustTickAmount()})}function r(){var l=[];p(ya,function(h){l=l.concat(Wb(h.data,function(s){return s.selected}))});return l}function v(){return Wb(ya,function(l){return l.selected})}function y(l){var h=Ba.lang;t.toolbar.add("zoom",h.resetZoom,h.resetZoomTitle,function(){na(t,"selection",{resetSelection:true},y);t.toolbar.remove("zoom")});!l||l.resetSelection?p(Ka,function(s){s.setExtremes(null,null,false)}):p(l.xAxis.concat(l.yAxis),function(s){var q=s.axis;if(t.tracker[q.isXAxis?"zoomX":"zoomY"]){q.setExtremes(s.min,s.max,false)}});c()}function R(){var l=a.title,h=a.subtitle;if(!t.titleLayer){var s=new pa("title-layer",oa,null,{zIndex:2});l&&l.text&&V("h2",{className:"highcharts-title",innerHTML:l.text},l.style,s.div);h&&h.text&&V("h3",{className:"highcharts-subtitle",innerHTML:h.text},h.style,s.div);t.titleLayer=s}}function E(){var l=true;for(var h in t.resources){t.resources[h]||(l=false)}l&&K()}function K(){k();p(ya,function(l){l.translate();l.setTooltipPoints();l.createArea()});t.render=Wa;setTimeout(function(){Wa();na(t,"load")},0)}function C(){Xa=A.renderTo;qc="highcharts-"+rc++;if(typeof Xa=="string"){Xa=va.getElementById(Xa)}Xa.innerHTML="";if(!Xa.offsetWidth){rb=Xa.cloneNode(0);ra(rb,{position:wa,top:"-9999px",display:""});va.body.appendChild(rb)}var l=(rb||Xa).offsetHeight;mb=A.width||(rb||Xa).offsetWidth||600;Ga=A.height||(l>I+cb?l:0)||400;oa=V(Va,{className:"highcharts-container"+(A.className?" "+A.className:""),id:qc},H({position:Xb,overflow:db,width:mb+F,height:Ga+F,textAlign:"left"},A.style),rb||Xa)}function Wa(){var l,h=a.labels,s=a.credits;l=2*(A.borderWidth||0)+(A.shadow?8:0);Jc.drawRect(l/2,l/2,mb-l,Ga-l,A.borderColor,A.borderWidth,A.borderRadius,A.backgroundColor,A.shadow);Jc.drawRect(ga,I,sa,ka,null,null,null,A.plotBackgroundColor,null,Yb);(new pa("plot-border",oa,null,{zIndex:4})).drawRect(ga,I,sa,ka,A.plotBorderColor,A.plotBorderWidth,null,null,A.plotShadow);Ra&&Gb(".highcharts-image-map",{display:"none"},"print");Ub&&p(Ka,function(q){q.render()});R();h.items&&p(h.items,function(){var q=H({className:"highcharts-label"},this.attributes);sc.drawHtml(this.html,q,H(h.style,this.style))});p(ya,function(q){q.render()});Jb=t.legend=new nb(t);if(!t.toolbar){t.toolbar=Kb(t)}if(s.enabled&&!t.credits){t.credits=V("a",{className:"highcharts-credits",href:s.href,innerHTML:s.text,target:s.target},H(s.style,{zIndex:8}),oa)}t.hasRendered=true;if(rb){Xa.appendChild(oa);Ca(rb);i()}}function La(){function l(h){var s=h.attributes,q,M;if(s){q=s.length;for(q=q-1;q>=0;q-=1){M=s[q].name;try{if(typeof h[M]=="function"){h[M]=null}}catch(ea){}}}if(s=h.childNodes){q=s.length;for(q=q-1;q>=0;q--){s=h.childNodes[q];l(s);s.childNodes.length||Ca(s)}}}p(ya,function(h){h.destroy()});ya=[];l(oa)}function Fa(l,h){function s(){h=aa(L?Zb:tc,Y?la?Yc:Kc:la?Zc:$c,h)}function q(){var m=[],n;Ma=Ta=null;$b=[];p(ya,function(u){n=false;p(["xAxis","yAxis"],function(J){if((J=="xAxis"&&L||J=="yAxis"&&!L)&&(u.options[J]==h.index||u.options[J]===ma&&h.index==0)){u[J]=Ya;$b.push(u);n=true}});if(!u.visible&&A.ignoreHiddenSeries){n=false}if(n){var x;if(!L){x=u.options.stacking;ac=x=="percent";if(x){var z=m[u.type]||[];m[u.type]=z}if(ac){Ma=0;Ta=99}}if(u.isCartesian){p(u.data,function(J){var G=J.x,ja=J.y;if(Ma===null){Ma=Ta=J[wb]}if(L){if(G>Ta){Ta=G}else{if(G<Ma){Ma=G}}}else{if(Qa(ja)){if(x){z[G]=z[G]?z[G]+ja:ja}J=z?z[G]:ja;if(!ac){if(J>Ta){Ta=J}else{if(J<Ma){Ma=J}}}if(x){eb[u.type][G]={total:J,cum:J}}}}});if(!L&&/(area|column|bar)/.test(u.type)){if(Ma>=0){Ma=0;Lc=true}else{if(Ta<0){Ta=0;Mc=true}}}}}})}function M(m,n,u){var x=1,z=0;if(u){x*=-1;z=sb}if(xb){x*=-1;z-=x*sb}if(n){if(xb){m=sb-m}m=m/yb+W}else{m=x*(m-W)*yb+z}return m}function ea(m,n,u){if(u){var x,z,J;x=M(m);var G;m=z=x+bc;x=J=Ga-x-bc;if(Y){x=I;J=Ga-cb;if(m<ga||m>ga+sa){G=true}}else{m=ga;z=mb-fb;if(x<I||x>I+ka){G=true}}G||Nc.drawLine(m,x,z,J,n,u)}}function xa(m,n,u){m=Lb(m,W);n=Math.min(n,ha);var x=(n-m)*yb;ea(m+(n-m)/2,u,x)}function D(m,n,u,x,z,J,G){var ja,ba,gb,N=h.labels;if(n=="inside"){z=-z}if(la){z=-z}n=ba=M(m+zb)+bc;ja=gb=Ga-M(m+zb)-bc;if(Y){ja=Ga-cb-(la?ka:0)+Ua;gb=ja+z}else{n=ga+(la?sa:0)+Ua;ba=n-z}x&&Eb.drawLine(n,ja,ba,gb,u,x);if(J&&N.enabled){if((m=cc.call({index:G,isFirst:m==fa[0],isLast:m==fa[fa.length-1],value:Ha&&Ha[m]?Ha[m]:m}))||m===0){Eb.addText(m,n+N.x-(zb&&Y?zb*yb*(xb?-1:1):0),ja+N.y-(zb&&!Y?zb*yb*(xb?1:-1):0),N.style,N.rotation,N.align)}}}function ia(m,n){var u;da(h.allowDecimals,true);Mb=n?1:ta.pow(10,Za(ta.log(m)/ta.LN10));u=m/Mb;n||(n=[1,2,2.5,5,10]);for(var x=0;x<n.length;x++){m=n[x];if(u<=(n[x]+(n[x+1]||n[x]))/2){break}}m*=Mb;return m}function U(){fa=[];for(var m=Ba.global.useUTC,n=1000/Sa,u=60000/Sa,x=3600000/Sa,z=86400000/Sa,J=604800000/Sa,G=2592000000/Sa,ja=31556952000/Sa,ba=[["second",n,[1,2,5,10,15,30]],["minute",u,[1,2,5,10,15,30]],["hour",x,[1,2,3,4,6,8,12]],["day",z,[1,2]],["week",J,[1,2]],["month",G,[1,2,3,4,6]],["year",ja,null]],gb=ba[6],N=gb[1],Z=gb[2],$a=0;$a<ba.length;$a++){gb=ba[$a];N=gb[1];Z=gb[2];if(ba[$a+1]){var ad=(N*Z[Z.length-1]+ba[$a+1][1])/2;if(Ia<=ad){break}}}if(N==ja&&Ia<5*N){Z=[1,2,5]}ba=ia(Ia/N,Z);var tb;Z=new Date(W*Sa);Z.setMilliseconds(0);if(N>=n){Z.setSeconds(N>=u?0:ba*Za(Z.getSeconds()/ba))}if(N>=u){Z[Dc](N>=x?0:ba*Za(Z[oc]()/ba))}if(N>=x){Z[Ec](N>=z?0:ba*Za(Z[mc]()/ba))}if(N>=z){Z[pc](N>=G?1:ba*Za(Z[Ib]()/ba))}if(N>=G){Z[Fc](N>=ja?0:ba*Za(Z[Rb]()/ba));tb=Z[Sb]()}if(N>=ja){tb-=tb%ba;Z[Gc](tb)}N==J&&Z[pc](Z[Ib]()-Z[nc]()+h.startOfWeek);$a=1;n=Z.getTime()/Sa;tb=Z[Sb]();u=Z[Rb]();for(x=Z[Ib]();n<ha&&$a<sa;){fa.push(n);if(N==ja){n=Tb(tb+$a*ba,0)/Sa}else{if(N==G){n=Tb(tb,u+$a*ba)/Sa}else{if(!m&&(N==z||N==J)){n=Tb(tb,u,x+$a*ba*(N==z?1:7))}else{n+=N*ba}}}$a++}fa.push(n);h.labels.formatter||(cc=function(){return lc(h.dateTimeLabelFormats[gb[0]],this.value,1)})}function X(){var m=function(x){var z=(Mb<1?O(1/Mb):1)*10;return O(x*z)/z},n;n=Za(W/Ia)*Ia;var u=ta.ceil(ha/Ia)*Ia;fa=[];for(n=m(n);n<=u;){fa.push(n);n=m(n+Ia)}if(Ha){W-=0.5;ha+=0.5}cc||(cc=function(){return this.value})}function ca(){hb?U():X();var m=fa[0],n=fa[fa.length-1];if(h.startOnTick){W=m}else{W>m&&fa.shift()}if(h.endOnTick){ha=n}else{ha<n&&fa.pop()}}function za(){if(!hb&&!Ha){var m=Fb,n=fa.length;Fb=Cb[wb];if(n<Fb){for(;fa.length<Fb;){fa.push(fa[fa.length-1]+Ia)}yb*=(n-1)/(Fb-1)}if(Qa(m)&&Fb!=m){Ya.isDirty=true}}}function P(){var m,n,u,x=W,z=ha;m=h.maxZoom;var J;q();W=da(Oc,h.min,Ma);ha=da(Pc,h.max,Ta);if(ha-W<m){J=(m-ha+W)/2;W=Lb(W-J,da(h.min,W-J));ha=ta.min(W+m,da(h.max,W+m))}if(!Ha&&!ac){m=ha-W||1;if(!Qa(h.min)&&Qc&&(Ma<0||!Lc)){W-=m*Qc}if(!Qa(h.max)&&Rc&&(Ta>0||!Mc)){ha+=m*Rc}}Ia=Ha||W==ha?1:h.tickInterval=="auto"?(ha-W)*h.tickPixelInterval/sb:h.tickInterval;if(!hb&&h.tickInterval=="auto"){Ia=ia(Ia)}uc=h.minorTickInterval=="auto"&&Ia?Ia/5:h.minorTickInterval;ca();yb=sb/(ha-W||1);Cb||(Cb={x:0,y:0});if(!hb&&fa.length>Cb[wb]){Cb[wb]=fa.length}if(!L){for(n in eb){for(u in eb[n]){eb[n][u].cum=eb[n][u].total}}}Ya.isDirty=W!=x||ha!=z}function Aa(m,n,u){u=da(u,true);na(Ya,"setExtremes",{min:m,max:n},function(){if(Ha){if(m<0){m=0}if(n>Ha.length-1){n=Ha.length-1}}Oc=m;Pc=n;u&&l.redraw()})}function w(m,n){Ha=m;da(n,true)&&o()}function qa(){return{min:W,max:ha,dataMin:Ma,dataMax:Ta}}function S(m){var n=m.width,u=n?vc:wc;u.push(m);n?ea(m.value,m.color,m.width):xa(m.from,m.to,m.color)}function Na(m){p([wc,vc],function(n){for(var u=0;u<n.length;u++){if(n[u].id==m){n.splice(u,1);break}}});Q()}function o(){ub.resetTracker&&ub.resetTracker();Q();p($b,function(m){m.isDirty=true})}function Q(){var m=h.title,n=h.alternateGridColor,u=h.minorTickWidth,x=h.lineWidth,z,J;z=$b.length&&Qa(W)&&Qa(ha);Eb.clear();Nc.clear();if(z){n&&p(fa,function(G,ja){if(ja%2==0&&G<ha){xa(G,fa[ja+1]!==ma?fa[ja+1]:ha,n)}});p(wc,function(G){xa(G.from,G.to,G.color)});if(uc&&!Ha){for(z=W;z<=ha;z+=uc){ea(z,h.minorGridLineColor,h.minorGridLineWidth);u&&D(z,h.minorTickPosition,h.minorTickColor,u,h.minorTickLength)}}p(fa,function(G,ja){J=G+zb;ea(J,h.gridLineColor,h.gridLineWidth);D(G,h.tickPosition,h.tickColor,h.tickWidth,h.tickLength,!(G==W&&!h.showFirstLabel||G==ha&&!h.showLastLabel),ja)});p(vc,function(G){ea(G.value,G.color,G.width)})}if(x){u=ga+(la?sa:0)+Ua;z=Ga-cb-(la?ka:0)+Ua;Eb.drawLine(Y?ga:u,Y?z:I,Y?mb-fb:u,Y?z:Ga-cb,h.lineColor,x)}if(m&&m.enabled&&m.text){x=Y?ga:I;u=Y?sa:ka;x={low:x+(Y?0:u),middle:x+u/2,high:x+(Y?u:0)}[m.align];u=(Y?I+ka:ga)+(Y?1:-1)*(la?-1:1)*m.margin-(Ra?parseInt(m.style.fontSize||m.style.font.replace(/^[a-z ]+/,""))/3:0);Eb.addText(m.text,Y?x:u+(la?sa:0)+Ua,Y?u-(la?ka:0)+Ua:x,m.style,m.rotation||0,{low:"left",middle:"center",high:"right"}[m.align])}Eb.strokeText();Ya.isDirty=false}var L=h.isX,la=h.opposite,Y=Ea?!L:L,eb={bar:{},column:{},area:{},areaspline:{}};s();var Ya=this,hb=h.type=="datetime",Ua=h.offset||0,wb=L?"x":"y",sb=Y?sa:ka,yb,bc=Y?ga:cb,Eb=new pa("axis-layer",oa,null,{zIndex:7}),Nc=new pa("grid-layer",oa,null,{zIndex:1}),Ma,Ta,$b,Oc,Pc,ha=null,W=null,Qc=h.minPadding,Rc=h.maxPadding,Lc,Mc,ac,Sc=h.events,xc,wc=h.plotBands||[],vc=h.plotLines||[],Ia,uc,Mb,fa,Fb,cc=h.labels.formatter,Ha=h.categories||L&&l.columnCount,xb=h.reversed,zb=Ha&&h.tickmarkPlacement=="between"?0.5:0;if(Ea&&L&&xb===ma){xb=true}la||(Ua*=-1);if(Y){Ua*=-1}H(Ya,{addPlotBand:S,addPlotLine:S,adjustTickAmount:za,categories:Ha,getExtremes:qa,isXAxis:L,options:h,render:Q,setExtremes:Aa,setScale:P,setCategories:w,translate:M,redraw:o,removePlotBand:Na,removePlotLine:Na,reversed:xb,stacks:eb});for(xc in Sc){Oa(Ya,xc,Sc[xc])}P()}function Kb(){function l(M,ea,xa,D){if(!q[M]){ea=V(Va,{innerHTML:ea,title:xa,onclick:D},H(a.toolbar.itemStyle,{zIndex:1003}),s.div);q[M]=ea}}function h(M){Ca(q[M]);q[M]=null}var s,q={};s=new pa("toolbar",oa,null,{zIndex:1004,width:"auto",height:"auto"});return{add:l,remove:h}}function ob(l,h){function s(o){o=o||Pa.event;if(!o.target){o.target=o.srcElement}if(!o.pageX){o.pageX=o.clientX+(va.documentElement.scrollLeft||va.body.scrollLeft)}if(!o.pageY){o.pageY=o.clientY+(va.documentElement.scrollTop||va.body.scrollTop)}return o}function q(o){var Q={xAxis:[],yAxis:[]};p(Ka,function(L){var la=L.translate,Y=L.isXAxis,eb=Ea?!Y:Y;Q[Y?"xAxis":"yAxis"].push({axis:L,value:la(eb?o.pageX-lb.x-ga:ka-o.pageY+lb.y+I,true)})});return Q}function M(){ib.onmousedown=function(o){o=s(o);o.preventDefault&&o.preventDefault();l.mouseIsDown=Nb=true;X=o.pageX;ca=o.pageY;if(Ub&&(w||qa)){P||(P=V(Va,null,{position:wa,border:"none",background:"#4572A7",opacity:0.25,width:S?0:sa+F,height:Na?0:ka+F}));sc.div.appendChild(P)}};ib.onmousemove=function(o){o=s(o);o.returnValue=false;if(Nb){za=Math.sqrt(Math.pow(X-o.pageX,2)+Math.pow(ca-o.pageY,2))>10;if(S){var Q=o.pageX-X;ra(P,{width:Da(Q)+F,left:(Q>0?0:Q)+X-lb.x-ga+F})}if(Na){o=o.pageY-ca;ra(P,{height:Da(o)+F,top:(o>0?0:o)+ +ca-lb.y-I+F})}}else{ea(o)}return false};ib.onmouseup=function(){var o;if(P){var Q={xAxis:[],yAxis:[]},L=P.offsetLeft,la=P.offsetTop,Y=P.offsetWidth,eb=P.offsetHeight;if(za){p(Ka,function(Ya){var hb=Ya.translate,Ua=Ya.isXAxis,wb=Ea?!Ua:Ua,sb=hb(wb?L:ka-la-eb,true);hb=hb(wb?L+Y:ka-la,true);Q[Ua?"xAxis":"yAxis"].push({axis:Ya,min:ta.min(sb,hb),max:Lb(sb,hb)})});na(l,"selection",Q,y);o=true}Ca(P);P=null}l.mouseIsDown=Nb=za=false};ib.onmouseout=function(o){o=o||Pa.event;if((o=o.relatedTarget||o.toElement)&&o!=dc&&o.tagName!="AREA"){D();l.mouseIsDown=Nb=za=false}};ib.onclick=function(o){o=s(o);o.cancelBubble=true;if(!za){if(U&&o.target.tagName=="AREA"){var Q=U.plotX,L=U.plotY;H(U,{pageX:lb.x+ga+(Ea?sa-L:Q),pageY:lb.y+I+(Ea?ka-Q:L)});na(l.hoverSeries,"click",H(o,{point:U}));U.firePointEvent("click",o)}else{H(o,q(o));na(l,"click",o)}}za=false}}function ea(o){var Q=l.hoverPoint,L=l.hoverSeries;if(L){Q||(Q=L.tooltipPoints[Ea?o.pageY-lb.y-I:o.pageX-lb.x-ga]);if(Q&&Q!=U){U&&U.firePointEvent("mouseOut");Q.firePointEvent("mouseOver");Ab&&Ab.refresh(Q);U=Q}}}function xa(){var o="highchartsMap"+bd++;l.imagemap=ib=V("map",{name:o,id:o,className:"highcharts-image-map"},null,oa);dc=V("img",{useMap:"#"+o},{width:sa+F,height:ka+F,left:ga+F,top:I+F,opacity:0,border:"none",position:wa,clip:"rect(1px,"+sa+"px,"+ka+"px,1px)",zIndex:9},ib);if(!Ra){dc.src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="}}function D(){Ab&&Ab.hide();if(l.hoverSeries){l.hoverSeries.setState();U=l.hoverSeries=null}}function ia(o){var Q=0,L,la=ib.childNodes;for(L=0;L<la.length;L++){if(la[L].isLegendArea){Q=L+1;break}}ib.insertBefore(o,la[Q])}var U,X,ca,za,P,Aa=A.zoomType,w=/x/.test(Aa),qa=/y/.test(Aa),S=w&&!Ea||qa&&Ea,Na=qa&&!Ea||w&&Ea;xa();if(h.enabled){l.tooltip=Ab=jb(h)}M();setInterval(function(){yc&&yc()},32);H(this,{insertAtFront:ia,zoomX:w,zoomY:qa,resetTracker:D})}function jb(l){function h(ia,U){var X=ia.tooltipPos;U=ia.series;var ca=l.borderColor||ia.color||U.color||"#606060",za=t.inverted,P,Aa,w,qa=ea.offsetHeight;w=ia.tooltipText;M=U;P=X?X[0]:za?sa-ia.plotY:ia.plotX;X=X?X[1]:za?ka-ia.plotX:ia.plotY;if(P>=0&&P<=sa&&X>=0&&X<=ka){Aa=true}if(w===false||!Aa){q()}else{ea.innerHTML=w;ra(ea,{overflow:ec});Aa=ea.offsetWidth-xa;w=ea.offsetHeight-xa;ra(ea,{overflow:db});if(Aa>(D.w||0)+20||Aa<(D.w||0)-20||w>D.h||D.c!=ca||qa!=ea.offsetHeight){D.clear();D.drawRect(xa/2,xa/2,Aa+20,w,ca,xa,l.borderRadius,l.backgroundColor,l.shadow);H(D,{w:Aa,h:w,c:ca})}ca=P-D.w+ga-35;P=X-D.h+10+I;if(ca<5){ca=5;P-=20}if(P<5){P=5}else{if(P+D.h>Ga){P=Ga-D.h-5}}s(O(ca),O(P));U.drawPointState(ia,"hover");kb.style.visibility=ec}}function s(ia,U){var X=kb.style.visibility==db,ca=X?ia:(kb.offsetLeft+ia)/2;X=X?U:(kb.offsetTop+U)/2;ra(kb,{left:ca+F,top:X+F});yc=Da(ia-ca)>1||Da(U-X)>1?function(){s(ia,U)}:null}function q(){if(kb){kb.style.visibility=db}M&&M.drawPointState()}var M,ea,xa=l.borderWidth,D;kb=V(Va,null,{position:wa,visibility:db,overflow:db,padding:"0 50px 5px 0",zIndex:8},oa);D=new pa("tooltip-box",kb,null,{width:mb+F,height:Ga+F});ea=V(Va,{className:"highcharts-tooltip"},H(l.style,{maxWidth:mb-40+F,textOverflow:"ellipsis",position:Xb,zIndex:2}),kb);return{refresh:h,hide:q}}var nb=function(l){function h(Aa){if(Aa){p(U,function(w){Ca(w.legendItem)});U=[]}P&&za.reverse();p(za,function(w){if(w.options.showInLegend){var qa=w.options.legendType=="point"?w.data:[w];p(qa,function(S){S.simpleSymbol=/(bar|pie|area|column)/.test(w.type);S.legendItem=M=V("li",{innerHTML:q.labelFormatter.call(S),className:S.visible?"":Ob},null,D.firstChild);if(S.options&&S.options.showCheckbox){S.checkbox=V("input",{type:"checkbox",checked:S.selected,defaultChecked:S.selected},q.itemCheckboxStyle,M)}Oa(M,"mouseover",function(){S.setState("hover")});Oa(M,"mouseout",function(){S.setState()});Oa(M,"click",function(Na){Na=Na.target;var o="legendItemClick",Q=function(){S.setVisible()};if(Na.tagName=="INPUT"){na(S,"checkboxClick",{checked:Na.checked},function(){S.select()})}else{S.firePointEvent?S.firePointEvent(o,null,Q):na(S,o,null,Q)}});U.push(S)})}});P&&za.reverse()}function s(Aa){if(Aa){X.clear();Ca(ca);ca=null}if(za.length){if(q.borderWidth||q.backgroundColor){X.drawRect(D.offsetLeft,D.offsetTop,D.offsetWidth,D.offsetHeight,q.borderColor,q.borderWidth,q.borderRadius,q.backgroundColor,q.shadow)}p(U,function(w){if(w.legendItem){var qa=w.legendItem,S=D.offsetLeft+qa.offsetLeft;qa=D.offsetTop+qa.offsetTop+qa.offsetHeight/2;var Na=w.legendItem.className==Ob,o=Na?q.itemHiddenStyle.color:w.color;!w.simpleSymbol&&w.options&&w.options.lineWidth&&X.drawLine(S,qa,S+xa,qa,o,w.options.lineWidth);if(w.simpleSymbol){X.drawRect(S,qa-6,16,12,null,0,2,o)}else{if(w.options&&w.options.marker&&w.options.marker.enabled){w.drawMarker(X,S+xa/2,qa,aa(w.options.marker,Na?{fillColor:o,lineColor:o}:null))}}}});if(ib){ca=V("area",{shape:"rect",isLegendArea:true,coords:[D.offsetLeft-ga,D.offsetTop-I,D.offsetLeft+D.offsetWidth-ga,D.offsetTop+D.offsetHeight-I].join(",")});ub.insertAtFront(ca);ca.onmouseover=function(w){w=w||Pa.event;w=w.relatedTarget||w.fromElement;if(w!=D&&!Nb){Ab&&Ab.hide();ra(D,{zIndex:10})}};D.onmouseout=ca.onmouseout=function(w){w=w||Pa.event;if((w=w.relatedTarget||w.toElement)&&(w==dc||w.tagName=="AREA"&&w!=ca)){ra(D,{zIndex:7})}}}}}var q=l.options.legend;if(q.enabled){var M,ea=q.layout,xa=q.symbolWidth,D,ia="#"+oa.id+" .highcharts-legend li",U=[],X=new pa("legend",oa,null,{zIndex:7}),ca,za=l.series,P=q.reversed;this.dom=D=V(Va,{className:"highcharts-legend highcharts-legend-"+ea,innerHTML:'<ul style="margin:0;padding:0"></ul>'},H({position:wa,zIndex:7},q.style),oa);Gb(ia,H(q.itemStyle,{paddingLeft:xa+q.symbolPadding+F,"float":ea=="horizontal"?"left":"none"}));Gb(ia+":hover",q.itemHoverStyle);Gb(ia+"."+Ob,q.itemHiddenStyle);Gb(".highcharts-legend-horizontal li",{"float":"left"});h();s();return{renderHTML:h,drawGraphics:s}}};Pa.G_vmlCanvasManager&&Pa.G_vmlCanvasManager.init_(document);Zb=aa(Zb,Ba.xAxis);tc=aa(tc,Ba.yAxis);Ba.xAxis=Ba.yAxis=null;a=aa(Ba,a);var A=a.chart,T=A.margin;T=typeof T=="number"?[T,T,T,T]:T;var I=T[0],fb=T[1],cb=T[2],ga=T[3],Xa,rb,oa,qc,mb,Ga;C();var t=this;T=A.events;var zc,ib,Ab,Nb,Jc=new pa("chart-background",oa),vb,sc,ka,sa,ub,dc,Jb,lb=Hc(oa),Ub=A.showAxes,Ka=[],Cb,ya=[],Yb,Ea,yc,kb;fc=Bb=0;Oa(Pa,"resize",i);Oa(Pa,"unload",La);if(T){for(zc in T){Oa(t,zc,T[zc])}}t.addLoading=function(l){t.resources[l]=false};t.clearLoading=function(l){t.resources[l]=true;E()};t.options=a;t.series=ya;t.container=oa;t.resources={};t.inverted=Ea=a.chart.inverted;t.chartWidth=mb;t.chartHeight=Ga;t.plotWidth=sa=mb-ga-fb;t.plotHeight=ka=Ga-I-cb;t.plotLeft=ga;t.plotTop=I;t.redraw=c;t.addSeries=b;t.getSelectedPoints=r;t.getSelectedSeries=v;t.showLoading=e;t.hideLoading=f;t.get=g;t.destroy=La;t.updatePosition=i;t.plotLayer=sc=new pa("plot",oa,null,{position:wa,width:sa+F,height:ka+F,left:ga+F,top:I+F,overflow:db,zIndex:3});if(A.plotBackgroundImage){t.addLoading("plotBack");Yb=V("img");Yb.onload=function(){t.clearLoading("plotBack")};Yb.src=A.plotBackgroundImage}p(a.series||[],function(l){d(l)});t.tracker=ub=new ob(t,a.tooltip);E()}function Tc(a){for(var b=[],c=[],d=0;d<a.length;d++){b[d]=a[d].plotX;c[d]=a[d].plotY}this.xdata=b;this.ydata=c;a=[];this.y2=[];var e=c.length;this.n=e;this.y2[0]=0;this.y2[e-1]=0;a[0]=0;for(d=1;d<e-1;d++){var f=b[d+1]-b[d-1];f=(b[d]-b[d-1])/f;var g=f*this.y2[d-1]+2;this.y2[d]=(f-1)/g;a[d]=(c[d+1]-c[d])/(b[d+1]-b[d])-(c[d]-c[d-1])/(b[d]-b[d-1]);a[d]=(6*a[d]/(b[d+1]-b[d-1])-f*a[d-1])/g}for(b=e-2;b>=0;b--){this.y2[b]=this.y2[b]*this.y2[b+1]+a[b]}}var ma,va=document,Pa=window,ta=Math,O=ta.round,Za=ta.floor,Lb=ta.max,Da=ta.abs,gc=ta.cos,hc=ta.sin,B=navigator.userAgent,Ra=/msie/i.test(B)&&!Pa.opera,cd=/AppleWebKit/.test(B),kc,bd=0,Bb,fc,Uc={},rc=0,Sa=1,Qb,Va="div",wa="absolute",Xb="relative",db="hidden",Ob="highcharts-"+db,ec="visible",F="px",Tb,oc,mc,nc,Ib,Rb,Sb,Dc,Ec,pc,Fc,Gc,ua=(B=Pa.HighchartsAdapter)||{},p=ua.each,Wb=ua.grep,qb=ua.map,aa=ua.merge,Pb=ua.hyphenate,Oa=ua.addEvent,na=ua.fireEvent,Db=ua.animate,Ac=ua.getAjax,bb={};if(!B&&Pa.jQuery){var pb=jQuery;p=function(a,b){for(var c=0,d=a.length;c<d;c++){if(b.call(a[c],a[c],c,a)===false){return c}}};Wb=pb.grep;qb=function(a,b){for(var c=[],d=0,e=a.length;d<e;d++){c[d]=b.call(a[d],a[d],d,a)}return c};aa=function(){var a=arguments;return pb.extend(true,null,a[0],a[1],a[2],a[3])};Pb=function(a){return a.replace(/([A-Z])/g,function(b,c){return"-"+c.toLowerCase()})};Oa=function(a,b,c){pb(a).bind(b,c)};na=function(a,b,c,d){var e=pb.Event(b),f="detached"+b;H(e,c);if(a[b]){a[f]=a[b];a[b]=null}pb(a).trigger(e);if(a[f]){a[b]=a[f];a[f]=null}d&&!e.isDefaultPrevented()&&d(e)};Db=function(a,b,c){pb(a).animate(b,c)};Ac=function(a,b){pb.get(a,null,b)};pb.extend(pb.easing,{easeOutQuad:function(a,b,c,d,e){return -d*(b/=e)*(b-2)+c}})}else{if(!B&&Pa.MooTools){p=$each;qb=function(a,b){return a.map(b)};Wb=function(a,b){return a.filter(b)};aa=$merge;Pb=function(a){return a.hyphenate()};Oa=function(a,b,c){if(!a.addEvent){if(a.nodeName){a=$(a)}else{H(a,new Events)}}a.addEvent(b,c)};na=function(a,b,c,d){b=new Event({type:b,target:a});b=H(b,c);b.preventDefault=function(){d=null};a.fireEvent&&a.fireEvent(b.type,b);d&&d(b)};Db=function(a,b,c){a=new Fx.Morph($(a),H(c,{transition:Fx.Transitions.Quad.easeInOut}));a.start(b)};Ac=function(a,b){(new Request({url:a,method:"get",onSuccess:b})).send()}}}B='normal 12px "Lucida Grande", "Lucida Sans Unicode", Verdana, Arial, Helvetica, sans-serif';ua={enabled:true,align:"center",x:0,y:15,style:{color:"#666",font:B.replace("12px","11px")}};var Ba={colors:["#4572A7","#AA4643","#89A54E","#80699B","#3D96AE","#DB843D","#92A8CD","#A47D7C","#B5CA92"],symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:["January","February","March","April","May","June","July","August","September","October","November","December"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],decimalPoint:".",resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:","},global:{useUTC:true},chart:{margin:[50,50,60,80],borderColor:"#4572A7",borderRadius:5,defaultSeriesType:"line",ignoreHiddenSeries:true,plotBorderColor:"#C0C0C0"},title:{text:"Chart title",style:{textAlign:"center",color:"#3E576F",font:B.replace("12px","16px"),margin:"10px 0 0 0"}},subtitle:{text:"",style:{textAlign:"center",color:"#6D869F",font:B,margin:0}},plotOptions:{line:{allowPointSelect:false,showCheckbox:false,animation:true,events:{},lineWidth:2,shadow:true,marker:{enabled:true,symbol:"auto",lineWidth:0,radius:4,lineColor:"#FFFFFF",fillColor:"auto",states:{hover:{},select:{fillColor:"#FFFFFF",lineColor:"auto",lineWidth:2}}},point:{events:{}},dataLabels:aa(ua,{enabled:false,y:-6,formatter:function(){return this.y}}),showInLegend:true,states:{hover:{lineWidth:3,marker:{}},select:{marker:{}}}}},labels:{style:{position:wa,color:"#3E576F",font:B}},legend:{enabled:true,layout:"horizontal",labelFormatter:function(){return this.name},borderColor:"#909090",borderRadius:5,shadow:true,style:{bottom:"10px",left:"80px",padding:"5px"},itemStyle:{listStyle:"none",margin:0,padding:"0 2em 0 0",font:B,cursor:"pointer",color:"#3E576F",position:Xb},itemHoverStyle:{color:"#000"},itemHiddenStyle:{color:"#CCC"},itemCheckboxStyle:{position:wa,right:0},symbolWidth:16,symbolPadding:5},loading:{hideDuration:100,labelStyle:{font:B.replace("normal","bold"),position:Xb,top:"1em"},showDuration:100,style:{position:wa,backgroundColor:"white",opacity:0.5,textAlign:"center"}},tooltip:{enabled:true,formatter:function(){var a=this,b=a.series,c=b.xAxis,d=a.x;return"<b>"+(a.point.name||b.name)+"</b><br/>"+(Qa(d)?"X value: "+(c&&c.options.type=="datetime"?lc("%Y-%m-%d %H:%M:%S",d):d)+"<br/>":"")+"Y value: "+a.y},backgroundColor:"rgba(255, 255, 255, .85)",borderWidth:2,borderRadius:5,shadow:true,snap:10,style:{color:"#333333",font:B,fontSize:"9pt",padding:"5px",whiteSpace:"nowrap"}},toolbar:{itemStyle:{color:"#4572A7",cursor:"pointer",margin:"20px",font:B}},credits:{enabled:false,text:"Highcharts.com",href:"http://www.highcharts.com",style:{position:wa,right:"10px",bottom:"5px",color:"#999",textDecoration:"none",font:B.replace("12px","10px")},target:"_self"}},Zb={dateTimeLabelFormats:{second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%e. %b",week:"%e. %b",month:"%b '%y",year:"%Y"},endOnTick:false,gridLineColor:"#C0C0C0",labels:ua,lineColor:"#C0D0E0",lineWidth:1,max:null,min:null,maxZoom:null,minorGridLineColor:"#E0E0E0",minorGridLineWidth:1,minorTickColor:"#A0A0A0",minorTickLength:2,minorTickPosition:"outside",minorTickWidth:1,showFirstLabel:true,showLastLabel:false,startOfWeek:1,startOnTick:false,tickColor:"#C0D0E0",tickInterval:"auto",tickLength:5,tickmarkPlacement:"between",tickPixelInterval:100,tickPosition:"outside",tickWidth:1,title:{enabled:false,text:"X-values",align:"middle",margin:35,style:{color:"#6D869F",font:B.replace("normal","bold")}},type:"linear"},tc=aa(Zb,{endOnTick:true,gridLineWidth:1,tickPixelInterval:72,showLastLabel:true,labels:{align:"right",x:-8,y:3},lineWidth:0,maxPadding:0.05,minPadding:0.05,startOnTick:true,tickWidth:0,title:{enabled:true,margin:40,rotation:270,text:"Y-values"}}),$c={labels:{align:"right",x:-8,y:3},title:{rotation:270}},Zc={labels:{align:"left",x:8,y:3},title:{rotation:90}},Kc={labels:{align:"center",x:0,y:14},title:{rotation:0}},Yc=aa(Kc,{labels:{y:-5}});B=Ba.plotOptions;ua=B.line;B.spline=aa(ua);B.scatter=aa(ua,{lineWidth:0,states:{hover:{lineWidth:0}}});B.area=aa(ua,{fillColor:"auto"});B.areaspline=aa(B.area);B.column=aa(ua,{borderColor:"#FFFFFF",borderWidth:1,borderRadius:0,groupPadding:0.2,pointPadding:0.1,states:{hover:{brightness:0.1,shadow:false},select:{color:"#C0C0C0",borderColor:"#000000",shadow:false}}});B.bar=aa(B.column,{dataLabels:{align:"left",x:5,y:0}});B.pie=aa(ua,{borderColor:"#FFFFFF",borderWidth:1,center:["50%","50%"],legendType:"point",size:"90%",slicedOffset:10,states:{hover:{brightness:0.1,shadow:false}}});Cc();var Bc=function(a){function b(i){if(g=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(i)){f=[parseInt(g[1]),parseInt(g[2]),parseInt(g[3]),parseFloat(g[4])]}else{if(g=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(i)){f=[parseInt(g[1],16),parseInt(g[2],16),parseInt(g[3],16),1]}}}function c(){return f&&!isNaN(f[0])?"rgba("+f.join(",")+")":a}function d(i){if(typeof i=="number"&&i!=0){for(var k=0;k<3;k++){f[k]+=parseInt(i*255);if(f[k]<0){f[k]=0}if(f[k]>255){f[k]=255}}}return this}function e(i){f[3]=i;return this}var f=[],g;b(a);return{get:c,brighten:d,setOpacity:e}},pa=function(a,b,c,d){var e=this,f=b.style;c=H({className:"highcharts-"+a},c);d=H({width:f.width,height:f.height,position:wa,top:0,left:0,margin:0,padding:0,border:"none"},d);a=V(Va,c,d,b);H(e,{div:a,width:parseInt(d.width),height:parseInt(d.height)});e.svg=Ra?"":'<?xml version="1.0" encoding="utf-8"?><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'+e.width+'px" height="'+e.height+'">';e.basicSvg=e.svg};pa.prototype={getCtx:function(){if(!this.ctx){var a=V("canvas",{id:"highcharts-canvas-"+rc++,width:this.width,height:this.height},{position:wa},this.div);if(Ra){G_vmlCanvasManager.initElement(a);a=va.getElementById(a.id)}this.ctx=a.getContext("2d")}return this.ctx},getSvg:function(){if(!this.svgObject){var a=this,b=a.div,c=a.width;a=a.height;if(Ra){if(!va.namespaces.g_vml_){va.namespaces.add("g_vml_","urn:schemas-microsoft-com:vml");va.createStyleSheet().cssText="g_vml_\\:*{behavior:url(#default#VML)}"}this.svgObject=V(Va,null,{width:c+F,height:a+F,position:wa},b)}else{this.svgObject=V("object",{width:c,height:a,type:"image/svg+xml"},{position:wa,left:0,top:0},b)}}return this.svgObject},drawLine:function(a,b,c,d,e,f){var g=this.getCtx();if(a==c){a=c=O(a)+f%2/2}if(b==d){b=d=O(b)+f%2/2}g.lineWidth=f;g.lineCap="round";g.beginPath();g.moveTo(a,b);g.strokeStyle=e;g.lineTo(c,d);g.closePath();g.stroke()},drawPolyLine:function(a,b,c,d,e){var f=this.getCtx(),g=[];if(d&&c){p(a,function(i){g.push(i===ma?i:i+1)});for(d=1;d<=3;d++){this.drawPolyLine(g,"rgba(0, 0, 0, "+0.05*d+")",6-2*d)}}f.beginPath();for(d=0;d<a.length;d+=2){f[d==0?"moveTo":"lineTo"](a[d],a[d+1])}H(f,{lineWidth:c,lineJoin:"round"});if(b&&c){f.strokeStyle=Hb(b,f);f.stroke()}if(e){f.fillStyle=Hb(e,f);f.fill()}},drawRect:function(a,b,c,d,e,f,g,i,k,j){var r=function(){var R;if(c>0&&d>0){v.beginPath();if(g){v.moveTo(a,b+g);v.lineTo(a,b+d-g);v.quadraticCurveTo(a,b+d,a+g,b+d);v.lineTo(a+c-g,b+d);v.quadraticCurveTo(a+c,b+d,a+c,b+d-g);v.lineTo(a+c,b+g);v.quadraticCurveTo(a+c,b,a+c-g,b);v.lineTo(a+g,b);v.quadraticCurveTo(a,b,a,b+g)}else{v.rect(a,b,c,d)}v.closePath();R=true}return R},v=this.getCtx(),y=(f||0)%2/2;a=O(a)+y;b=O(b)+y;c=O(c-2*y);d=O(d-2*y);if(k){for(k=1;k<=3;k++){this.drawRect(a+1,b+1,c,d,"rgba(0, 0, 0, "+0.05*k+")",6-2*k,g)}}j&&v.drawImage(j,a,b,c,d);if(r()){if(i){v.fillStyle=Hb(i,v);v.fill();Pa.G_vmlCanvasManager&&r()}if(f){v.strokeStyle=Hb(e,v);v.lineWidth=f;v.stroke()}}},drawSymbol:function(a,b,c,d,e,f,g){var i=this.getCtx(),k=/^url\((.*?)\)$/;i.beginPath();if(a=="square"){a=0.707*d;i.moveTo(b-a,c-a);i.lineTo(b+a,c-a);i.lineTo(b+a,c+a);i.lineTo(b-a,c+a);i.lineTo(b-a,c-a)}else{if(a=="triangle"){c++;i.moveTo(b,c-1.33*d);i.lineTo(b+d,c+0.67*d);i.lineTo(b-d,c+0.67*d);i.lineTo(b,c-1.33*d)}else{if(a=="triangle-down"){c--;i.moveTo(b,c+1.33*d);i.lineTo(b-d,c-0.67*d);i.lineTo(b+d,c-0.67*d);i.lineTo(b,c+1.33*d)}else{if(a=="diamond"){i.moveTo(b,c-d);i.lineTo(b+d,c);i.lineTo(b,c+d);i.lineTo(b-d,c);i.lineTo(b,c-d)}else{k.test(a)?V("img",{onload:function(){var j=this,r=Uc[j.src]||[j.width,j.height];ra(j,{left:O(b-r[0]/2)+F,top:O(c-r[1]/2)+F,visibility:ec});Uc[j.src]=r},src:a.match(k)[1]},{position:wa,visibility:Ra?ec:db},this.div):i.arc(b,c,d,0,2*ta.PI,true)}}}}if(g){i.fillStyle=g;i.fill()}if(f&&e){i.strokeStyle=f||"rgb(100, 100, 255)";i.lineWidth=e||2;i.stroke()}},drawHtml:function(a,b,c){V(Va,H(b,{innerHTML:a}),H(c,{position:wa}),this.div)},drawText:function(){this.addText.apply(this,arguments);this.strokeText()},addText:function(a,b,c,d,e,f){if(a||a===0){var g=this,i,k=g.div,j,r="";d=d||{};var v=d.color||"#000000";f=f||"left";var y=parseInt(d.fontSize||d.font.replace(/^[a-z ]+/,""));for(var R in d){r+=Pb(R)+":"+d[R]+";"}p(["MozTransform","WebkitTransform","transform"],function(Wa){if(Wa in k.style){j=Wa}});if(!e||j){a=V("span",{innerHTML:a},H(d,{position:wa,left:b+F,whiteSpace:"nowrap",bottom:O(g.height-c-y*0.25)+F,color:v}),k);r=a.offsetWidth;if(f=="right"){ra(a,{left:b-r+F})}else{f=="center"&&ra(a,{left:O(b-r/2)+F})}if(e){f={left:0,center:50,right:100}[f];a.style[j]="rotate("+e+"deg)";a.style[j+"Origin"]=f+"% 100%"}}else{if(Ra){i=true;d=(e||0)*ta.PI*2/360;e=gc(d);d=hc(d);R=g.width;y=y/3||3;var E=f=="left",K=f=="right",C=E?b:b-R*e;b=K?b:b+R*e;E=E?c:c-R*d;c=K?c:c+R*d;C+=y*d;b+=y*d;E-=y*e;c-=y*e;if(Da(C-b)<0.1){C+=0.1}if(Da(E-c)<0.1){E+=0.1}g.svg+='<g_vml_:line from="'+C+", "+E+'" to="'+b+", "+c+'" stroked="false"><g_vml_:fill on="true" color="'+v+'"/><g_vml_:path textpathok="true"/><g_vml_:textpath on="true" string="'+a+'" style="v-text-align:'+f+";"+r+'"/></g_vml_:line>'}else{i=true;g.svg+='<g><text transform="translate('+b+","+c+") rotate("+(e||0)+')" style="fill:'+v+";text-anchor:"+{left:"start",center:"middle",right:"end"}[f]+";"+r.replace(/"/g,"'")+'">'+a+"</text></g>"}}g.hasObject=i}},strokeText:function(){if(this.hasObject){var a=this.getSvg(),b=this.svg;if(Ra){a.innerHTML=b}else{a.data="data:image/svg+xml,"+b+"</svg>";cd&&this.div.appendChild(a)}}},clear:function(){var a=this,b=this.div;b=b.childNodes;a.ctx&&a.ctx.clearRect(0,0,a.width,a.height);if(a.svgObject){Ca(a.svgObject);a.svgObject=null;a.svg=a.basicSvg}for(var c=b.length-1;c>=0;c--){a=b[c];/(SPAN|IMG)/.test(a.tagName)&&Ca(a)}},hide:function(){ra(this.div,{display:"none"})},show:function(){ra(this.div,{display:""})},destroy:function(){Ca(this.div);return null}};var ic=function(){};ic.prototype={init:function(a,b){var c=this;c.series=a;c.applyOptions(b);return c},applyOptions:function(a){var b=this,c=b.series;if(typeof a=="number"||a===null){b.y=a}else{if(typeof a=="object"&&typeof a.length!="number"){H(b,a);b.options=a}else{if(typeof a[0]=="string"){b.name=a[0];b.y=a[1]}else{if(typeof a[0]=="number"){b.x=a[0];b.y=a[1]}}}}if(b.x===ma){b.x=c.autoIncrement()}},destroy:function(){var a=this;a.stateLayer&&a.stateLayer.destroy();for(prop in a){a[prop]=null}},select:function(a,b){var c=this,d=c.series,e=d.chart,f,g,i=da(c.stateLayer,d.singlePointLayer,e.singlePointLayer);c.selected=a=da(a,!c.selected);d.isDirty=true;c.firePointEvent(a?"select":"unselect");i&&i.clear();p(e.series,function(k){f=k.stateLayers;b||p(k.data,function(j){if(j.selected&&j!=c){j.selected=false;na(j,"unselect");k.isDirty=true}});if(k.isDirty){for(g in f){f[g].clear()}k.render()}})},update:function(a,b){var c=this,d=c.series;b=da(b,true);c.firePointEvent("update",{options:a},function(){c.applyOptions(a);d.isDirty=true;b&&d.chart.redraw()})},remove:function(a){var b=this,c=b.series,d=c.chart,e=c.data;a=da(a,true);b.firePointEvent("remove",null,function(){p(e,function(f,g){f==b&&e.splice(g,1)});if(b.layer){b.layer=b.layer.destroy()}if(b.legendItem){Ca(b.legendItem);b.legendItem=null;d.isDirty=true}c.isDirty=true;a&&d.redraw()})},firePointEvent:function(a,b,c){var d=this,e=this.series;e=e.options;if(e.point.events[a]||d.options&&d.options.events&&d.options.events[a]){this.importEvents()}if(a=="click"&&e.allowPointSelect){c=function(f){d.select(null,f.ctrlKey||f.metaKey||f.shiftKey)}}na(this,a,b,c)},importEvents:function(){if(!this.hasImportedEvents){var a=this,b=aa(a.series.options.point,a.options);b=b.events;var c;a.events=b;for(c in b){Oa(a,c,b[c])}this.hasImportedEvents=true}},setTooltipText:function(){var a=this;a.tooltipText=a.series.chart.options.tooltip.formatter.call({series:a.series,point:a,x:a.category,y:a.y,percentage:a.percentage,total:a.stackTotal})}};var Ja=function(){this.isCartesian=true;this.type="line";this.pointClass=ic};Ja.prototype={init:function(a,b){var c=this,d,e=a.series.length;c.chart=a;b=c.setOptions(b);H(c,{index:e,options:b,name:b.name||"Series "+(e+1),state:"",visible:b.visible!==false,selected:b.selected==true});a=b.events;for(d in a){Oa(c,d,a[d])}c.getColor();c.getSymbol();c.getData(b)},getData:function(a){var b=this,c=b.chart,d="series"+rc++;if(!a.data&&a.dataURL){c.addLoading(d);Ac(a.dataURL,function(e){b.dataLoaded(e);c.clearLoading(d)})}else{b.dataLoaded(a.data)}},dataLoaded:function(a){var b=this,c=b.chart,d=b.options,e=[""],f=d.dataParser,g={},i;if(d.dataURL&&!f){f=function(k){return eval(k)}}if(f){a=f.call(b,a)}b.layerGroup=i=new pa("series-group",c.plotLayer.div,null,{zIndex:2});d.states.hover.enabled&&e.push("hover");p(e,function(k){g[k]=new pa("state-"+k,i.div)});b.stateLayers=g;b.setData(a,false)},autoIncrement:function(){var a=this,b=a.options,c=a.xIncrement;c=da(c,b.pointStart,0);a.pointInterval=da(a.pointInterval,b.pointInterval,1);a.xIncrement=c+a.pointInterval;return c},cleanData:function(){var a=this;a=a.data;var b;a.sort(function(c,d){return c.x-d.x});for(b=a.length-1;b>=0;b--){a[b-1]&&a[b-1].x==a[b].x&&a.splice(b-1,1)}},getSegments:function(){var a=-1,b=[],c=this.data;p(c,function(d,e){if(d.y===null){e>a+1&&b.push(c.slice(a+1,e));a=e}else{e==c.length-1&&b.push(c.slice(a+1,e+1))}});this.segments=b},setOptions:function(a){var b=this.chart.options.plotOptions;a=aa(b[this.type],b.series,a);b=a.marker;var c=a.states.hover.marker;if(c.lineWidth===ma){c.lineWidth=b.lineWidth+1}if(c.radius===ma){c.radius=b.radius+1}return a},getColor:function(){var a=this.chart.options.colors;this.color=this.options.color||a[Bb++]||"#0000ff";if(Bb>=a.length){Bb=0}},getSymbol:function(){var a=this.chart.options.symbols,b=this.options.marker.symbol||"auto";if(b=="auto"){b=a[fc++]}this.symbol=b;if(fc>=a.length){fc=0}},addPoint:function(a,b,c){var d=this,e=d.data;a=(new d.pointClass).init(d,a);b=da(b,true);e.push(a);c&&e.shift();d.isDirty=true;b&&d.chart.redraw()},setData:function(a,b){var c=this;c.xIncrement=null;a=qb(jc(a),function(d){return(new c.pointClass).init(c,d)});c.data=a;c.cleanData();c.getSegments();c.isDirty=true;da(b,true)&&c.chart.redraw()},remove:function(a){var b=this,c=b.chart;a=da(a,true);if(!b.isRemoving){b.isRemoving=true;na(b,"remove",null,function(){Ca(b.layerGroup.div);p(b.areas,function(d){Ca(d)});Ca(b.legendItem);b.legendItem=null;p(c.series,function(d,e){d==b&&c.series.splice(e,1)});c.isDirty=true;a&&c.redraw()})}b.isRemoving=false},translate:function(){var a=this.chart,b=this,c=b.options.stacking,d=b.xAxis.categories,e=b.yAxis,f=e.stacks[b.type];p(this.data,function(g){var i=g.x,k=g.y,j;g.plotX=b.xAxis.translate(g.x);if(c&&b.visible&&f[i]){j=f[i];i=j.total;j.cum=j=j.cum-k;k=j+k;if(c=="percent"){j=i?j*100/i:0;k=i?k*100/i:0}g.percentage=i?g.y*100/i:0;g.stackTotal=i;g.yBottom=e.translate(j,0,1)}if(k!==null){g.plotY=e.translate(k,0,1)}g.clientX=a.inverted?a.plotHeight-g.plotX+a.plotTop:g.plotX+a.plotLeft;g.category=d&&d[g.x]!==ma?d[g.x]:g.x})},setTooltipPoints:function(a){var b=this,c=b.chart,d=c.inverted,e=[],f=d?c.plotHeight:c.plotWidth,g,i,k=[];if(a){b.tooltipPoints=null}p(b.segments,function(j){e=e.concat(j)});if(b.xAxis.reversed){e=e.reverse()}p(e,function(j,r){b.tooltipPoints||j.setTooltipText();g=e[r-1]?e[r-1].high+1:0;for(i=j.high=e[r+1]?Za((j.plotX+(e[r+1]?e[r+1].plotX:f))/2):f;g<=i;){k[d?f-g++:g++]=j}});b.tooltipPoints=k},drawLine:function(a){var b,c=this,d=c.options,e=c.chart,f=d.animation&&c.animate,g=c.stateLayers[a],i=d.lineColor||c.color,k=d.fillColor=="auto"?Bc(c.color).setOpacity(d.fillOpacity||0.75).get():d.fillColor,j=e.inverted,r=(j?0:e.plotHeight)-c.yAxis.translate(0);if(a){d=aa(d,d.states[a])}f&&c.animate(true);p(c.segments,function(v){var y=[],R=[];p(v,function(E,K){if(K&&d.step){K=v[K-1];y.push(j?e.plotWidth-K.plotY:E.plotX,j?e.plotHeight-E.plotX:K.plotY)}y.push(j?e.plotWidth-E.plotY:E.plotX,j?e.plotHeight-E.plotX:E.plotY)});if(/area/.test(c.type)){for(b=0;b<y.length;b++){R.push(y[b])}if(d.stacking&&c.type!="areaspline"){for(b=v.length-1;b>=0;b--){R.push(v[b].plotX,v[b].yBottom)}}else{R.push(j?r:v[v.length-1].plotX,j?e.plotHeight-v[v.length-1].plotX:r,j?r:v[0].plotX,j?e.plotHeight-v[0].plotX:r)}g.drawPolyLine(R,null,null,d.shadow,k)}d.lineWidth&&g.drawPolyLine(y,i,d.lineWidth,d.shadow)});f&&c.animate()},animate:function(a){var b=this,c=b.chart,d=c.inverted,e=b.layerGroup.div;if(b.visible){if(a){ra(e,H({overflow:db},d?{height:0}:{width:0}))}else{Db(e,d?{height:c.plotHeight+F}:{width:c.plotWidth+F},{duration:1000});this.animate=null}}},drawPoints:function(a){var b=this,c=b.stateLayers[a];a=b.options;var d=a.marker;a=b.data;var e=b.chart,f=e.inverted;d.enabled&&p(a,function(g){if(g.plotY!==ma){b.drawMarker(c,f?e.plotWidth-g.plotY:g.plotX,f?e.plotHeight-g.plotX:g.plotY,aa(d,g.marker))}g.selected&&b.drawPointState(g,"select",c)})},drawMarker:function(a,b,c,d){if(d.lineColor=="auto"){d.lineColor=this.color}if(d.fillColor=="auto"){d.fillColor=this.color}if(d.symbol=="auto"){d.symbol=this.symbol}a.drawSymbol(d.symbol,b,c,d.radius,d.lineWidth,d.lineColor,d.fillColor)},drawDataLabels:function(){if(this.options.dataLabels.enabled){var a=this,b,c,d=a.data,e=a.options.dataLabels,f,g=a.dataLabelsLayer,i=a.chart,k=i.inverted,j=a.type,r=j=="pie",v;if(g){g.clear()}else{a.dataLabelsLayer=g=new pa("data-labels",a.layerGroup.div,null,{zIndex:1})}e.style.color=e.color=="auto"?a.color:e.color;p(d,function(y){var R=y.plotX,E=y.plotY,K=y.tooltipPos;f=e.formatter.call({x:y.x,y:y.y,series:a,point:y});b=(k?i.plotWidth-E:R)+e.x;c=(k?i.plotHeight-R:E)+e.y;if(K){b=K[0]+e.x;c=K[1]+e.y}if(r){if(!y.dataLabelsLayer){y.dataLabelsLayer=new pa("data-labels",y.layer.div,null,{zIndex:3})}g=y.dataLabelsLayer}v=e.align;if(j=="column"){b+={center:y.w/2,right:y.w}[v]||0}if(f){g[r?"drawText":"addText"](f,b,c,e.style,e.rotation,v)}});r||g.strokeText()}},drawPointState:function(a,b,c){var d=this.chart,e=d.inverted,f=b=="hover";c=c||d.singlePointLayer;var g=this.options;if(f){if(!c){c=d.singlePointLayer=new pa("single-point",d.plotLayer.div,null,{zIndex:3})}c.clear()}if(b){var i=g.states[b].marker;b=g.marker.states[b];if(f&&b.radius===ma){b.radius=i.radius+2}if((f=aa(g.marker,a.marker,i,b))&&f.enabled){this.drawMarker(c,e?d.plotWidth-a.plotY:a.plotX,e?d.plotHeight-a.plotX:a.plotY,f)}}},destroy:function(){var a=this,b;p(a.data,function(c){c.destroy()});for(b in a){a[b]=null}},render:function(){var a=this,b,c=a.stateLayers;a.drawDataLabels();if(a.visible){for(b in c){a.drawLine(b);a.drawPoints(b)}}else{a.setVisible(false,false)}if(!a.hasRendered&&c.hover){c.hover.hide();hasRendered=true}a.isDirty=false},redraw:function(){var a=this;a.translate();a.setTooltipPoints(true);a.createArea();a.clear();a.render()},clear:function(){var a=this.stateLayers;for(var b in a){a[b].clear();a[b].cleared=true}if(this.dataLabelsLayer){this.dataLabelsLayer.clear();this.hasDrawnDataLabels=false}},setState:function(a){a=a||"";if(this.state!=a){var b=this,c=b.stateLayers,d=c[a];c=c[b.state];var e=b.singlePointLayer||b.chart.singlePointLayer;b.state=a;if(d){if(a){d.show()}else{c&&c.hide();e&&e.clear()}}}},setVisible:function(a,b){var c=this,d=c.chart,e=c.layerGroup,f=c.legendItem,g=c.areas,i=c.visible;if(c.visible=a=a===ma?!i:a){c.isDirty=true;e.show()}else{e.hide()}if(f){f.className=a?"":Ob;d.legend.drawGraphics(true)}g&&p(g,function(k){a?d.tracker.insertAtFront(k):Ca(k)});d.options.chart.ignoreHiddenSeries&&c.options.stacking&&p(d.series,function(k){if(k.options.stacking&&k.visible){k.isDirty=true}});b!==false&&d.redraw();na(c,a?"show":"hide")},show:function(){this.setVisible(true)},hide:function(){this.setVisible(false)},select:function(a){var b=this;b.selected=a=a===ma?!b.selected:a;if(b.checkbox){b.checkbox.checked=a}na(b,a?"select":"unselect")},getAreaCoords:function(){var a=this,b=this.chart,c=b.inverted,d=b.plotWidth,e=b.plotHeight,f=a.xAxis.reversed,g,i=b.options.tooltip.snap,k=[];p(a.splinedata||a.segments,function(j,r){if((g=j.length>1&&j[0].x>j[1].x)&&!f||f&&!g){j=j.reverse()}var v=[],y=[],R=[];p([y,R],function(E){for(var K=0,C=0,Wa,La,Fa=[j[0]],Kb=E==y?1:-1,ob,jb,nb,A,T,I,fb;j[C];){if(j[C].plotX>j[K].plotX+i||C==j.length-1){Wa=j[C];La=j.slice(K,C-1);p(La,function(cb){if(Kb*cb.plotY<Kb*Wa.plotY){Wa=cb}});if(O(j[K].plotX)<O(Wa.plotX)||j[C].plotX>j[K].plotX+i){Fa.push(Wa)}K=C}C++}Fa[Fa.length-1]!=j[j.length-1]&&Fa.push(j[j.length-1]);for(C=0;C<Fa.length;C++){if(C>0){jb=Fa[C].plotX;ob=Fa[C].plotY;K=Fa[C-1].plotX;La=Fa[C-1].plotY;A=jb-Fa[C-1].plotX;I=T=ob-Fa[C-1].plotY;nb=-A;fb=ta.sqrt(ta.pow(I,2)+ta.pow(nb,2));if(C==1){K-=i/fb*A;La-=i/fb*T}else{if(C==Fa.length-1){jb+=i/fb*A;ob+=i/fb*T}}A=Kb*i/fb;K=O(K+A*I);La=O(La+A*nb);jb=O(jb+A*I);nb=O(ob+A*nb);if(E[E.length-1]&&E[E.length-1][0]>K){for(ob=false;!ob;){T=E.pop();I=E[E.length-1];if(!I){break}A=(La-nb)/(K-jb);T=(I[1]-T[1])/(I[0]-T[0]);T=(-T*I[0]+I[1]+A*K-La)/(A-T);A=A*(T-K)+La;if(T>I[0]){E.push([O(T),O(A),1]);ob=true}}}else{isNaN(K)||E.push([K,La])}E[E.length-1]&&E[E.length-1][0]<jb&&E.push([jb,nb])}}});for(r=0;r<y.length;r++){v.push(c?d-y[r][1]:y[r][0],c?e-y[r][0]:y[r][1])}for(r=R.length-1;r>=0;r--){v.push(c?d-R[r][1]:R[r][0],c?e-R[r][0]:R[r][1])}v.length||v.push(O(j[0].plotX),O(j[0].plotY));v.length&&k.push([v.join(",")])});return k},createArea:function(){if(this.options.enableMouseTracking!==false){var a,b=this,c=b.options,d=b.chart,e=d.tracker,f=b.getAreaCoords(),g=[],i=b.areas,k;i&&p(i,function(j){Ca(j)});p(f,function(j){k=/^[0-9]+,[0-9]+$/.test(j[0]);a=V("area",{shape:k?"circle":"poly",chart:d,coords:j[0]+(k?","+d.options.tooltip.snap:""),onmouseover:function(){if(!(!b.visible||d.mouseIsDown)){var r=d.hoverSeries;d.hoverPoint=j[1];c.events.mouseOver&&na(b,"mouseOver",{point:d.hoverPoint});r&&r!=b&&r.setState();/(column|bar|pie)/.test(b.type)||e.insertAtFront(a);b.setState("hover");d.hoverSeries=b}},onmouseout:function(){var r=d.hoverSeries;r&&c.events.mouseOut&&na(r,"mouseOut")}});if(c.cursor=="pointer"){a.href="javascript:;"}e.insertAtFront(a);g.push(a)});b.areas=g}}};B=ab(Ja);bb.line=B;B=ab(Ja,{type:"area"});bb.area=B;B=ab(Ja,{type:"spline",translate:function(){var a=this;Ja.prototype.translate.apply(a,arguments);a.splinedata=a.getSplineData()},drawLine:function(){var a=this,b=a.segments;a.segments=a.splinedata;Ja.prototype.drawLine.apply(a,arguments);a.segments=b},getSplineData:function(){var a=this,b=a.chart,c=[],d;p(a.segments,function(e){if(a.xAxis.reversed){e=e.reverse()}var f=[],g,i;p(e,function(k,j){g=e[j+2]||e[j+1]||k;i=e[j-2]||e[j-1]||k;g.plotX>0&&i.plotY<b.plotWidth&&f.push(k)});if(f.length>1){d=O(Lb(b.plotWidth,f[f.length-1].clientX-f[0].clientX)/3)}c.push(e.length>1?d?(new Tc(f)).get(d):[]:e)});return a.splinedata=c}});bb.spline=B;Tc.prototype={get:function(a){a||(a=50);var b=this.n;b=(this.xdata[b-1]-this.xdata[0])/(a-1);var c=[],d=[];c[0]=this.xdata[0];d[0]=this.ydata[0];for(var e=[{plotX:c[0],plotY:d[0]}],f=1;f<a;f++){c[f]=c[0]+f*b;d[f]=this.interpolate(c[f]);e[f]={plotX:c[f],plotY:d[f]}}return e},interpolate:function(a){for(var b=this.n-1,c=0;b-c>1;){var d=(b+c)/2;if(this.xdata[Za(d)]>a){b=d}else{c=d}}b=Za(b);c=Za(c);d=this.xdata[b]-this.xdata[c];var e=(this.xdata[b]-a)/d;a=(a-this.xdata[c])/d;return e*this.ydata[c]+a*this.ydata[b]+((e*e*e-e)*this.y2[c]+(a*a*a-a)*this.y2[b])*d*d/6}};B=ab(B,{type:"areaspline"});bb.areaspline=B;var Vb=ab(Ja,{type:"column",init:function(){Ja.prototype.init.apply(this,arguments);var a=this,b=a.chart;b.hasRendered&&p(b.series,function(c){if(c.type==a.type){c.isDirty=true}})},translate:function(){var a=this,b=a.chart,c=0,d;Ja.prototype.translate.apply(a);p(b.series,function(C){if(C.type==a.type){if(C.options.stacking){Qa(d)||(d=c++);C.columnIndex=d}else{C.columnIndex=c++}}});var e=a.options,f=a.data,g=b.inverted,i=b.plotWidth,k=b.plotHeight,j=a.closestPoints;j=Da(f[1]?f[j].plotX-f[j-1].plotX:g?k:i);var r=j*e.groupPadding,v=j-2*r;v=v/c;var y=e.pointWidth;e=Qa(y)?(v-y)/2:v*e.pointPadding;var R=da(y,v-2*e);b=(b.options.xAxis.reversed?c-a.columnIndex:a.columnIndex)||0;var E=-(j/2)+r+b*v+e,K=a.yAxis.translate(0);p(f,function(C){C.plotX+=E;C.w=R;C.y0=(g?i:k)-K;C.h=(C.yBottom||C.y0)-C.plotY})},drawLine:function(){},getSymbol:function(){},drawPoints:function(a){var b=this,c=b.options,d=b.chart,e=c.animation&&b.animate,f=d.inverted,g=b.data,i=b.stateLayers[a];e&&this.animate(true);p(g,function(k){if(k.plotY!==ma){i.drawRect(f?k.h>=0?d.plotWidth-k.plotY-k.h:d.plotWidth-k.plotY:k.plotX,f?d.plotHeight-k.plotX-k.w:k.h>=0?k.plotY:k.plotY+k.h,f?Da(k.h):k.w,f?k.w:Da(k.h),c.borderColor,c.borderWidth,c.borderRadius,k.color||b.color,c.shadow)}k.selected&&b.drawPointState(k,"select",i)});e&&b.animate()},drawPointState:function(a,b,c){var d=this,e=d.chart,f=d.options,g=a?a.options:null,i=e.inverted;c=c||d.singlePointLayer;if(b=="hover"){if(!c){c=d.singlePointLayer=new pa("single-point",d.layerGroup.div)}c.clear()}if(b&&this.options.states[b]){b=aa(f,f.states[b],g);c.drawRect(i?e.plotWidth-a.plotY-a.h:a.plotX,i?e.plotHeight-a.plotX-a.w:a.plotY,i?a.h:a.w,i?a.w:a.h,b.borderColor,b.borderWidth,b.borderRadius,Bc(b.color||this.color).brighten(b.brightness).get(),b.shadow)}},getAreaCoords:function(){var a=[],b=this.chart,c=b.inverted;p(this.data,function(d){var e=Lb(Da(d.h),3)*(d.h<0?-1:1),f=c?b.plotWidth-d.plotY-e:d.plotX,g=c?b.plotHeight-d.plotX-d.w:d.plotY,i=g+(c?d.w:e);e=f+(c?e:d.w);if(!c&&Da(e-f)<1){e=f+1}else{if(c&&Da(g-i)<1){g=i+1}}a.push([qb([f,i,f,g,e,g,e,i],O).join(","),d])});return a},cleanData:function(){var a=this,b=a.data,c,d,e,f;Ja.prototype.cleanData.apply(a);for(f=b.length-1;f>=0;f--){if(b[f-1]){c=b[f].x-b[f-1].x;if(d===ma||c<d){d=c;e=f}}}a.closestPoints=e},animate:function(a){var b=this,c=b.chart,d=c.inverted,e=b.layerGroup.div;if(a){e.style[d?"left":"top"]=(d?-c.plotWidth:c.plotHeight)+F}else{Db(e,c.inverted?{left:0}:{top:0});b.animate=null}},remove:function(){var a=this,b=a.chart;b.hasRendered&&p(b.series,function(c){if(c.type==a.type){c.isDirty=true}});Ja.prototype.remove.apply(a,arguments)}});bb.column=Vb;var Ic=ab(Vb,{type:"bar",init:function(a){a.inverted=this.inverted=true;Vb.prototype.init.apply(this,arguments)}});bb.bar=Ic;B=ab(Ja,{type:"scatter",getAreaCoords:function(){var a=this.data,b=[];p(a,function(c){b.push([[O(c.plotX),O(c.plotY)].join(","),c])});return b},cleanData:function(){}});bb.scatter=B;B=ab(ic,{setState:function(a){this.series.drawPointState(this,a)},init:function(){ic.prototype.init.apply(this,arguments);var a=this,b=a.series,c=b.chart.options.colors;H(a,{visible:a.visible!==false,name:da(a.name,"Slice"),color:a.color||c[Bb++]});if(Bb>=c.length){Bb=0}if(!a.layer){a.layer=new pa("pie",b.layerGroup.div)}b=function(){a.slice()};Oa(a,"select",b);Oa(a,"unselect",b);return a},setVisible:function(a){var b=this,c=b.layer,d=b.legendItem;(b.visible=a=a===ma?!b.visible:a)?c.show():c.hide();if(d){d.className=a?"":Ob;b.series.chart.legend.drawGraphics(true)}},slice:function(a,b){var c=this,d=c.series;b=da(b,true);c.sliced=Qa(a)?a:!c.sliced;d.isDirty=true;b&&d.chart.redraw()}});B=ab(Ja,{type:"pie",isCartesian:false,pointClass:B,getColor:function(){},translate:function(){var a=0,b=this,c=-0.25,d=b.options,e=d.slicedOffset,f=d.center,g=b.chart;b=b.data;var i=2*ta.PI,k;f.push(d.size);f=qb(f,function(j,r){return/%$/.test(j)?g["plot"+(r?"Height":"Width")]*parseInt(j)/100:j});p(b,function(j){a+=j.y});p(b,function(j){k=a?j.y/a:0;j.start=c*i;c+=k;j.end=c*i;j.percentage=k*100;j.center=[f[0],f[1]];j.size=f[2];var r=(j.end+j.start)/2;j.centerSliced=qb([gc(r)*e+f[0],hc(r)*e+f[1]],O)});this.setTooltipPoints()},render:function(){this.drawPoints();this.drawDataLabels()},drawPoints:function(){var a=this;p(this.data,function(b){a.drawPoint(b,b.layer.getCtx(),b.color);b.visible===false&&b.setVisible(false);b.selected&&a.drawPointState(b,"select",b.layer)})},getSymbol:function(){},drawPointState:function(a,b,c){var d=this,e=d.options;if(a){c=c||a.stateLayer;if(b=="hover"){if(!c){c=a.stateLayer=new pa("single-point",a.layer.div)}c.clear()}if(b&&d.options.states[b]){b=aa(e,e.states[b]);this.drawPoint(a,c.getCtx(),b.color||a.color,b.brightness)}}d.hoverPoint&&d.hoverPoint.stateLayer&&d.hoverPoint.stateLayer.clear();d.hoverPoint=a},drawPoint:function(a,b,c,d){var e=this.options,f=a.sliced?a.centerSliced:a.center,g=f[0];f=f[1];var i=a.size,k=e.borderWidth,j=Ra&&a.percentage==100?a.start:a.end;if(a.y>0){b.fillStyle=Hb(Bc(c).brighten(d).get(b),b);b.strokeStyle=e.borderColor;b.lineWidth=k;b.beginPath();b.moveTo(g,f);b.arc(g,f,i/2,a.start,j,false);b.lineTo(g,f);b.closePath();b.fill();k&&b.stroke()}},getAreaCoords:function(){var a=[];p(this.data,function(b){for(var c=b.center[0],d=b.center[1],e=b.size/2,f=b.start,g=b.end,i=[],k=f;k;k+=0.25){if(k>=g){k=g}i=i.concat([c+gc(k)*e,d+hc(k)*e]);if(k>=g){break}}i=i.concat([c,d]);b.tooltipPos=[c+2*gc((f+g)/2)*e/3,d+2*hc((f+g)/2)*e/3];a.push([qb(i,O).join(","),b])});return a},setData:function(){var a=this,b=a.data,c;if(b){for(c=b.length-1;c>=0;c--){b[c].remove()}}Ja.prototype.setData.apply(a,arguments)},clear:function(){p(this.data,function(a){a.layer.clear();a.dataLabelsLayer&&a.dataLabelsLayer.clear();a.stateLayer&&a.stateLayer.clear()})}});bb.pie=B;Highcharts={numberFormat:Wc,dateFormat:lc,defaultOptions:Ba,setOptions:Vc,Chart:Xc,extendClass:ab,seriesTypes:bb,Layer:pa}})();document.createElement("canvas").getContext||(function(){var S=Math,ae=S.round,K=S.sin,E=S.cos,f=S.abs,e=S.sqrt,ad=10,J=ad/2;function c(){return this.context_||(this.context_=new z(this))}var u=Array.prototype.slice;function b(i,j){var k=u.call(arguments,2);return function(){return i.apply(j,k.concat(u.call(arguments)))}}var r={init:function(i){if(/MSIE/.test(navigator.userAgent)&&!window.opera){var j=i||document;j.createElement("canvas");j.attachEvent("onreadystatechange",b(this.init_,this,j))}},init_:function(i){i.namespaces.g_vml_||i.namespaces.add("g_vml_","urn:schemas-microsoft-com:vml","#default#VML");i.namespaces.g_o_||i.namespaces.add("g_o_","urn:schemas-microsoft-com:office:office","#default#VML");if(!i.styleSheets.ex_canvas_){var j=i.createStyleSheet();j.owningElement.id="ex_canvas_";j.cssText="canvas{display:inline-block;overflow:hidden;text-align:left;width:300px;height:150px}g_vml_\\:*{behavior:url(#default#VML)}g_o_\\:*{behavior:url(#default#VML)}"}var s=i.getElementsByTagName("canvas"),k=0;for(;k<s.length;k++){this.initElement(s[k])}},initElement:function(i){if(!i.getContext){i.getContext=c;i.innerHTML="";i.attachEvent("onpropertychange",a);i.attachEvent("onresize",h);var j=i.attributes;if(j.width&&j.width.specified){i.style.width=j.width.nodeValue+"px"}else{i.width=i.clientWidth}if(j.height&&j.height.specified){i.style.height=j.height.nodeValue+"px"}else{i.height=i.clientHeight}}return i}};function a(i){var j=i.srcElement;switch(i.propertyName){case"width":j.style.width=j.attributes.width.nodeValue+"px";j.getContext().clearRect();break;case"height":j.style.height=j.attributes.height.nodeValue+"px";j.getContext().clearRect();break}}function h(i){var j=i.srcElement;if(j.firstChild){j.firstChild.style.width=j.clientWidth+"px";j.firstChild.style.height=j.clientHeight+"px"}}r.init();var q=[],ab=0;for(;ab<16;ab++){var T=0;for(;T<16;T++){q[ab*16+T]=ab.toString(16)+T.toString(16)}}function x(){return[[1,0,0],[0,1,0],[0,0,1]]}function w(i,j){var B=x(),A=0;for(;A<3;A++){var v=0;for(;v<3;v++){var k=0,s=0;for(;s<3;s++){k+=i[A][s]*j[s][v]}B[A][v]=k}}return B}function o(i,j){j.fillStyle=i.fillStyle;j.lineCap=i.lineCap;j.lineJoin=i.lineJoin;j.lineWidth=i.lineWidth;j.miterLimit=i.miterLimit;j.shadowBlur=i.shadowBlur;j.shadowColor=i.shadowColor;j.shadowOffsetX=i.shadowOffsetX;j.shadowOffsetY=i.shadowOffsetY;j.strokeStyle=i.strokeStyle;j.globalAlpha=i.globalAlpha;j.arcScaleX_=i.arcScaleX_;j.arcScaleY_=i.arcScaleY_;j.lineScale_=i.lineScale_}function n(i){var j,B=1;i=String(i);if(i.substring(0,3)=="rgb"){var A=i.indexOf("(",3),v=i.indexOf(")",A+1),k=i.substring(A+1,v).split(",");j="#";var s=0;for(;s<3;s++){j+=q[Number(k[s])]}if(k.length==4&&i.substr(3,1)=="a"){B=k[3]}}else{j=i}return{color:j,alpha:B}}function ag(i){switch(i){case"butt":return"flat";case"round":return"round";case"square":default:return"square"}}function z(i){this.m_=x();this.mStack_=[];this.aStack_=[];this.currentPath_=[];this.fillStyle=this.strokeStyle="#000";this.lineWidth=1;this.lineJoin="miter";this.lineCap="butt";this.miterLimit=ad*1;this.globalAlpha=1;this.canvas=i;var j=i.ownerDocument.createElement("div");j.style.width=i.clientWidth+"px";j.style.height=i.clientHeight+"px";j.style.overflow="hidden";j.style.position="absolute";i.appendChild(j);this.element_=j;this.lineScale_=this.arcScaleY_=this.arcScaleX_=1}var af=z.prototype;af.clearRect=function(){this.element_.innerHTML=""};af.beginPath=function(){this.currentPath_=[]};af.moveTo=function(i,j){var k=this.getCoords_(i,j);this.currentPath_.push({type:"moveTo",x:k.x,y:k.y});this.currentX_=k.x;this.currentY_=k.y};af.lineTo=function(i,j){var k=this.getCoords_(i,j);this.currentPath_.push({type:"lineTo",x:k.x,y:k.y});this.currentX_=k.x;this.currentY_=k.y};af.bezierCurveTo=function(C,D,B,A,s,j){var k=this.getCoords_(s,j),i=this.getCoords_(C,D),v=this.getCoords_(B,A);l(this,i,v,k)};function l(i,j,s,k){i.currentPath_.push({type:"bezierCurveTo",cp1x:j.x,cp1y:j.y,cp2x:s.x,cp2y:s.y,x:k.x,y:k.y});i.currentX_=k.x;i.currentY_=k.y}af.quadraticCurveTo=function(i,j,B,A){var v=this.getCoords_(i,j),k=this.getCoords_(B,A),s={x:this.currentX_+0.6666666666666666*(v.x-this.currentX_),y:this.currentY_+0.6666666666666666*(v.y-this.currentY_)};l(this,s,{x:s.x+(k.x-this.currentX_)/3,y:s.y+(k.y-this.currentY_)/3},k)};af.arc=function(I,L,H,G,D,B){H*=ad;var C=B?"at":"wa",A=I+E(G)*H-J,F=L+K(G)*H-J,v=I+E(D)*H-J,i=L+K(D)*H-J;if(A==v&&!B){A+=0.125}var s=this.getCoords_(I,L),k=this.getCoords_(A,F),j=this.getCoords_(v,i);this.currentPath_.push({type:C,x:s.x,y:s.y,radius:H,xStart:k.x,yStart:k.y,xEnd:j.x,yEnd:j.y})};af.rect=function(i,j,s,k){this.moveTo(i,j);this.lineTo(i+s,j);this.lineTo(i+s,j+k);this.lineTo(i,j+k);this.closePath()};af.strokeRect=function(i,j,v,s){var k=this.currentPath_;this.beginPath();this.moveTo(i,j);this.lineTo(i+v,j);this.lineTo(i+v,j+s);this.lineTo(i,j+s);this.closePath();this.stroke();this.currentPath_=k};af.fillRect=function(i,j,v,s){var k=this.currentPath_;this.beginPath();this.moveTo(i,j);this.lineTo(i+v,j);this.lineTo(i+v,j+s);this.lineTo(i,j+s);this.closePath();this.fill();this.currentPath_=k};af.createLinearGradient=function(i,j,v,s){var k=new R("gradient");k.x0_=i;k.y0_=j;k.x1_=v;k.y1_=s;return k};af.createRadialGradient=function(i,j,B,A,v,k){var s=new R("gradientradial");s.x0_=i;s.y0_=j;s.r0_=B;s.x1_=A;s.y1_=v;s.r1_=k;return s};af.drawImage=function(Q){var U,P,O,M,I,L,H,N,G=Q.runtimeStyle.width,A=Q.runtimeStyle.height;Q.runtimeStyle.width="auto";Q.runtimeStyle.height="auto";var F=Q.width,D=Q.height;Q.runtimeStyle.width=G;Q.runtimeStyle.height=A;if(arguments.length==3){U=arguments[1];P=arguments[2];I=L=0;H=O=F;N=M=D}else{if(arguments.length==5){U=arguments[1];P=arguments[2];O=arguments[3];M=arguments[4];I=L=0;H=F;N=D}else{if(arguments.length==9){I=arguments[1];L=arguments[2];H=arguments[3];N=arguments[4];U=arguments[5];P=arguments[6];O=arguments[7];M=arguments[8]}else{throw Error("Invalid number of arguments")}}}var B=this.getCoords_(U,P),v=[];v.push(" <g_vml_:group",' coordsize="',ad*10,",",ad*10,'"',' coordorigin="0,0"',' style="width:',10,"px;height:",10,"px;position:absolute;");if(this.m_[0][0]!=1||this.m_[0][1]){var s=[];s.push("M11=",this.m_[0][0],",","M12=",this.m_[1][0],",","M21=",this.m_[0][1],",","M22=",this.m_[1][1],",","Dx=",ae(B.x/ad),",","Dy=",ae(B.y/ad),"");var C=B,i=this.getCoords_(U+O,P),k=this.getCoords_(U,P+M),j=this.getCoords_(U+O,P+M);C.x=S.max(C.x,i.x,k.x,j.x);C.y=S.max(C.y,i.y,k.y,j.y);v.push("padding:0 ",ae(C.x/ad),"px ",ae(C.y/ad),"px 0;filter:progid:DXImageTransform.Microsoft.Matrix(",s.join(""),", sizingmethod='clip');")}else{v.push("top:",ae(B.y/ad),"px;left:",ae(B.x/ad),"px;")}v.push(' ">','<g_vml_:image src="',Q.src,'"',' style="width:',ad*O,"px;"," height:",ad*M,'px;"',' cropleft="',I/F,'"',' croptop="',L/D,'"',' cropright="',(F-I-H)/F,'"',' cropbottom="',(D-L-N)/D,'"'," />","</g_vml_:group>");this.element_.insertAdjacentHTML("BeforeEnd",v.join(""))};af.stroke=function(ah){var ai=[],aa=n(ah?this.fillStyle:this.strokeStyle),Z=aa.color,X=aa.alpha*this.globalAlpha;ai.push("<g_vml_:shape",' filled="',!!ah,'"',' style="position:absolute;width:',10,"px;height:",10,'px;"',' coordorigin="0 0" coordsize="',ad*10," ",ad*10,'"',' stroked="',!ah,'"',' path="');var V={x:null,y:null},W={x:null,y:null},U=0;for(;U<this.currentPath_.length;U++){var Y=this.currentPath_[U];switch(Y.type){case"moveTo":ai.push(" m ",ae(Y.x),",",ae(Y.y));break;case"lineTo":ai.push(" l ",ae(Y.x),",",ae(Y.y));break;case"close":ai.push(" x ");Y=null;break;case"bezierCurveTo":ai.push(" c ",ae(Y.cp1x),",",ae(Y.cp1y),",",ae(Y.cp2x),",",ae(Y.cp2y),",",ae(Y.x),",",ae(Y.y));break;case"at":case"wa":ai.push(" ",Y.type," ",ae(Y.x-this.arcScaleX_*Y.radius),",",ae(Y.y-this.arcScaleY_*Y.radius)," ",ae(Y.x+this.arcScaleX_*Y.radius),",",ae(Y.y+this.arcScaleY_*Y.radius)," ",ae(Y.xStart),",",ae(Y.yStart)," ",ae(Y.xEnd),",",ae(Y.yEnd));break}if(Y){if(V.x==null||Y.x<V.x){V.x=Y.x}if(W.x==null||Y.x>W.x){W.x=Y.x}if(V.y==null||Y.y<V.y){V.y=Y.y}if(W.y==null||Y.y>W.y){W.y=Y.y}}}ai.push(' ">');if(ah){if(typeof this.fillStyle=="object"){var Q=this.fillStyle,I=0,P={x:0,y:0},N=0,L=1;if(Q.type_=="gradient"){var H=Q.x1_/this.arcScaleX_,G=Q.y1_/this.arcScaleY_,M=this.getCoords_(Q.x0_/this.arcScaleX_,Q.y0_/this.arcScaleY_),A=this.getCoords_(H,G);I=Math.atan2(A.x-M.x,A.y-M.y)*180/Math.PI;if(I<0){I+=360}if(I<0.000001){I=0}}else{var M=this.getCoords_(Q.x0_,Q.y0_),D=W.x-V.x,C=W.y-V.y;P={x:(M.x-V.x)/D,y:(M.y-V.y)/C};D/=this.arcScaleX_*ad;C/=this.arcScaleY_*ad;var k=S.max(D,C);N=2*Q.r0_/k;L=2*Q.r1_/k-N}var F=Q.colors_;F.sort(function(am,al){return am.offset-al.offset});var B=F.length,aj=F[0].color,s=F[B-1].color,O=F[0].alpha*this.globalAlpha,ak=F[B-1].alpha*this.globalAlpha,j=[],U=0;for(;U<B;U++){var i=F[U];j.push(i.offset*L+N+" "+i.color)}ai.push('<g_vml_:fill type="',Q.type_,'"',' method="none" focus="100%"',' color="',aj,'"',' color2="',s,'"',' colors="',j.join(","),'"',' opacity="',ak,'"',' g_o_:opacity2="',O,'"',' angle="',I,'"',' focusposition="',P.x,",",P.y,'" />')}else{ai.push('<g_vml_:fill color="',Z,'" opacity="',X,'" />')}}else{var v=this.lineScale_*this.lineWidth;if(v<1){X*=v}ai.push("<g_vml_:stroke",' opacity="',X,'"',' joinstyle="',this.lineJoin,'"',' miterlimit="',this.miterLimit,'"',' endcap="',ag(this.lineCap),'"',' weight="',v,'px"',' color="',Z,'" />')}ai.push("</g_vml_:shape>");this.element_.insertAdjacentHTML("beforeEnd",ai.join(""))};af.fill=function(){this.stroke(true)};af.closePath=function(){this.currentPath_.push({type:"close"})};af.getCoords_=function(i,j){var k=this.m_;return{x:ad*(i*k[0][0]+j*k[1][0]+k[2][0])-J,y:ad*(i*k[0][1]+j*k[1][1]+k[2][1])-J}};af.save=function(){var i={};o(this,i);this.aStack_.push(i);this.mStack_.push(this.m_);this.m_=w(x(),this.m_)};af.restore=function(){o(this.aStack_.pop(),this);this.m_=this.mStack_.pop()};function p(i){var j=0;for(;j<3;j++){var k=0;for(;k<2;k++){if(!isFinite(i[j][k])||isNaN(i[j][k])){return false}}}return true}function ac(i,j,k){if(!!p(j)){i.m_=j;if(k){i.lineScale_=e(f(j[0][0]*j[1][1]-j[0][1]*j[1][0]))}}}af.translate=function(i,j){ac(this,w([[1,0,0],[0,1,0],[i,j,1]],this.m_),false)};af.rotate=function(i){var j=E(i),k=K(i);ac(this,w([[j,k,0],[-k,j,0],[0,0,1]],this.m_),false)};af.scale=function(i,j){this.arcScaleX_*=i;this.arcScaleY_*=j;ac(this,w([[i,0,0],[0,j,0],[0,0,1]],this.m_),true)};af.transform=function(i,j,A,v,s,k){ac(this,w([[i,j,0],[A,v,0],[s,k,1]],this.m_),true)};af.setTransform=function(i,j,A,v,s,k){ac(this,[[i,j,0],[A,v,0],[s,k,1]],true)};af.clip=function(){};af.arcTo=function(){};af.createPattern=function(){return new g};function R(i){this.type_=i;this.r1_=this.y1_=this.x1_=this.r0_=this.y0_=this.x0_=0;this.colors_=[]}R.prototype.addColorStop=function(i,j){j=n(j);this.colors_.push({offset:i,color:j.color,alpha:j.alpha})};function g(){}G_vmlCanvasManager=r;CanvasRenderingContext2D=z;CanvasGradient=R;CanvasPattern=g})();